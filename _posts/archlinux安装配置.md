---
title: archlinux安装配置(1)
tags:
  - archlinux
  - linux
categories: archlinux
toc: true
abbrlink: 7521
date: 2017-08-12 22:10:50
---
# 安装之前
请确认：
> 1.你安装arch Linux的目的是什么。是学习Linux吗？是为了装酷，还是寻求刺激？</br>
> 2.你将安装它到哪里？是你正在使用的电脑上，是一个即将淘汰的旧电脑上，亦或是虚拟机中？</br>
<!--more-->
> 3.你是否了解它的安装方式？还是你打算一步一步学习如何安装？</br>
> 4.你是否了解它的优点和缺点？如果你并不不了解，你是否能承担风险?</br>
我并不是要打消你尝试arch Linux的热情，但是arch Linux激进又高频的更新却几乎使所有使用过它的人印象深刻。频繁更新所带来的新功能和其带来的极不稳定性也为人所诟病。如果你可以在终端下面对字符愉快的玩耍，那么你使用arch Linux将不会有任何问题，但是，如果你是一个新手，那么你将需要一点时间，耐心和解决问题的能力来安装并使用arch Linux。

# 准备安装
> 1.你可能需要确认你要安装位置，如：实体机，虚拟机，为此你将可能要额外准备例如软碟通或UUI这样的工具来帮助你将镜像文件写入U盘中</br>
> 2.如果你的主力系统是Windows xp或Windows 7你可以正常的准备一定的空白磁盘空间，如果是Windows8/8.1/10，你则需要额外了解UEFI模式下Linux操作系统的安装方式

# 开始安装(基础系统)
> 首先，你需要设置你的电脑从你的可引导设备（也就是你在前一步中的U盘）</br>
在arch的引导菜单中，你要选择boot x86-64那项以安装arch Linux，在经过短暂的加载后你将进入Linux的shell模式下。</br>
> <b>注意：请确保你有网络连接</b></br>
如果你拥有有线连接或被Linux内核原生支持的无线网连接，那么恭喜你，可以继续安装了
首先要确保网络连接的速率

```
ping -c 3 www.baidu.com
```

如果速率良好，则可继续安装。如果速率不佳则要执行：

```
nano /etc/pacman.conf
```

在文件中用快捷键

```
^w
```

找到含wget那行并去除行前的“#”号，然后执行

```
^o
```

以写入改动，并用

```
^x
```

来退出nano。

## 磁盘准备
在这里我们选用cfdisk图形化分区工具
在shell界面执行

```
cfdisk
```

在打开的界面选择磁盘类型
> 如果你是用的是已经有操作系统的计算机,请确认你的操作系统使用的磁盘类型</br>
> 通常win7及以下版本的Windows使用的是有诸多限制的mbr的类型,即"dos";而win8及以上为gpt格式的磁盘</br>
> ~~这里就先选择传统格式DOS类型~~

选择GPT类型,回车
按照传统的分区方式,将分区分为/,/home,和efi分区.
> <b>注意</b></br>
> ~~一定要将/分区选为Bootable~~</br>
> 然后选择write选项将改动写入磁盘并退出
接下来执行

```
mkfs.ext4 /dev/sdYX
```

> 1.这里Y代表磁盘的编号,通常以小写字母a,b,c,d...表示</br>
> 2.X表示分区编号,通常以数字1,2,3...形式表示</br>
> ~~3.在本文中sda1为/分区,sda2为swap分区,sda3为/home分区~~</br>
> 4.这里涉及了efi分区。由于这个分区的特殊性，如果是双系统则不需要另外建立，如果是Archlinux单系统就需要建立一个格式为fat32的分区用来储存efi文件。

因此执行

```
mkfs.ext4 /dev/sda1
mkfs.ext4 /dev/sda3
```

然后执行

```
mount /dev/sda1 /mnt
```

挂载分区到挂载点/
执行

```
mkdir /mnt/home
```

创建/home目录
并执行

```
mount /dev/sda3 /mnt/home
```

来挂载sda3分区到/home目录</br>
创建目录/boot/EFI,并将efi分区挂载上去

```
mkdir -p /mnt/boot/EFI
mount /dev/sda2 /mnt/boot/EFI
```

## pacman配置
首先配置软件源

```
nano /etc/pacman.d/mirrorlist
```

寻找含有China一行的软件源并去掉句前的＃号,一般启用2,3个源即可
> Linux内核的操作系统大部分的调整都是通过修改配置文件进行的</br>
> 有诸多选项是可进行选择的,而大部分配置文件会预先给出选项,因此只需删除句前的＃号即可启用选项,而保留＃的哪一航被称为"注释掉了"</br>

最后执行

```
pacman -Syy 
```

强制刷新软件源.
至此,包管理器pacman配置完成


## 基础系统安装
执行

```
pacstrap -i /mnt base base-devel
```

来安装基础系统
待安装完成,使用

```
fstab -t LABEL -p /mnt >> /mnt/etc/fstab
```

~~添加分区的UUID标记。UUID之后也可能会无数次用到遇到。需要特殊注意。~~

更新：fstab使用UUID虽然是推荐的但是很是麻烦，因此个人建议个人使用时候使用卷标即可。

记得执行：

```
cat /mnt/etc/fstab
```

来查看内容是否正确生成。

至此，基础系统安装和准备全部完毕。