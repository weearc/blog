<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>weearc的个人博客</title>
  
  <subtitle>来一起探索吧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.weearc.top/"/>
  <updated>2021-08-11T10:40:24.695Z</updated>
  <id>https://blog.weearc.top/</id>
  
  <author>
    <name>weearc</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>降低你的 Minecraft 存档版本</title>
    <link href="https://blog.weearc.top/posts/4518.html"/>
    <id>https://blog.weearc.top/posts/4518.html</id>
    <published>2021-08-11T05:10:57.000Z</published>
    <updated>2021-08-11T10:40:24.695Z</updated>
    
    <content type="html"><![CDATA[<p>关于我不小心手欠把存档升级到 1.17.1 这件事。<br>1.17.1 本来就没有打算认真去玩，但是对于手欠升级自己存档这件事真的很恼火可以说是。因此就得想个办法来处理一下。</p><p>对于一般的存档来说只要生成了新地形那么降级就几乎不可能，但是对于我这个存档来说就很万幸了，因为不小心进入的时候正好处于 20*20 区块空置域正中心，所以避免了区块的生成和结构的破坏，那样的话就只剩下修改 <code>level.dat</code>一条路了。</p><p><code>level.dat</code>一般结构如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">level.dat</span><br><span class="line">|-Data---CustomBossEvents</span><br><span class="line">       |-DataPacks</span><br><span class="line">       |-DragonFight</span><br><span class="line">       |-GameRules</span><br><span class="line">       |-Player</span><br><span class="line">       |-Version</span><br><span class="line">       |-WorldGenSettings</span><br></pre></td></tr></table></figure><p>所幸的是 1.17.1 对于 WorldGenSettings 几乎没有改动，否则就要大修理了。<code>Version</code> 存储关于 Minecraft 的版本信息。直接参照 1.16.2 的其他存档修改为如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Version--- 3 entries</span><br><span class="line">        |- Id: 2578</span><br><span class="line">        |- Name: 1.16.2</span><br><span class="line">        |- Snapshot: 0</span><br></pre></td></tr></table></figure><p>保存并退出，然后使用 1.16.2 加载存档，保存并退出即修复完成。但是无论如何记得备份好存档再操作，直接操作存档是非常危险的。</p><p>1.17.1 这垃圾优化估计可以让我坚守 1.16.2 更久了，而且对于生电玩法更加困难，没必要再升级了至少目前是这样。</p><p>至于 Linux 下如何运行 <code>NBTexplorer</code> ，直接使用 <code>mono</code>即可，非常简单。</p>]]></content>
    
    <summary type="html">
    
      Mojang 《3
    
    </summary>
    
      <category term="Minecraft" scheme="https://blog.weearc.top/categories/Minecraft/"/>
    
    
      <category term="Minecraft" scheme="https://blog.weearc.top/tags/Minecraft/"/>
    
      <category term="杂项" scheme="https://blog.weearc.top/tags/%E6%9D%82%E9%A1%B9/"/>
    
  </entry>
  
  <entry>
    <title>解决 Fish 不认 history 的问题</title>
    <link href="https://blog.weearc.top/posts/53128.html"/>
    <id>https://blog.weearc.top/posts/53128.html</id>
    <published>2021-08-02T10:29:31.000Z</published>
    <updated>2021-08-02T10:44:06.185Z</updated>
    
    <content type="html"><![CDATA[<p>原本 fish shell 用的好好的，及其方便的设置和高度可自定义的选项和快速的智能补全让它成为懒人的不二之选，但是某天更新过后却出现了无法调用历史的情况，这显然不正常。而我又高度依赖与 fish 的自动补全，尤其对于管理服务器而言是非常之方便的。那肯定就需要搞清楚到底出现了什么问题了。</p><p>首先大概查了一下发现大多是隐私需要删除历史的，这个与我无关。然后翻了一下 fish 的 <a href="https://fishshell.com/docs/current/cmds/history.html" target="_blank" rel="noopener">文档</a> ，里面关于 history 的描述有这么一段比较令人在意的：</p><blockquote><p><strong>merge</strong> immediately incorporates history changes from other sessions. Ordinarily fish ignores history changes from sessions started after the current one. This command applies those changes immediately.</p></blockquote><p>于是首先先确认一下历史文件是否正常：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我的历史文件等保存在默认位置</span></span><br><span class="line">ls ~/.<span class="built_in">local</span>/share/fish/</span><br></pre></td></tr></table></figure><p>然后返回了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fish_history  fish_read_history  generated_completions</span><br></pre></td></tr></table></figure><p>证明历史文件还在，查看了一下内容，10 万行左右，基本没啥问题，还都在。然后尝试合并历史到当前会话：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> --merge</span><br></pre></td></tr></table></figure><p>退出当前会话并查看发现恢复如初，这就很迷惑了…因为我加载 fish 的方式是 konsole 启动时才加载 fish ，所以理应在启动时自动合并。因此为了以防万一可以在 fish 配置文件里加一句让它每次启动自动合并历史。算是暂时解决了这个问题。</p>]]></content>
    
    <summary type="html">
    
      谁能想到用着用着就故障了呢...
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="linux" scheme="https://blog.weearc.top/tags/linux/"/>
    
      <category term="fish shell" scheme="https://blog.weearc.top/tags/fish-shell/"/>
    
      <category term="history file" scheme="https://blog.weearc.top/tags/history-file/"/>
    
  </entry>
  
  <entry>
    <title>Redmi K30 pro 完整体验(后篇)</title>
    <link href="https://blog.weearc.top/posts/34801.html"/>
    <id>https://blog.weearc.top/posts/34801.html</id>
    <published>2021-03-23T16:18:44.000Z</published>
    <updated>2021-03-23T16:41:28.589Z</updated>
    
    <content type="html"><![CDATA[<p>上一篇：<a href="https://blog.weearc.top/posts/155.html">redmi K30 Pro 简评</a></p><p>曾经的我虽然高高兴兴的用着类原生，但中午就得赶快回去充电否则下午晚上直接“人间蒸发”；曾经的我高高兴兴看着 2K 分辨率的顶级 LCD 屏幕，听着超强的双扬声器播放的歌曲，但是机器却时刻可能因为过热直接关机 … 这样的生活似乎已经结束，至少现在，我不必因为全天任何时间点不充电导致自己彻底失联，我也不用因为过热关机导致许多尴尬事情。但是相对的，我逐渐习惯了 1080P 分辨率的屏幕，我逐渐适应了尽管只有类 DC 调光的显示，也适应了原本听上去就感觉极度不适的单扬声器。</p><p>仔细想了一想可能不是因为手机换了我才如此“佛系”，周围的环境、自己的心理状况也多少变得不那么急功近利了，以至于最近在和老妈打电话的时候她直言我变得成熟，又恢复以前的健康的状态了。曾经的我因为高中出来也算是年级相当顶尖的选手，到大学却颇感力不从心，第一次中期考试的不及格更是雪上加霜。所谓心态爆炸大概就是说的那个时候的我。负面情绪占据了自己，自己也躲在尖刺之后，悄悄地舔舐伤口却又渴望他人带来的救赎，然而最终我也没能等到。自己还是要靠自己，所以我选择了逃避一年，无论付出了什么代价自己都要去承受，好朋友都变成了学长，学着更难以理解的课程，更换校区后更是有了新的交际圈，曾经一度以为我可能就这么被遗忘了。但毕竟是自己的选择，就算是狗屎也得忍着。</p><p>（没写完）</p>]]></content>
    
    <summary type="html">
    
      用了这么大半年将近一年，虽然再看到类原生多少还是眼馋，虽然看到新机器也眼馋，但是感觉已经不是再像当初那样非常急迫地想要换机了。可能是环境变了，也可能是我自己变了。
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="小米" scheme="https://blog.weearc.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
      <category term="redmi" scheme="https://blog.weearc.top/tags/redmi/"/>
    
      <category term="红米 k30 pro" scheme="https://blog.weearc.top/tags/%E7%BA%A2%E7%B1%B3-k30-pro/"/>
    
  </entry>
  
  <entry>
    <title>hexo 主题模板改造记录 2</title>
    <link href="https://blog.weearc.top/posts/60875.html"/>
    <id>https://blog.weearc.top/posts/60875.html</id>
    <published>2021-02-19T09:17:28.000Z</published>
    <updated>2021-02-19T12:57:20.394Z</updated>
    
    <content type="html"><![CDATA[<p>第一篇： <a href="https://blog.weearc.top/posts/6009.html">hexo主题迁移and折腾记</a></p><p>第二篇：<a href="https://blog.weearc.top/posts/31380.html">hexo主题模版改造记录</a></p><p>本来在第二篇的时间就打算把剪贴板这件事搞定的，但是一拖拖了好久。</p><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>要知道很多 Hexo 模版都提供剪贴板功能，以及备案号展示功能，但是我这模版太早期了，要是用最新版本的那么自己的代码部分又要全部重新弄，我是非常不愿意这么做。那就不如自己来实现了。然后搜了很久以后我看到这么一篇文章：<a href="https://titangene.github.io/article/hexo-copy-code-snippet-to-clipboard.html" target="_blank" rel="noopener">在 Hexo 主題內新增程式碼片段複製功能</a> 这就很好啊，很符合我的要求。于是动工。</p><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>如果直接修改模版的话似乎也不是不行，但是那样的话可能会极大降低灵活度，另外我在翻看页面文件的时候也并未发现指定代码框的部分，因此还是直接用 JS 操作 DOM Tree 吧。</p><p><img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2021.02.20/2021-02-19_20-30.png" alt="代码框部分"></p><p>如图我们基本可以看到实际上应该一个 highlight 下面俩子节点一个 <code>code</code> 一个 <code>gutter</code> ，这样的话其实如果按照上面链接内文章操作的话是在这段的顶部套一个 DIV 然后插入按钮什么的进去，但是这样似乎对我的这个模板来说不是很友好，所以最后我会选择插入这么个玩意儿：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"codeblock-titlebar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"lang-title"</span> <span class="attr">style</span>=<span class="string">"font-size: 5px"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"codecopy-btn tooltipped tooltipped-sw"</span> <span class="attr">aria-label</span>=<span class="string">"Copy to clipboard"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"fa fa-copy"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        click to copy</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这样就好多了，也不需要担心顶层按钮后面放不了东西背景空一块出来。</p><h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><p>但是其实只要观察过就会知道，整个代码框的部分全部是动态的，也就是说我们无法根据元素进行定位，只能使用 hexo 给定的父级对象操作，然后针对每个对象都如此操作才能在每个代码框中都插入按钮。因此代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> snippets = <span class="built_in">document</span>.querySelectorAll(<span class="string">'figure.highlight'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlCopyButton = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div id="codeblock-titlebar"&gt;</span></span><br><span class="line"><span class="string">    &lt;span id="lang-title" style="font-size: 5px"&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;button class="codecopy-btn tooltipped tooltipped-sw" aria-label="Copy to clipboard"&gt;</span></span><br><span class="line"><span class="string">        &lt;span class="fa fa-copy" aria-hidden="true"&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">        click to copy</span></span><br><span class="line"><span class="string">    &lt;/button&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line">snippets.forEach(<span class="function"><span class="params">snippet</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> parent = snippet.parentNode;</span><br><span class="line">    <span class="keyword">var</span> wrapper = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    parent.replaceChild(wrapper, snippet);</span><br><span class="line">    wrapper.appendChild(snippet);</span><br><span class="line">    wrapper.classList.add(<span class="string">'code-highlight'</span>);</span><br><span class="line">    wrapper.firstChild.insertAdjacentHTML(<span class="string">'beforebegin'</span>, htmlCopyButton);</span><br><span class="line">    <span class="keyword">var</span> lang = (snippet.classList[<span class="number">1</span>] || <span class="string">'code'</span>).toUpperCase();</span><br><span class="line">    wrapper.setAttribute(<span class="string">'data-lang'</span>, lang);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>虽然我们无法直接操作，但是把我们需要的部分包裹起来就好办很多。</p><h2 id="复制按钮定位"><a href="#复制按钮定位" class="headerlink" title="复制按钮定位"></a>复制按钮定位</h2><p>根据 clipboard.js 的文档，直接调用后复制的内容是所调用的标签下的内容，但是我们的按钮的话直接调用会不起任何作用的，还是得找个合适的节点，我们可以在查看一下 <code>td</code>标签的那一行：</p><p>我们需要的部分是：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>"<span class="attr">code</span>"&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上面一堆操作以后目前的结构是:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"code-highlight"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"codeblock-titlebar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>...<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">figure</span> <span class="attr">class</span>=<span class="string">"highlight lang"</span>&gt;</span><span class="comment">&lt;!--实际lang会被替换为编程语言的名称--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"gutter"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"code"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这就其实比较尴尬，大概顺序是我们的按钮的父级的下一个节点的子节点的子节点的子节点的第二个节点才是我们需要的内容（看着就绕），但是实际上确实没有好的处理办法（处理的越简洁速度越慢，详情请见廖雪峰的博客）。所以我们还是老老实实的写吧：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.codecopy-btn'</span>, &#123;</span><br><span class="line">        target: <span class="function"><span class="keyword">function</span>(<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> copytext = trigger.nextSibling.parentElement.nextElementSibling.querySelector(<span class="string">'.code'</span>);</span><br><span class="line">            <span class="keyword">return</span> copytext;</span><br><span class="line">            <span class="comment">// console.log(copytext);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>最后倒是投机取巧的直接找 <code>.code</code> 解决掉，不过速度也不差，就那样吧。关于 <code>CSS</code> 的部分倒是没有什么好说的，直接上代码：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@import "fontawsome-all.min.css";</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ref: https://github.com/primer/primer/blob/master/modules/primer-tooltips/lib/tooltips.scss</span></span><br><span class="line"><span class="selector-class">.tooltipped</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is the tooltip bubble</span></span><br><span class="line"><span class="selector-class">.tooltipped</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1000000</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span> <span class="number">0.75em</span>;</span><br><span class="line">  -webkit-<span class="attribute">font</span>-smoothing: subpixel-antialiased;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">text-shadow</span>: none;</span><br><span class="line">  <span class="attribute">text-transform</span>: none;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: normal;</span><br><span class="line">  <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">  <span class="attribute">white-space</span>: pre;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">content</span>: attr(aria-label);</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#616161</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is the tooltip arrow</span></span><br><span class="line"><span class="selector-class">.tooltipped</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1000001</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#616161</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">6px</span> solid transparent;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// delay animation for tooltip</span></span><br><span class="line"><span class="keyword">@keyframes</span> tooltip-appear &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This will indicate when we'll activate the tooltip</span></span><br><span class="line"><span class="selector-class">.tooltipped</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.tooltipped</span><span class="selector-pseudo">:active</span>,</span><br><span class="line"><span class="selector-class">.tooltipped</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span>,</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">animation-name</span>: tooltip-appear;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">0.1s</span>;</span><br><span class="line">    <span class="attribute">animation-fill-mode</span>: forwards;</span><br><span class="line">    <span class="attribute">animation-timing-function</span>: ease-in;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tooltipped south</span></span><br><span class="line"><span class="selector-class">.tooltipped-s</span>,</span><br><span class="line"><span class="selector-class">.tooltipped-sw</span> &#123;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">6px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: auto;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">7px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="number">#616161</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tooltipped-sw</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Move the tooltip body to the center of the object.</span></span><br><span class="line"><span class="selector-class">.tooltipped-s</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: translateX(<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.codecopy-btn</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.codecopy-btn</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b6b6b6</span>;</span><br><span class="line">  <span class="attribute">text-decoration-color</span>: <span class="number">#1b1f23</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> print,</span><br><span class="line">screen <span class="keyword">and</span> (max-width: <span class="number">900px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.codecopy-btn</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2vh</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> print,</span><br><span class="line">screen <span class="keyword">and</span> (max-width: <span class="number">850px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.codecopy-btn</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1vh</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.code-hightlight</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#codeblock-titlebar</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">float</span>: bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为上面 <code>titlebar</code> 的作用是填补空白部分因此也就不怎么讲究了直接拉满即可。</p><p>（未完）</p>]]></content>
    
    <summary type="html">
    
      本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。
    
    </summary>
    
      <category term="前端" scheme="https://blog.weearc.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="hexo" scheme="https://blog.weearc.top/tags/hexo/"/>
    
      <category term="模版" scheme="https://blog.weearc.top/tags/%E6%A8%A1%E7%89%88/"/>
    
      <category term="响应式" scheme="https://blog.weearc.top/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>使用 github actions 部署博客到腾讯云</title>
    <link href="https://blog.weearc.top/posts/4529.html"/>
    <id>https://blog.weearc.top/posts/4529.html</id>
    <published>2020-08-21T09:31:23.000Z</published>
    <updated>2021-02-19T09:16:34.831Z</updated>
    
    <content type="html"><![CDATA[<p>因为我本人也不是那么熟悉 GITHUB Actions 这玩意儿所以这篇文章仅仅针对性的告诉你怎样配置单单这个自动化部署而已。咕咕咕了很久也是时候应该把这篇补上了。</p><a id="more"></a><p>首先老规矩，在需要部署的仓库里直接建立：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\----workdir</span><br><span class="line">|----.github\</span><br><span class="line">|---- workflows\</span><br><span class="line">|----- _config.yml</span><br></pre></td></tr></table></figure><p>也不是什么难事吧。</p><p>接下来进入 Actions 标签，左侧新建工作流 - 建立我自己的工作流，会给出一个 web editor ，此时可以在右侧选择模板，直接搜索 <code>Cloudbase</code> 会出现由腾讯云提供的 workflow 模板。大致如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tencent</span> <span class="string">CloudBase</span> <span class="string">Github</span> <span class="string">Action</span></span><br><span class="line">  <span class="comment"># You may pin to the exact commit or the version.</span></span><br><span class="line">  <span class="comment"># uses: TencentCloudBase/cloudbase-action@98ad8f31eb7bc09a8da3699149a9f765c7d8e8a1</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">TencentCloudBase/cloudbase-action@v1.1.1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="comment"># 云开发 secretId</span></span><br><span class="line">    <span class="attr">secretId:</span> </span><br><span class="line">    <span class="comment"># 云开发 secretKey</span></span><br><span class="line">    <span class="attr">secretKey:</span> </span><br><span class="line">    <span class="comment"># 云开发环境 Id</span></span><br><span class="line">    <span class="attr">envId:</span> </span><br><span class="line">    <span class="comment"># 静态资源:本地路径</span></span><br><span class="line">    <span class="attr">staticSrcPath:</span> <span class="comment"># optional, default is build</span></span><br><span class="line">    <span class="comment"># 静态资源:云端路径</span></span><br><span class="line">    <span class="attr">staticDestPath:</span> <span class="comment"># optional, default is </span></span><br><span class="line">    <span class="comment"># 静态资源:部署时忽略的文件路径,多个路径用,隔开</span></span><br><span class="line">    <span class="attr">staticIgnore:</span> <span class="comment"># optional, default is .git,.github,node_modules</span></span><br></pre></td></tr></table></figure><p>当然会与最终使用的配置文件有很大差别，我们需要逐一进行更改。首先先命名这个工作流：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">CloudBase</span> <span class="string">CI</span></span><br></pre></td></tr></table></figure><p>然后我们需要设置一下触发工作流的动作：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Controls when the action will run. Triggers the workflow on push or pull request</span></span><br><span class="line"><span class="comment"># events but only for the master branch</span></span><br><span class="line"><span class="attr">on:</span> <span class="string">[push]</span></span><br></pre></td></tr></table></figure><p>这里我印象中可以指定为如下几个动作：</p><ul><li>push</li><li>commit</li><li>pull</li><li>merge</li></ul><p>但是具体的还请看 Github 提供的<a href="https://docs.github.com/cn/actions" target="_blank" rel="noopener">文档</a>。这里我们期望的是将文章在本地渲染后直接推动到远程服务器触发部署因此 <code>on</code> 的选择条件为监听 <code>push</code> 动作。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="comment"># This workflow contains a single job called "build"</span></span><br></pre></td></tr></table></figure><p>这里会出现一个数组，此数组下所有内容均被视为这个工作流在触发以后的动作。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">   <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">   <span class="attr">name:</span> <span class="string">Tencent</span> <span class="string">Cloudbase</span> <span class="string">Github</span> <span class="string">Action</span></span><br><span class="line">   <span class="attr">steps:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">       <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">static</span> <span class="string">to</span> <span class="string">Tencent</span> <span class="string">CloudBase</span></span><br><span class="line">       <span class="attr">id:</span> <span class="string">deployStatic</span></span><br><span class="line">       <span class="attr">uses:</span> <span class="string">TencentCloudBase/cloudbase-action@v1.1.1</span></span><br><span class="line">       <span class="attr">with:</span></span><br><span class="line">         <span class="attr">secretId:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SECRET_ID</span> <span class="string">&#125;&#125;</span></span><br><span class="line">         <span class="attr">secretKey:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SECRET_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">         <span class="attr">envId:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ENV_ID</span> <span class="string">&#125;&#125;</span></span><br><span class="line">         <span class="attr">staticSrcPath:</span> <span class="string">./</span></span><br></pre></td></tr></table></figure><p>这些部分逐一进行解释：</p><ul><li>deploy：部署项目</li><li>runs-on：指定操作系统环境或者软件环境，我就选择了比较常用的 ubuntu 18.04</li><li>name：任务的名称</li><li>steps：部署的动作，会逐一进行，每个步骤会跟随一个 <code>name</code> 和 <code>uses</code> 即使用的动作</li></ul><p>由于一般情况是部署源码上去然后直接利用工作流渲染出来部署，但是我的仓库公开担心 apikey 之类的外流，因此选择在本地渲染完，远程工作流仅仅做一个 copy 的动作就行。因为使用的是 <code>deployStatic</code> 动作，并在子项 <code>staticSrcPath</code> 指定源码目录为项目根目录，<code>with</code> 部分均填写在项目设置里的 <code>secrets</code> 即可，可以直接调用对象。CloudBase 那边只要配置一下域名什么的就可以了，几乎不需要动什么。本次操作也就是全程 copy 毫无技术含量可言。当触发动作后可以进入 <code>Actions</code> 标签查看状态。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;因为我本人也不是那么熟悉 GITHUB Actions 这玩意儿所以这篇文章仅仅针对性的告诉你怎样配置单单这个自动化部署而已。咕咕咕了很久也是时候应该把这篇补上了。&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://blog.weearc.top/categories/hexo/"/>
    
    
      <category term="完全配置" scheme="https://blog.weearc.top/tags/%E5%AE%8C%E5%85%A8%E9%85%8D%E7%BD%AE/"/>
    
      <category term="hexo" scheme="https://blog.weearc.top/tags/hexo/"/>
    
      <category term="Github Actions" scheme="https://blog.weearc.top/tags/Github-Actions/"/>
    
  </entry>
  
  <entry>
    <title>使用 Webhook 自动部署博客到服务器</title>
    <link href="https://blog.weearc.top/posts/49037.html"/>
    <id>https://blog.weearc.top/posts/49037.html</id>
    <published>2020-08-11T13:58:34.000Z</published>
    <updated>2020-08-20T17:01:43.128Z</updated>
    
    <content type="html"><![CDATA[<p>本文所提到的大概还是有实用价值的，但是我个人应该是不会用在博客上了。至于为什么 … 因为心态炸了，退掉了手里所剩的几台 vps ，没必要使用自动部署了，但是日后可能会用在 <a href="https://mirrors.cqu.edu.cn/wiki/" target="_blank" rel="noopener">CQU mirror wiki</a> 上。</p><a id="more"></a><h2 id="事情起因"><a href="#事情起因" class="headerlink" title="事情起因"></a>事情起因</h2><p>其实本来这种自动化部署之前弄过一次，但是因为某些原因服务器的 Debian 8 安装 node 11很麻烦，而我的自动化部署工具是基于 node11 的，所以索性放弃，每次登上去手动同步一下就好。</p><p>但是这时候朋友的<a href="https://purefkh.xyz" target="_blank" rel="noopener">博客</a>刚刚做好备案，然后另外一个朋友的博客改为放到 vercel 上了（均带有自动化部署），本着攀比心理，因为自己博客之前一直部署于服务器上所以觉得自己可以再折腾一次自动化部署，本着方便使用语言选择了 golang ，毕竟作为 Linuxer 自己折腾才是一大乐趣。</p><h2 id="开始折腾"><a href="#开始折腾" class="headerlink" title="开始折腾"></a>开始折腾</h2><p>既然语言选择了 golang ，那么如何实现就是一个问题，毕竟 nodejs 下面有现成的轮子可以用。所以基于对 golang 的了解和自己对于这个小工具的设计，决定这样来写这个工具：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- cli 可用</span><br><span class="line">- 尽量简单</span><br><span class="line">- 通过处理请求头的办法来实现</span><br><span class="line">- 服务端通过端口转发来使用，尽量不暴露端口</span><br></pre></td></tr></table></figure><p>使用到的库：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"crypto/hmac"</span></span><br><span class="line"><span class="string">"crypto/sha1"</span></span><br><span class="line"><span class="string">"encoding/hex"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"gopkg.in/urfave/cli.v1"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"io/ioutil"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"os/exec"</span></span><br><span class="line"><span class="string">"sort"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>其中 <a href="https://gopkg.in/urfave/cli.v1" target="_blank" rel="noopener">cli</a> 框架是用来处理 cli 下 Flag 等传值的，比起自己造轮子这个库要好用得多。然后需要处理一下监听：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.ListenAndServe(portForward, <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><p>有了 http 库，监听只需要这一行代码即可实现。然后是请求头：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">index</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">signature := r.Header.Get(<span class="string">"X-Hub-Signature"</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(signature) &lt;= <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">payload, _ := ioutil.ReadAll(r.Body)</span><br><span class="line">mac := hmac.New(sha1.New, []<span class="keyword">byte</span>(secret))</span><br><span class="line">fmt.Printf(secret)</span><br><span class="line">_, _ = mac.Write(payload)</span><br><span class="line">expectedMac := hex.EncodeToString(mac.Sum(<span class="literal">nil</span>))</span><br><span class="line"><span class="keyword">if</span> !hmac.Equal([]<span class="keyword">byte</span>(signature[<span class="number">5</span>:]), []<span class="keyword">byte</span>(expectedMac)) &#123;</span><br><span class="line">io.WriteString(w, <span class="string">"&lt;h1&gt;401 Signature is error!&lt;/h1&gt;"</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">io.WriteString(w, <span class="string">"&lt;h1&gt;200 Deploy server is running!&lt;/h1&gt;"</span>)</span><br><span class="line">reLaunch()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这部分主要是需要有两个参数，一个是响应请求，一些是读取请求，具体怎么分析请求头，这接点开 webhook 的历史即可看到一个实例请求，我们需要处理的仅仅是 <strong>X-Hub-Signature</strong> 这一项，然后比对请求中的秘钥和转码后的秘钥是否相同判断是否可以执行接下来的动作。</p><p>http 库最好用的我认为应该是可以对请求执行自定义函数了，直接指定一个 reload 方法即可调用拉取更新的脚本等：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reLaunch</span><span class="params">()</span></span> &#123;</span><br><span class="line">cmd := exec.Command(<span class="string">"load"</span>)</span><br><span class="line">err := cmd.Start()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">err = cmd.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">http.HandleFunc(<span class="string">"/"</span>, index)</span><br></pre></td></tr></table></figure><p>然后最后一点就是为整个功能套上 cli 框架即可，由于 cli 框架本身并不难用，所以一般直接看代码示例即可。项目地址：<a href="https://github.com/weearc/blog-webhook-deploy" target="_blank" rel="noopener">https://github.com/weearc/blog-webhook-deploy</a></p><p>项目使用 GPLv3 开源，许可证也会在稍后进行添加。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文所提到的大概还是有实用价值的，但是我个人应该是不会用在博客上了。至于为什么 … 因为心态炸了，退掉了手里所剩的几台 vps ，没必要使用自动部署了，但是日后可能会用在 &lt;a href=&quot;https://mirrors.cqu.edu.cn/wiki/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CQU mirror wiki&lt;/a&gt; 上。&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://blog.weearc.top/categories/hexo/"/>
    
    
      <category term="github webhook" scheme="https://blog.weearc.top/tags/github-webhook/"/>
    
      <category term="自动化部署" scheme="https://blog.weearc.top/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>[划水文] 给NAS的Ubuntu Server升级</title>
    <link href="https://blog.weearc.top/posts/60365.html"/>
    <id>https://blog.weearc.top/posts/60365.html</id>
    <published>2020-06-02T08:41:51.000Z</published>
    <updated>2020-06-02T09:04:12.448Z</updated>
    
    <content type="html"><![CDATA[<p>在给 NAS 升级系统之前我是很忐忑的,毕竟以前有过 Ubuntu 升级滚挂的经历(桌面版)，稍微查了一下似乎没有给 Ubuntu Server 升级的，那我就自己水一篇算了，过程比桌面版稳定很多也不容易出现什么问题。</p><a id="more"></a><p>首先你可能需要确定一下现在的 Ubuntu 版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure><p>大多数 Linux 发行版都可以通过这个方式确定版本号和具体发行版。比如以下三个（我的 NAS、笔记本和救援系统）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os-relase examples</span></span><br><span class="line"><span class="comment"># Ubuntu Server 20.04 LTS</span></span><br><span class="line">NAME=<span class="string">"Ubuntu"</span></span><br><span class="line">VERSION=<span class="string">"20.04 LTS (Focal Fossa)"</span></span><br><span class="line">ID=ubuntu</span><br><span class="line">ID_LIKE=debian</span><br><span class="line">PRETTY_NAME=<span class="string">"Ubuntu 20.04 LTS"</span></span><br><span class="line">VERSION_ID=<span class="string">"20.04"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.ubuntu.com/"</span></span><br><span class="line">SUPPORT_URL=<span class="string">"https://help.ubuntu.com/"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.launchpad.net/ubuntu/"</span></span><br><span class="line">PRIVACY_POLICY_URL=<span class="string">"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"</span></span><br><span class="line">VERSION_CODENAME=focal</span><br><span class="line">UBUNTU_CODENAME=focal</span><br><span class="line"><span class="comment"># Arch Linux Rolling</span></span><br><span class="line">NAME=<span class="string">"Arch Linux"</span></span><br><span class="line">PRETTY_NAME=<span class="string">"Arch Linux"</span></span><br><span class="line">ID=arch</span><br><span class="line">BUILD_ID=rolling</span><br><span class="line">ANSI_COLOR=<span class="string">"38;2;23;147;209"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.archlinux.org/"</span></span><br><span class="line">DOCUMENTATION_URL=<span class="string">"https://wiki.archlinux.org/"</span></span><br><span class="line">SUPPORT_URL=<span class="string">"https://bbs.archlinux.org/"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.archlinux.org/"</span></span><br><span class="line">LOGO=archlinux</span><br><span class="line"><span class="comment"># OpenSUSE Tumbleweed</span></span><br><span class="line">NAME=<span class="string">"openSUSE Tumbleweed"</span></span><br><span class="line">VERSION=<span class="string">"20200528"</span></span><br><span class="line">ID=<span class="string">"opensuse-tumbleweed"</span></span><br><span class="line">ID_LIKE=<span class="string">"opensuse suse"</span></span><br><span class="line">VERSION_ID=<span class="string">"20200528"</span></span><br><span class="line">PRETTY_NAME=<span class="string">"openSUSE Tumbleweed"</span></span><br><span class="line">ANSI_COLOR=<span class="string">"0;32"</span></span><br><span class="line">CPE_NAME=<span class="string">"cpe:/o:opensuse:tumbleweed:20200528"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.opensuse.org"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.opensuse.org/"</span></span><br><span class="line">LOGO=<span class="string">"distributor-logo"</span></span><br></pre></td></tr></table></figure><p>看到 <code>VERSION</code> 那行了吗？括号里那个是 Ubuntu 的版本号和发行代号。记住这个，很重要。然后我们前往 <a href="https://wiki.ubuntu.com/Releases" target="_blank" rel="noopener">Ubuntu Wiki</a> 查看一下可选升级的发行代号，虽然怎么升级都差不太多，但是最好还是从 LTS 到 LTS 版本比较好，毕竟服务器系统稳定是第一位的。</p><p>接下来和升级 Debian Stable 一样，我们要查看一下现在的 <code>apt sourceslist</code> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list</span><br><span class="line">-------------------------</span><br><span class="line"><span class="comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span></span><br><span class="line"><span class="comment"># newer versions of the distribution.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic main restricted</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Major bug fix updates produced after the final release of the</span></span><br><span class="line"><span class="comment">## distribution.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-updates main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-updates main restricted</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span><br><span class="line"><span class="comment">## team. Also, please note that software in universe WILL NOT receive any</span></span><br><span class="line"><span class="comment">## review or updates from the Ubuntu security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic universe</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-updates universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-updates universe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span><br><span class="line"><span class="comment">## team, and may not be under a free licence. Please satisfy yourself as to</span></span><br><span class="line"><span class="comment">## your rights to use the software. Also, please note that software in</span></span><br><span class="line"><span class="comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span></span><br><span class="line"><span class="comment">## security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic multiverse</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-updates multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-updates multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository may not have been tested as</span></span><br><span class="line"><span class="comment">## extensively as that contained in the main release, although it includes</span></span><br><span class="line"><span class="comment">## newer versions of some applications which may provide useful features.</span></span><br><span class="line"><span class="comment">## Also, please note that software in backports WILL NOT receive any review</span></span><br><span class="line"><span class="comment">## or updates from the Ubuntu security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-backports main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Uncomment the following two lines to add software from Canonical's</span></span><br><span class="line"><span class="comment">## 'partner' repository.</span></span><br><span class="line"><span class="comment">## This software is not part of Ubuntu, but is offered by Canonical and the</span></span><br><span class="line"><span class="comment">## respective vendors as a service to Ubuntu users.</span></span><br><span class="line"><span class="comment"># deb http://archive.canonical.com/ubuntu bionic partner</span></span><br><span class="line"><span class="comment"># deb-src http://archive.canonical.com/ubuntu bionic partner</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-security main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-security main restricted</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-security universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-security universe</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu bionic-security multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu bionic-security multiverse</span></span><br></pre></td></tr></table></figure><p>看到 <code>bionic</code> 了吗？那个是我们现在的代号，我选择升级的 <code>20.04 LTS</code> 发型代号为 <code>Focal Fossa</code> 所以直接用新的发行代号替换旧的就行。</p><p>操作如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份 sources.list</span></span><br><span class="line">cp /etc/apt/sources.list  /etc/apt/sources.list.bak</span><br><span class="line"><span class="comment"># 替换发行代号</span></span><br><span class="line">sed -i <span class="string">'s/bionic/focal/g'</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>可以再 <code>cat</code> 一下，此时文件内容变为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span></span><br><span class="line"><span class="comment"># newer versions of the distribution.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal main restricted</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Major bug fix updates produced after the final release of the</span></span><br><span class="line"><span class="comment">## distribution.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-updates main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-updates main restricted</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span><br><span class="line"><span class="comment">## team. Also, please note that software in universe WILL NOT receive any</span></span><br><span class="line"><span class="comment">## review or updates from the Ubuntu security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal universe</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-updates universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-updates universe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span><br><span class="line"><span class="comment">## team, and may not be under a free licence. Please satisfy yourself as to</span></span><br><span class="line"><span class="comment">## your rights to use the software. Also, please note that software in</span></span><br><span class="line"><span class="comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span></span><br><span class="line"><span class="comment">## security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal multiverse</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-updates multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-updates multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## N.B. software from this repository may not have been tested as</span></span><br><span class="line"><span class="comment">## extensively as that contained in the main release, although it includes</span></span><br><span class="line"><span class="comment">## newer versions of some applications which may provide useful features.</span></span><br><span class="line"><span class="comment">## Also, please note that software in backports WILL NOT receive any review</span></span><br><span class="line"><span class="comment">## or updates from the Ubuntu security team.</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-backports main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Uncomment the following two lines to add software from Canonical's</span></span><br><span class="line"><span class="comment">## 'partner' repository.</span></span><br><span class="line"><span class="comment">## This software is not part of Ubuntu, but is offered by Canonical and the</span></span><br><span class="line"><span class="comment">## respective vendors as a service to Ubuntu users.</span></span><br><span class="line"><span class="comment"># deb http://archive.canonical.com/ubuntu focal partner</span></span><br><span class="line"><span class="comment"># deb-src http://archive.canonical.com/ubuntu focal partner</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-security main restricted</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-security main restricted</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-security universe</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-security universe</span></span><br><span class="line">deb http://mirrors.cqu.edu.cn/ubuntu focal-security multiverse</span><br><span class="line"><span class="comment"># deb-src http://mirrors.cqu.edu.cn/ubuntu focal-security multiverse</span></span><br></pre></td></tr></table></figure><p>接下来我们 <code>apt update</code> 一下更新缓存，然后执行 <code>apt upgrade</code> 进行升级。这个阶段可能会报错，不用理会。更新完重启系统，会发现此时还在旧版，但是这次可以进行升级了，直接执行 <code>apt upgrade</code> 进行升级，期间会提示包括 <code>ssh_config</code> 文件之类的需要进行修改，此时保留旧的配置文件即可，剩下的一路回车直至升级完成。即可完成跨版本升级。</p><p>祝使用愉快！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在给 NAS 升级系统之前我是很忐忑的,毕竟以前有过 Ubuntu 升级滚挂的经历(桌面版)，稍微查了一下似乎没有给 Ubuntu Server 升级的，那我就自己水一篇算了，过程比桌面版稳定很多也不容易出现什么问题。&lt;/p&gt;
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="Ubuntu" scheme="https://blog.weearc.top/tags/Ubuntu/"/>
    
      <category term="升级" scheme="https://blog.weearc.top/tags/%E5%8D%87%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>redmi K30 Pro 简评</title>
    <link href="https://blog.weearc.top/posts/155.html"/>
    <id>https://blog.weearc.top/posts/155.html</id>
    <published>2020-05-17T15:05:40.000Z</published>
    <updated>2020-05-17T15:43:00.048Z</updated>
    
    <content type="html"><![CDATA[<p>今年换手机这个时间节点卡的非常不好，早一点有最末代 4G 旗舰机纷纷大降价，晚一点可能还有 5G 手机集体跳水。但是买了就买了。鄙人第三部纯小米家搭载 MIUI 的设备。</p><a id="more"></a><p>我的上一部设备：HTC U Ultra，HTC U系列的开山之作，也可能说是 U 系列最失败的作品。你问我当时后不后悔在 18 年年初买了一款 17 年初的产品，我的回答是不后悔：放在今天依然不为过时的机身设计、2K LCD 屏幕、强悍的双扬声器、主动降噪耳机以及 HIFI 都带来了非常极致的视觉听觉盛宴，当时最为彪悍的影像系统也使得这部设备在服役期间让我体会到了它的强大。可惜就可惜在这么看起来很强大的设备搭载的是高通有着火龙之称的 SOC 821，而且还是阉割版。如果是放在17年年初这款设备的运存性能什么的也都够用，但是一跨入19年立刻体现出了短板，并且仅仅3000毫安时外加极为激进的调度让我不得不时时刻刻准备着充电宝，但是仍有可能在剩余百分之十几电量时突然自动关机。</p><p>上学期好信儿测了一个月电池损耗，两年使用时间实际损耗不到百分之10倒是体现了 HTC 到底还是在用料上花了钱，遂换了块电池觉得能够继续服役。但是没能料到年后续航直接从刚换电池那会儿近乎腰斩，外加4GB 运行内存不怎么够用，所以还是准备更换手机。</p><p>要知道今年可以更换的手机真的是选择少之又少，尤其是 5G 手机，各家纷纷将高刷新率作为卖点的同时外加物料人工成本疯狂上涨，价格是直接翻了一番。因为考虑到后期可能需要使用 GMS（我对GMS重度依赖，没办法，从13年开始自己选择的），华为系手机不得已全部不能选择，很可惜。 那么能够选择的只剩下小米、OPPO、VIVO、Realme、一加这几个选项。俗话说得好：一朝被蛇咬十年怕井绳，看了大量网友的评测以后决定放弃续航稍差的 Realme X50 Pro，OPPO的机器因为价格也不得不放弃，一加在考虑了售后以后放弃，VIVO 因为系统原因放弃。只剩下小米10和 Redmi K30 Pro 这两个选项。不买中端机的原因也很简单，旗舰的配置可以在某种程度上将使用年限拉长并且体验更好。最终还是考虑了续航的情况下选择了红米 K30 Pro。</p><p>说了这么多，这台机器有什么卖点？是续航，还是所谓真全面屏？在我看来这些都不能算是卖点，高通 865 一套打包拿来就是那么些东西，各家标配。没有的高刷新率的屏幕虽然本身不错但是今年却意外的成为了各路网友疯狂吐槽的地方。于我个人而言，这台机器总体体验对比 U Ultra 是升级的，要不换手机是换了个什么呢？但是总体体验依旧降级：</p><ul><li>1080p 屏幕，等效330 ppi。对比 U Ultra 的“标准”2560×1440的屏幕 ppi 440（虽然米10等效ppi也很低）</li><li>单扬声器。从双扬声器缓过来不是不能适应，但是还是觉得并不舒服。</li><li>Type-C 接口数字信号音频输出功率小。自带 DAC 的转接线几乎就是推不动。</li><li>重量。重量来到了228g，用一年下来应该就成麒麟臂了，带壳贴膜妥妥“米半斤”</li></ul><p>那么也有一定的优势：</p><ul><li>续航。变态级别的续航，轻松日用亮屏10小时以上，充一次电使用时间20小时起步（前提是自己改一改省电策略）</li><li>还算不错的屏幕色彩。虽然 PPI 大打折扣但是屏幕色彩确实还可以。</li><li>还算不错的影像系统。虽然是打包出售的 imx686，但是体验下来整体体验确实不错。</li></ul><p>一个优点顶十个缺点。最起码换机的原因之一：续航这个痛点是完美解决了。</p><p>（未完待续）</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今年换手机这个时间节点卡的非常不好，早一点有最末代 4G 旗舰机纷纷大降价，晚一点可能还有 5G 手机集体跳水。但是买了就买了。鄙人第三部纯小米家搭载 MIUI 的设备。&lt;/p&gt;
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="小米" scheme="https://blog.weearc.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
      <category term="redmi" scheme="https://blog.weearc.top/tags/redmi/"/>
    
      <category term="红米 k30 pro" scheme="https://blog.weearc.top/tags/%E7%BA%A2%E7%B1%B3-k30-pro/"/>
    
      <category term="电量焦虑" scheme="https://blog.weearc.top/tags/%E7%94%B5%E9%87%8F%E7%84%A6%E8%99%91/"/>
    
  </entry>
  
  <entry>
    <title>夜食食谱</title>
    <link href="https://blog.weearc.top/posts/1552.html"/>
    <id>https://blog.weearc.top/posts/1552.html</id>
    <published>2020-04-07T17:21:14.000Z</published>
    <updated>2020-04-07T17:44:44.187Z</updated>
    
    <content type="html"><![CDATA[<p>最近晚上很容易饿，就自己摸索了一点简单的食谱出来。</p><a id="more"></a><p>可能是北方最近结束供暖的缘故，地气很凉，然后为了保持体温之前供暖那段时间的不大的饭量转化为热可能就没剩下多少了。有时候夜里也爱到处寻找食物，但是 … 毕竟宵夜不能总吃而且对身体不好，晚饭在家里又只有我一个人吃，那就不如晚饭做一点容易暖和起来的更容易有饱腹感的食物。(在家不吃肉，所以肉是不存在的.jpg)</p><p>大概参考了日式杂烩饭的做法，稍稍改造了一下，食谱如下：</p><blockquote><p>原料： 大米（看量杯就可以，一般一小杯是一人一碗半的量）、胡萝卜、生姜。如果有吃剩下的蘑菇也可以加一点进去</p><p>调料：酱油、白酒、砂糖</p></blockquote><p>没了，就这么简单。煮个大米饭也没什么要点。无非是控制好水不要太多，把手指插入米中差不多水面比大米高出一个指关节高度。然后酱油用生抽就好，如果能买到日式酱油当然更棒，酒 + 砂糖这个组合是为了替代味淋（本来早打算再买一点，但是卖这些的店这几天才重新开起来了），砂糖不用很多，刚好似有似无甜味的程度就可以了，得自己慢慢试着来。整个饭的亮点感觉在于生姜，给饭增添了非常棒的风味。如果是用南方的籼米做的话可以在出国后少淋一点芝麻油，当然东北大米就不需要了，油水很足，干吃都非常香。</p><p>以前也试着用咖喱粉+鸡蛋简单调一个蛋糊做调味饭，但是还是觉得自己更喜欢偏向日餐韩餐的风味，贴近锅边的地方会有一点点锅巴，很让人满足。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近晚上很容易饿，就自己摸索了一点简单的食谱出来。&lt;/p&gt;
    
    </summary>
    
      <category term="杂谈" scheme="https://blog.weearc.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="杂谈" scheme="https://blog.weearc.top/tags/%E6%9D%82%E8%B0%88/"/>
    
      <category term="食谱" scheme="https://blog.weearc.top/tags/%E9%A3%9F%E8%B0%B1/"/>
    
  </entry>
  
  <entry>
    <title>[冷门向] 使用 mpv 打造专属播放器</title>
    <link href="https://blog.weearc.top/posts/162.html"/>
    <id>https://blog.weearc.top/posts/162.html</id>
    <published>2020-03-29T12:53:56.000Z</published>
    <updated>2020-04-07T17:25:11.933Z</updated>
    
    <content type="html"><![CDATA[<p>全文已发布至重庆大学蓝盟微信公众号往期内容内，博客上的版本待修改完善。</p><a id="more"></a><p>作为一个影音爱好者，我需要利器去使电影播放效果更加出色。作为技术向玩家，既然目前已有的工具都不怎么好用，那我们就来改造它让它更好用。</p><p>这就是我们今天要介绍的主角：mpv。</p><p><img src="/home/ddqi/推文/mpv-logo-128-0baae5aa.png" alt="mpv-logo-128-0baae5aa"></p><blockquote><p>MPV 是基于 MPlayer 和 MPlayer2 的开源软件。具有卓越的性能以及跨平台兼容性。</p><p>— 维基百科</p></blockquote><p>说到 MPV ， 大部分日常使用 Windows 的同志可能都没有听说过。但是 Linux 和 Mac OS 用户可能大部分人还是接触过的，即便是使用了 MPV 的变种（比如： bomi，或者是 Mac 下拥有精美 GUI 界面的IINA）他们都和 MPV 同宗同源。在大部分情况下，使用已经功能足够完善的带 GUI 的 MPV 虽然已经足够，但是就个人而言，却远远不够，这个影音大杀器只有在我们的完全自定义中才能最强大的力量。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>MPV 的安装极其简单：</p><ul><li><p>Windows： 访问 mpv.io 并下载 mingw-w64-mpv </p></li><li><p>Mac：Mac OS 用户可以通过 Brew 安装 MPV：</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mpv</span><br></pre></td></tr></table></figure></li><li><p>Linux：一般的 Linux 仓库都会包含 MPV，部分发行版预装了 MPV，想要独立安装请使用以下指令</p><p>Ubuntu / Debian ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mpv</span><br></pre></td></tr></table></figure><p>OpenSUSE ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> mpv</span><br></pre></td></tr></table></figure><p>Fedora：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install mpv</span><br></pre></td></tr></table></figure><p>Arch Linux：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mpv</span><br></pre></td></tr></table></figure></li><li><p>当然你也可以从源代码编译 MPV ，可以从 MPV 的 GITHUB 仓库获取源代码并修改编译参数，包含 / 去除 某些特性</p></li></ul><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>如果你成功的克服了心里上的恐惧，成功“安装”了MPV，那么这一步将是你能够愉快使用与否的关键。</p><p>在大部分情况下（尤其是 Mac 和 Linux 用户），已经将编解码器作为依赖安装到了操作系统中，而 Windows 用户可能需要手动安装 FFmpeg 作为编解码工具。由于没有编解码器的播放器只是一个“睁眼瞎”，只有在编解码器的存在下它才能发挥其真正的作用。那么在安装结束后，你可以使用 MPV 的默认设置进行视频播放了。</p><p><img src="/home/ddqi/推文/image-20200329212708064.png" alt="image-20200329212708064"></p><p>通常来讲直接运行 MPV 应该是这个样子，相比于其他完全基于命令行的播放器，MPV 还有个 GUI（虽然没什么用）。</p><p><img src="/home/ddqi/推文/深度截图_选择区域_20200329212939.png" alt="深度截图_选择区域_20200329212939"></p><p>播放视频的时候是这个样子，功能全部集中于下部的控制栏上，好像也还够用（其实确实够用了）。这个是小编配置完的 MPV ，但是因为懒 GUI 部分就不打算动了，这样也挺好的。</p><p>MPV 之所以看上去很简单（应该叫简陋），是因为它和大多数的高自定义化的工具一样，许多功能只有在探索之后才会被发现，另外支持丰富的扩展，可以找别人已经写好了的插件，也可以自己学着写一些插件。与其让开发者动手去满足用户（还不一定都会满足），不如自己动手丰衣足食。如果使用默认配置就能够让你满足那确实是最好不过，但是我们完全可以给它加上一些更有趣的功能。</p><h2 id="缩略图"><a href="#缩略图" class="headerlink" title="缩略图"></a>缩略图</h2><p>这个是一般开箱即用的播放器都会有的功能。</p><p>地址：<a href="https://github.com/TheAMM/mpv_thumbnail_script" target="_blank" rel="noopener">https://github.com/TheAMM/mpv_thumbnail_script</a></p><p>这是一个非常棒的查看进度条上缩略图的脚本，基于 Lua ，并具有一定的自定义功能<img src="/home/ddqi/推文/深度录屏_选择区域_20200329214106.gif" alt="深度录屏_选择区域_20200329214106"></p><p>安装：将脚本放于以下位置</p><p>Windows: <code>%APPDATA%\mpv\scripts\mpv_thumbnail_script_server.lua</code> &amp; <code>%APPDATA%\mpv\scripts\mpv_thumbnail_script_client_osc.lua</code></p><p>Linux/Unix/Mac: ~/.config/mpv/scripts/mpv_thumbnail_script_server.lua &amp; ~/.config/mpv/scripts/mpv_thumbnail_script_client_osc.lua</p><p>注：如果目录不存在则需要手动创建，具体可以参照 GITHUB 上的说明</p><h2 id="文本菜单"><a href="#文本菜单" class="headerlink" title="文本菜单"></a>文本菜单</h2><p>如果觉得部分基于命令行的功能不太适应的话，不妨试一下图形菜单。</p><p>地址： <a href="https://github.com/carmanaught/mpvcontextmenu" target="_blank" rel="noopener">https://github.com/carmanaught/mpvcontextmenu</a></p><p><img src="/home/ddqi/推文/687474703a2f2f692e696d6775722e636f6d2f446a7053546f6d2e706e67.png" alt="687474703a2f2f692e696d6775722e636f6d2f446a7053546f6d2e706e67"></p><p>这里只给出了作者展示的样式，可以通过自己修改样式表获得更加美观并且好用的菜单。图形部分通过 TK 或 GTK 实现。部分功能需要自己书写一定配置。</p><h2 id="kdialog-open-files"><a href="#kdialog-open-files" class="headerlink" title="kdialog open files"></a>kdialog open files</h2><p>此方法仅适用于 Linux （KDE）。</p><p>作为一名 KDE 用户，在 Linux 桌面环境上 GTK 和 QT 程序体验上的割裂极其难受，别的都可以忍，但是 GTK 反人类的会话样式不能忍。幸好有人开源了这个调用 Kdialog 打开文件的脚本，打开 MPV 以后，使用快捷键即可开启打开文件的窗口。<img src="/home/ddqi/推文/深度录屏_选择区域_20200329215427.gif" alt="深度录屏_选择区域_20200329215427"></p><h2 id="Play-with-mpv"><a href="#Play-with-mpv" class="headerlink" title="Play with mpv"></a>Play with mpv</h2><p>这是一个相当好用的浏览器插件。在看视频的时候希望不看到浏览器上花花绿绿的列表 / 广告？还是单纯的就只想在本地播放器上播放网页视频？这个插件都可以满足你。该插件需要配合一个 Python 脚本实现网页视频本地化播放，通过调用 youtube-dl 解析播放地址，实测支持大部分主流的视频网站，配合弹幕插件可以本地愉快的看番，不用“关弹幕保智商”了。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>MPV 是一个相当好玩并且强大的工具。如果你期待的是开箱即用，那么它可能确实是开箱即用（虽然看上去不好用），如果你希望的是它生来强大，那么它也确实是生来强大，丰富的自定义选项以及插件可以使得它变成任何你想要的样子。</p><p>如果你和我一样对现有的工具并不满意，又有一定的“折腾的勇气”，那为什么不试试看这个工具呢？期待你的尝试！更多的插件部分可以参阅 MPV 仓库 文档：<a href="https://github.com/mpv-player/mpv/wiki/User-Scripts" target="_blank" rel="noopener">https://github.com/mpv-player/mpv/wiki/User-Scripts</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;全文已发布至重庆大学蓝盟微信公众号往期内容内，博客上的版本待修改完善。&lt;/p&gt;
    
    </summary>
    
    
      <category term="待修改" scheme="https://blog.weearc.top/tags/%E5%BE%85%E4%BF%AE%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>一言 20200319</title>
    <link href="https://blog.weearc.top/posts/3498.html"/>
    <id>https://blog.weearc.top/posts/3498.html</id>
    <published>2020-03-18T17:32:52.000Z</published>
    <updated>2020-03-18T17:36:17.376Z</updated>
    
    <content type="html"><![CDATA[<p>人完全可以为自己的愤怒而感到庆幸，因为它维系了自己的价值观。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;人完全可以为自己的愤怒而感到庆幸，因为它维系了自己的价值观。&lt;/p&gt;

      
    
    </summary>
    
      <category term="一言" scheme="https://blog.weearc.top/categories/%E4%B8%80%E8%A8%80/"/>
    
    
      <category term="一言" scheme="https://blog.weearc.top/tags/%E4%B8%80%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>有失公允？ 红米AC2100路由器体验</title>
    <link href="https://blog.weearc.top/posts/32494.html"/>
    <id>https://blog.weearc.top/posts/32494.html</id>
    <published>2020-03-05T08:12:35.000Z</published>
    <updated>2020-03-05T09:07:02.505Z</updated>
    
    <content type="html"><![CDATA[<p>往年这个时间就已经回到学校了，今年算是个例外也正好给家里换一下老旧设备。</p><a id="more"></a><p>本着勤俭节约的美德，一个物品确实是应该用到彻底罢工才能换的。本来想着这次也如此 —— 但是架不住网络提速，原本家里的普联某超旧型号的路由器在 20m 升级到 50m 的时候就已经不能跑满带宽了，更何况是现在百兆直接升级千兆网。因此也有了一个很好的理由说服父母允许咱更换路由器。</p><p>那么问题就来了，是按照惯例再挑选一个普联的新产品？还是选水星家的 D191g ？还是买 Newifi？Newifi 在学校寝室使用后我初步得出的结果是：同时接驳多个设备后负载非常大，承载能力太低。并且一些功能鲁棒性测试无法通过。虽然可以通过刷入 Openwrt 提升素质，但是对于需要非常稳定使用的家庭使用场景还是不太适合，因此不再做考虑。至于其他产品倒也是让人纠结不知如何下手。</p><p>在纠结了好一段之后突然想起朋友说过 Redmi 新出的那个路由器风评也相当不错，既然普联水星没法考虑，那就都不考虑吧，遂在看了一些测评后决定购买 <strong>Redmi AC2100</strong> 。</p><h3 id="开箱"><a href="#开箱" class="headerlink" title="开箱"></a>开箱</h3><p>疫情期间小米之家发货速度一般，顺丰也因为管制绕了本省一大圈才送进来。<img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142359.jpg" alt="外包装"></p><p>外包装倒是相当突出产品本体，内层使用纸模</p><p><img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142546.jpg" alt="内层"></p><p>产品本体为白色，使用了磨砂材质的塑料，气孔较多可能需要做防灰处理。另外看了一下天线等地方，包括充电器本体都出现了水口未处理干净或者飞边，考虑到同价位的水星做工都没出现这种问题还是要批评下。<img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142801.jpg" alt="分模线">（看到了吗…天线下部的那个分模线……）作为胶佬得时刻提醒自己这个是摆在那放着的不是模型……</p><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>连接相比之前了解到的倒是简单了很多，不需要先用电脑来初始化。只要路由器上电，连接到网络以后就算通过手机也能轻松的进行设置。另外初始化时提供了包括中继的设置，这点好评。</p><h3 id="测速"><a href="#测速" class="headerlink" title="测速"></a>测速</h3><p>相比 speedtest 这种枯燥无味的测试，我觉得找一些相对极限的场景进行测试更有代表性，比如找一个穿墙次数相当多的地方下载文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ddqi &gt; ~ &gt; aria2c -x 16 http://mirrors.cqu.edu.cn/UbuntuKylin_release/ubuntukylin-19.10-enhanced-amd64.iso</span><br><span class="line">03/05 16:43:55 [NOTICE] Downloading 1 item(s)</span><br><span class="line"> *** Download Progress Summary as of Thu Mar  5 16:44:55 2020 ***                                                                     </span><br><span class="line">===================================================================</span><br><span class="line">[<span class="comment">#a89ecf 441MiB/2.5GiB(17%) CN:5 DL:7.0MiB ETA:5m3s]</span></span><br><span class="line">FILE: /home/ddqi/ubuntukylin-19.10-enhanced-amd64.iso</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>2.4 GHz 下穿墙效果一般都比 5GHz 要好上不少，但是在用网小高峰时候还隔着墙进行测试都能有这种成绩还是能说明一些问题的，至少从结果上讲这款路由器一般家用场景应该是完全应付得了，甚至可以说绰绰有余。（不要小看老旧小区所谓的“全楼共享带宽”带来的网络问题啊喂！）</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>既然本着家用场景，那就不需要再做其他专业性质的测试。目前使用情况来看完全是物有所值，是一款具有性价比的产品。至于是不是“有失公允”还有待测试，但是至少从风评上看确实是相比小米旧款路由器的评价好了不少，小米路由器团队做出的努力也确实让人看到了。卢十瓦吹得再神，这也是一款面向实用场景的产品，是一款有诚意的产品。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;往年这个时间就已经回到学校了，今年算是个例外也正好给家里换一下老旧设备。&lt;/p&gt;
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="路由器" scheme="https://blog.weearc.top/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
      <category term="Redmi" scheme="https://blog.weearc.top/tags/Redmi/"/>
    
      <category term="小米" scheme="https://blog.weearc.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
  </entry>
  
  <entry>
    <title>ArchLinux + Windows10 双系统固态硬盘迁移</title>
    <link href="https://blog.weearc.top/posts/25676.html"/>
    <id>https://blog.weearc.top/posts/25676.html</id>
    <published>2019-11-26T12:22:54.000Z</published>
    <updated>2019-11-26T12:49:06.620Z</updated>
    
    <content type="html"><![CDATA[<p>盼星星盼月亮终于拿到了心心念念的固态硬盘，终于能够有畅快淋漓的体验了。</p><a id="more"></a><p>既然固态硬盘体验这么好，那为啥以前非要买那么写机械？因为我是仓鼠症患者，买的硬盘全部拿去存电影了…….</p><p>那到固态以后其实就没什么好说的，之前光驱位以及主硬盘位都有机械硬盘，光驱位上的盘作为纯粹的数据盘挂载在 Arch 下面。所以就算单独拿下来去给 NAS 挂着也没什么大问题。那么最终就还是主硬盘位的机械硬盘去了光驱位，新买的固态上了主硬盘位。</p><p>其实在迁移前我很纠结要不要重装windows，本意上是不想重新安装的，一大堆专业软件和自己配置的环境重新弄起来费时费力而且真的要命。那么就还是决定使用软件做系统迁移。先把最麻烦的windows的部分解决。Linux 反而是一向最容易迁移的了。</p><h2 id="迁移windows10"><a href="#迁移windows10" class="headerlink" title="迁移windows10"></a>迁移windows10</h2><p>下载 aomei 无损分区助手PE版本，配合wepe做好系统迁移，这个时候会一并把esp分区迁移过来，所以 linux 下就不需要重建了。有的电脑可能会遇到说是内存不足，那就老老实实重装吧。</p><h2 id="迁移ArchLinux"><a href="#迁移ArchLinux" class="headerlink" title="迁移ArchLinux"></a>迁移ArchLinux</h2><p>在windows下面如果没有了 Aomei这样的工具，那么迁移起来说实在说的是极其痛苦的，尤其现在ghost还不能用。Arch就要轻松很多。只需要用到 <code>rsync</code> 即可。</p><p>在旧的Arch下面给新硬盘剩余空间分好区，然后直接把新的根分区挂载在 <code>/mnt</code> 其余比如 <code>/home</code> <code>/boo/efi</code> 也依次挂载好。终端中执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -aAXv /* /mnt/. --exclude=&#123;/dev/*,/proc/*,/sys/*,/tmp/*,/var/tmp/*,/run/*,/mnt/*,/home/*,/media/*,/lost+found,/boot/*&#125;</span><br></pre></td></tr></table></figure><p>命令参数详情请参阅 <code>rsync</code> 的手册部分。然后排除掉 “运行态”的部分，对所有目录进行重建，文件按照归档进行迁移。执行以后大功告成一半。</p><p>由于我需要将原来的根分区删掉分给 home , 因此进入 Livecd 对旧分区进行删除操作，然后将分区移动到空间头部。完成后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure><p>参照当初安装 Arch 的步骤进行，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi/ --recheck</span><br></pre></td></tr></table></figure><p>重新安装grub。并配置grub：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure><p>在此之前记得删除掉旧的esp分区。至此基本大功告成。最后记得检查一下 <code>/etc/fstab</code> 以免启动时出现问题。</p><p>耗时4个小时两个系统迁移完毕，windows用了三个多小时，Arch用了40分钟不到。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;盼星星盼月亮终于拿到了心心念念的固态硬盘，终于能够有畅快淋漓的体验了。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="系统迁移" scheme="https://blog.weearc.top/tags/%E7%B3%BB%E7%BB%9F%E8%BF%81%E7%A7%BB/"/>
    
  </entry>
  
  <entry>
    <title>fcitx5尝鲜(另付fcitx5输入法皮肤摸索)</title>
    <link href="https://blog.weearc.top/posts/14466.html"/>
    <id>https://blog.weearc.top/posts/14466.html</id>
    <published>2019-10-25T13:19:33.000Z</published>
    <updated>2019-11-26T12:21:43.685Z</updated>
    
    <content type="html"><![CDATA[<p>原本搜狗输入法确实是真香的，但是架不住它总不更新问题一大堆。</p><a id="more"></a><p>作为非英语作为母语的计算机使用者，尤其是 GNU/Linux 用户，输入法确实是非常大的一个硬伤。如果说 QQ 微信 网易云 还可以勉强要么通过 wine 的方式要么通过虚拟机 就多多少少都还能解决，输入法如果没有原生可用的那就非常痛苦了。因此国内最厉害的中文输入法 搜狗输入法 在推出 Linux 版本的时候为什么那么多人感到异常兴奋也就多多少少能够理解。你用或者不用，都无法否认搜狗在输入法上做的贡献之大。</p><p>但是距离上一次更新也过去许久，依旧构建于 QT4 的搜狗拼音已经渐渐暴露出很多问题，并且看来短时间内没法迁移到 QT5。并且搜狗造的轮子 <code>sogou-qimpanel</code> 还会和 fcitx 的 <code>kimpanel</code> 产生冲突。但是说实在的如果不是搜狗的词库异常强大咱也就不会就算一直被恶心也要坚持使用下去了。</p><p>不过，其实很早我们可能就有了另外一个非常棒的选择，也就是 fcitx5 。</p><p>有关 fcitx5 的详细配置过程可以参考 Arch Linux Wiki ， 网上也有诸多 Archer 来写，就不加赘述。也可以参考<a href="https://github.com/weearc/fcitx5-skin-simple-blue" target="_blank" rel="noopener">我的这个仓库</a>之中的 readme 。</p><p>今天主要是讲讲看、研究一下 fcitx 的皮肤绘制。</p><p>fcitx5 的皮肤最基础的部分由以下几个文件构成：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--- panel.png</span></span><br><span class="line">  |- hightlight.png</span><br><span class="line">  <span class="comment">-- theme.conf</span></span><br></pre></td></tr></table></figure><p>正如文件命名，panel 指输入法候选词位置的样式， highlight 为候选词高亮背景。简单的说如果我们拿到一个皮肤的样版，对面板和高亮进行更改的话就能够调整输入法皮肤样式。</p><p>（剩下的内容有时间再详细查查相关内容补全）</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;原本搜狗输入法确实是真香的，但是架不住它总不更新问题一大堆。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
      <category term="输入法" scheme="https://blog.weearc.top/categories/archlinux/%E8%BE%93%E5%85%A5%E6%B3%95/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="fcitx" scheme="https://blog.weearc.top/tags/fcitx/"/>
    
      <category term="fcitx5" scheme="https://blog.weearc.top/tags/fcitx5/"/>
    
  </entry>
  
  <entry>
    <title>杂谈</title>
    <link href="https://blog.weearc.top/posts/12326.html"/>
    <id>https://blog.weearc.top/posts/12326.html</id>
    <published>2019-08-27T13:20:57.000Z</published>
    <updated>2019-08-27T21:44:42.453Z</updated>
    
    <content type="html"><![CDATA[<p>人大多数时候选择去做一件事，也许并不是为了获得什么，而是单纯的害怕空虚。</p><a id="more"></a><p>近两年的个人状态可以说是非常奇怪了。总结下来也无非是开头那句话。正因为害怕空虚所以去做各种事情，将自己的时间填满。不过，就算空着的时间都填满了，难道就会感到满足了吗？我不以为意。反而感觉更加的空虚。说白了，这种因为空虚所以选择让自己看起来很忙的行为无异于饮鸩止渴，逞一时之快后患无穷。究其原因还是因为少了方向感。</p><p>高考前之所以能稳住拼尽全力，也无非是因为只需要考虑怎么答题就对了，脑子里什么都不需要想。拼命学了三年需要有一个突破口，一个来发泄的点。然后进入了大学，不再如同高中，可以考虑可以尝试的东西极大丰富，本来就患有选择困难的我人生第一次感到如此迷茫。专业不是我喜欢的、但是成绩又不是最好的、喜欢的东西在侵占我的时间、但是不喜欢的东西却本需要大把时间。越是想逃离就越是逃不掉，最后深陷其中。坦然接受现状虽然是最佳选择，不过，我又浪费掉了一年。确实可以有很多，但是似乎在前途面前都是苍白无力。每次回家看到父母日渐衰老，家事变化也不由得暗自落泪。</p><p>家人倒也不像是其他人说的那样对我寄予厚望，到时自己越是给说一般般平平常常就可以越是感到压力倍增。正因为看到了家人的辛苦之处，才想变得更强将来可以保护家人；越是想变得更强越是对现状不满，对自己不满；越是对自己不满就越是急切的想找到目标。然而我没有目标。因此愈发感到无比空虚。因此就尝试做很多事情，又因为本身学习能力并不差所以就学会很多事情，以此可以更好地消磨时间。</p><p>我急切的需要摆脱这种现状，那么最好的办法我希望不再是定下长远的目标，而是短时间内先从眼前的事情做好。以前到时很瞧不起做计划之类的，总觉得“到时候总会有办法”，不过现在看前人的经验真的是正确无比，所谓摸着石头过河也是需要摸到下一个石头的位置，更长远的目标就是“对岸”。重新来过的这一年，我仍不希望自己空虚，那么就尝试换成另外一种方法填满自己算了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;人大多数时候选择去做一件事，也许并不是为了获得什么，而是单纯的害怕空虚。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="https://blog.weearc.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="杂记" scheme="https://blog.weearc.top/categories/%E9%9A%8F%E7%AC%94/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="杂记" scheme="https://blog.weearc.top/tags/%E6%9D%82%E8%AE%B0/"/>
    
      <category term="随笔" scheme="https://blog.weearc.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>hexo主题模版改造记录</title>
    <link href="https://blog.weearc.top/posts/31380.html"/>
    <id>https://blog.weearc.top/posts/31380.html</id>
    <published>2019-08-05T15:37:27.000Z</published>
    <updated>2019-08-06T23:48:13.973Z</updated>
    
    <content type="html"><![CDATA[<p>有时候就是心血来潮才想搞一些好玩的，假期一旦懒下来人就待完了。</p><a id="more"></a><p>上一篇: <a href="https://blog.weearc.top/posts/6009.html">hexo主题迁移and折腾记</a></p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>之前一直是抱着小小改造一下将就用就行了的心态来改造博客主题，直到又一个朋友也开始建立博客。于是一直懒着不愿意写的友链以及关于的独立页面也不得不提上日程，就连之前想加入的 clipboard.js 这次也想一股气做好。说起来容易，实际开始读 layout 部分代码才发现自己并不是很懂整个 pug 模版的渲染流程以及构架。整个博文是对于改造过程的记录，如果嫌烦可以跳过我思考的那一部分。</p><h1 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h1><p>最初搜索一番，仍然发现大多数就是简单的建立一个友链的 page 然后直接 md 堆上去就完事了。当然我之前也这么做过。但是实际效果并不尽如人意。于是不得不进行主题拆解。</p><p>然后花费了相当长一段时间发现并没有搞懂主题的布局…Orz。这就产生了一个问题，在寻找了非常多 HEXO 主题开发相关的博文时候，发现不管是用脚手架来搭建还是怎样，一个主题一定是先有布局再往里面填肉，虽然日常自己写点东西是这个思想却没想到用这个思想来解构，有点呆。</p><h1 id="解构主题"><a href="#解构主题" class="headerlink" title="解构主题"></a>解构主题</h1><p>所以，整体布局确实如下图，从代码中也多少能看出点倪端：</p><p><img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2019.08.06/base.png" alt></p><p>那么看下整体文件的解构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">themes/maupassant/layout/</span><br><span class="line">----------------------------------</span><br><span class="line">├── archive.pug</span><br><span class="line">├── base.pug</span><br><span class="line">├── index.pug</span><br><span class="line">├── page.pug</span><br><span class="line">├── post.pug</span><br><span class="line">├── single-column.pug</span><br><span class="line">├── timeline.pug</span><br><span class="line">├── _partial</span><br><span class="line">     ├── after_footer.pug</span><br><span class="line">     ├── comments.pug</span><br><span class="line">     ├── footer.pug</span><br><span class="line">     ├── head.pug</span><br><span class="line">     ├── helpers.pug</span><br><span class="line">     ├── mathjax2.pug</span><br><span class="line">     ├── mathjax.pug</span><br><span class="line">     ├── paginator.pug</span><br><span class="line">     ├── post_nav.pug</span><br><span class="line">     ├── tag.pug</span><br><span class="line">     ├── totop.pug</span><br><span class="line">     └── wordcount.pug</span><br><span class="line">|── _widget</span><br><span class="line">    ├── category.pug</span><br><span class="line">    ├── links.pug</span><br><span class="line">    ├── recent_comments.pug</span><br><span class="line">    ├── recent_posts.pug</span><br><span class="line">    ├── search.pug</span><br><span class="line">    ├── tag.pug</span><br><span class="line">    └── toc.pug</span><br></pre></td></tr></table></figure><p>如果是仔细阅读过主题配置文件，就会发现其中下面列出的这一部分就属于我们说的“单独的页面”：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── index.pug</span><br><span class="line">├── timeline.pug</span><br><span class="line">├── post.pug</span><br><span class="line">├── archive.pug</span><br></pre></td></tr></table></figure><p>这些是主题中最最基础的几个独立页面：文章、时间线、主页、文章归档。</p><p>其中都会有那么句：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">extends base</span><br><span class="line">...</span><br><span class="line">include _partial/BALABALA.pug</span><br></pre></td></tr></table></figure><p>如果是对编程相对熟悉的同学可能一下子就发现了这不是典型的引入么，前面是以 <code>base.pug</code> 作为“母版”，后面在上面加东西。前面尝试着 copy 过别人的代码尝试添加一个侧边栏的 TOC（以失败告终），但是并没有好好阅读代码，所以这次吃了大苦头。所以，就连其他全部页面都是在 base 基础上扩展来的，因此提供了一个思路：要想添加自己的独立页面，就需要仿照其他的从 base 为基础进行扩展。</p><p>那么我们来看一下，比如这个 archive:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">archive.pug</span><br><span class="line">-------------------</span><br><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">  if page.category</span><br><span class="line">     title= page.category + ' | ' + config.title</span><br><span class="line">  if page.tag</span><br><span class="line">     title= page.tag + ' | ' + config.title</span><br><span class="line">  if page.archive</span><br><span class="line">     title= __('archive') + ' | ' + config.title</span><br><span class="line">block content</span><br><span class="line">  if page.category || page.tag</span><br><span class="line">      h1.label-title=  __('reading_label', page.category || page.tag)</span><br><span class="line">  .post</span><br><span class="line">    .post-archive</span><br><span class="line">        //Use lodash to classify posts. See https://lodash.com/docs#groupBy</span><br><span class="line">        each posts, year in _.groupBy(page.posts.toArray(), function(p)&#123;return -p.date.format('YYYY')&#125;)</span><br><span class="line">          h2= -year</span><br><span class="line">          ul.listing</span><br><span class="line">            for post in posts</span><br><span class="line">              li</span><br><span class="line">                span.date= post.date.format(config.date_format)</span><br><span class="line">                a(href=url_for(post.path), title=post.title)</span><br><span class="line">                  +title(post)</span><br><span class="line">  include _partial/paginator.pug</span><br></pre></td></tr></table></figure><p>可以发现整个结构如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">..........</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">........</span><br></pre></td></tr></table></figure><p>正好也符合整个页面的布局。那么，友链那么多条是不是要自己一条条加上去呢？傻子才全手写。</p><p><code>_widget/links.pug</code> 中就很好的提到了一个思路，当然也非常常用：用 for 循环</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- for (var i in theme.links)</span><br><span class="line">    ul</span><br><span class="line">    a(href=theme.links[i].url title=theme.links[i].title target='_blank') #&#123;theme.links[i].title&#125;</span><br></pre></td></tr></table></figure><p>不过可以发现少了一些东西，头像呢？描述呢？其实这些东西自己加上就好，这里不赘述 YAML 的语法，整个过程相当是从<code>themes/_config.yml</code> 中取出 <code>links</code>部分的值，然后找寻每个 links 部分的的子项，这是个很好的思路。</p><h1 id="动工"><a href="#动工" class="headerlink" title="动工"></a>动工</h1><p>首先现在<code>themes/_config.yml</code>填入所需值，然后编写独立页面：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">layout/single-link-page.pug</span><br><span class="line">-------------------------------------</span><br><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">    title= page.title + ' | ' + config.title</span><br><span class="line"></span><br><span class="line">block  content</span><br><span class="line">    - for (var i in theme.links)</span><br><span class="line">        p</span><br><span class="line">            a.friendurl(target='_blank', href=theme.links[i].url, title=theme.links[i].title)</span><br><span class="line">        a.friendurl(target='_blank', href=theme.links[i].url, title=theme.links[i].title)</span><br><span class="line">            .frienddiv</span><br><span class="line">                a.frienddivleft(target='_blank', href=theme.links[i].url)</span><br><span class="line">                    img.myfriend(src=theme.links[i].src)  // 头像部分</span><br><span class="line">                .frienddivright</span><br><span class="line">                    |  #&#123;theme.links[i].title&#125;</span><br><span class="line">                    br</span><br><span class="line">                    br</span><br><span class="line">                    |  #&#123;theme.links[i].dec&#125;  // 描述</span><br></pre></td></tr></table></figure><p>样式网上有非常多，不愿意写可以找一找抄一抄（虽然有无脑抄完回来给我留言说编译失败的….）。有点前端基础自己写就好，这种东西不怎么依赖定位倒也是好写。</p><p>然后出现一个问题：侧边栏影响美观程度。解决方法是仿照 base 写一个无侧边栏的即可（其实就是把 sidebar 对应部分注释掉），相对的，开头 extends 的部分也要进行修改。</p><p>（未完待续）</p><p><a href="http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-2-Other-Pages/" target="_blank" rel="noopener">http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-2-Other-Pages/</a></p><p><a href="https://hqcfly.github.io/2016/06/19/hexo-theme-guide/" target="_blank" rel="noopener">https://hqcfly.github.io/2016/06/19/hexo-theme-guide/</a></p><p><a href="https://molunerfinn.com/make-a-hexo-theme/" target="_blank" rel="noopener">https://molunerfinn.com/make-a-hexo-theme/</a></p><p><a href="http://huanyouchen.github.io/2019/03/22/add-tags-pages-to-hexo-maupassant-theme/" target="_blank" rel="noopener">http://huanyouchen.github.io/2019/03/22/add-tags-pages-to-hexo-maupassant-theme/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有时候就是心血来潮才想搞一些好玩的，假期一旦懒下来人就待完了。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://blog.weearc.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="hexo" scheme="https://blog.weearc.top/tags/hexo/"/>
    
      <category term="模版" scheme="https://blog.weearc.top/tags/%E6%A8%A1%E7%89%88/"/>
    
      <category term="响应式" scheme="https://blog.weearc.top/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>使用zenity+xclip实现文字复制粘贴</title>
    <link href="https://blog.weearc.top/posts/5960.html"/>
    <id>https://blog.weearc.top/posts/5960.html</id>
    <published>2019-07-21T11:27:40.000Z</published>
    <updated>2019-08-05T23:37:57.103Z</updated>
    
    <content type="html"><![CDATA[<p>都多久了我也不太记得，网易云下竟然由于qt的某个问题不能使用fcitx输入中文了！WTF！不过我们可以曲线救国。</p><a id="more"></a><p>就算直接不能输入中文我们也有办法暂时解决这个问题。那就是使用zenity+xclip制作一个可输入中文的带有 <strong>GUI</strong> 的一个脚本。</p><blockquote><p>xclip是Unix以及类Unix系统下非常强大的剪贴板交互程序</p></blockquote><p>我们可以简单看一下xclip的help输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Usage: xclip [OPTION] [FILE]...</span><br><span class="line">Access an X server selection <span class="keyword">for</span> reading or writing.</span><br><span class="line"></span><br><span class="line">  -i, -<span class="keyword">in</span>          <span class="built_in">read</span> text into X selection from standard input or files</span><br><span class="line">                   (default)</span><br><span class="line">  -o, -out         prints the selection to standard out (generally <span class="keyword">for</span></span><br><span class="line">                   piping to a file or program)</span><br><span class="line">  -l, -loops       number of selection requests to <span class="built_in">wait</span> <span class="keyword">for</span> before exiting</span><br><span class="line">  -d, -display     X display to connect to (eg localhost:0<span class="string">")</span></span><br><span class="line"><span class="string">  -h, -help        usage information</span></span><br><span class="line"><span class="string">      -selection   selection to access ("</span>primary<span class="string">", "</span>secondary<span class="string">", "</span>clipboard<span class="string">" or "</span>buffer-cut<span class="string">")</span></span><br><span class="line"><span class="string">      -noutf8      don't treat text as utf-8, use old unicode</span></span><br><span class="line"><span class="string">      -target      use the given target atom</span></span><br><span class="line"><span class="string">      -rmlastnl    remove the last newline charater if present</span></span><br><span class="line"><span class="string">      -version     version information</span></span><br><span class="line"><span class="string">      -silent      errors only, run in background (default)</span></span><br><span class="line"><span class="string">      -quiet       run in foreground, show what's happening</span></span><br><span class="line"><span class="string">      -verbose     running commentary</span></span><br></pre></td></tr></table></figure><p>按照功能，我们需要：</p><ol><li>输入文字</li><li>将文字输入到剪贴板</li><li>将文字传给clipboard程序</li></ol><p>非常简单的三个部分。输入文字部分由zenity负责，同时将输入的文字存入变量中，之后用管道传给xclip程序。</p><p>那么需要用到的xclip选项应该就很容易选择了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xclip option</span></span><br><span class="line">xclip -i  <span class="comment"># read text into X selection from standard input or files</span></span><br><span class="line">xclip --selectron clipboard <span class="comment"># copy input to clipboard for output</span></span><br></pre></td></tr></table></figure><p>思路明确了以后就非常容易办了，我们再看一下zenity <code>entry</code>部分的帮助说明：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">用法：</span><br><span class="line">  zenity [OPTION…]</span><br><span class="line"></span><br><span class="line">文字输入选项</span><br><span class="line">  --entry                                显示文本输入对话框</span><br><span class="line">  --text=文字                            设置对话框文字</span><br><span class="line">  --entry-text=文字                      设置输入文字</span><br><span class="line">  --hide-text                            隐藏输入文字</span><br></pre></td></tr></table></figure><p>也就是说我们只需要使用 <code>--entry</code> 选项显示输入框即可，在尝试中发现，bash下执行zenity –entry后会将输入打印到终端，也就是说我们需要将其存为变量才可以使用。因此完整代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">words_to_copy=$(zenity --entry)</span><br><span class="line"><span class="comment"># Use zenity to display a GUI information message.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$words_to_copy</span> | xclip -i </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$words_to_copy</span> | xclip -sel c</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;都多久了我也不太记得，网易云下竟然由于qt的某个问题不能使用fcitx输入中文了！WTF！不过我们可以曲线救国。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="zenity" scheme="https://blog.weearc.top/tags/zenity/"/>
    
      <category term="xclip" scheme="https://blog.weearc.top/tags/xclip/"/>
    
      <category term="去他妈的网易云" scheme="https://blog.weearc.top/tags/%E5%8E%BB%E4%BB%96%E5%A6%88%E7%9A%84%E7%BD%91%E6%98%93%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>使用nodejs+shellscript实现github-webhook</title>
    <link href="https://blog.weearc.top/posts/41471.html"/>
    <id>https://blog.weearc.top/posts/41471.html</id>
    <published>2019-07-10T11:27:40.000Z</published>
    <updated>2019-07-10T19:33:29.313Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="webhook" scheme="https://blog.weearc.top/tags/webhook/"/>
    
      <category term="nodejs" scheme="https://blog.weearc.top/tags/nodejs/"/>
    
      <category term="自动化流程" scheme="https://blog.weearc.top/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%81%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>archlinux安装配置(3)</title>
    <link href="https://blog.weearc.top/posts/12422.html"/>
    <id>https://blog.weearc.top/posts/12422.html</id>
    <published>2019-07-08T15:22:05.000Z</published>
    <updated>2019-07-18T21:27:03.146Z</updated>
    
    <content type="html"><![CDATA[<p>距离第一篇博文时隔快两年的更新。由于本次配置文件有问题，KDE直接罢工。修补无果于是决定重装。</p><a id="more"></a><p>前文：</p><ul><li><a href="https://blog.weearc.top/posts/7521.html">基础系统安装</a></li><li><a href="https://blog.weearc.top/posts/60769.html">基础系统配置</a></li></ul><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文将会涉及到的内容：</p><ul><li>相当个人级别的系统配置</li><li>可能非常不符合常理的做法</li><li>可能涉及到的错误</li></ul><p>如果是第一次或者还没安装的话可以先按照正经的步骤进行安装以避免误导。</p><h1 id="chroot下的变更"><a href="#chroot下的变更" class="headerlink" title="chroot下的变更"></a>chroot下的变更</h1><p>在正常的安装流程下，我增加安装了几个包：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fish iw <span class="keyword">dialog </span>dhcp wpa_supplicant vim sudo <span class="keyword">screenfetch </span>htop</span><br></pre></td></tr></table></figure><p>将其分为几类：</p><ul><li>shell: fish(开箱即用的强大shell)</li><li>network: iw dialog wpa_supplicant dhcp(保证进入新系统有网)</li><li>editor: vim(个人非常喜欢的编辑器，更改sudoer会强制使用)</li><li>tools: htop sudo screenfetch(强大的进程管理器、提权工具、基础信息查看)</li></ul><p>这样的话进入新系统会节省一部分时间。</p><h1 id="新系统下的更改"><a href="#新系统下的更改" class="headerlink" title="新系统下的更改"></a>新系统下的更改</h1><h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><p>由于我是重新安装系统，因此<code>/home</code>还在，因此没必要按照常规的在新建用户时候添加<code>-m</code>选项：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">useradd username</span></span><br></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">passwd username</span></span><br></pre></td></tr></table></figure><p>这样的话就完成了用户建立（并且使用旧的<code>/home</code>）。</p><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>因为之前配置完了大部分的内容，因此进入系统的第二件事是先联网。这里使用的是<code>netctl</code>,稍后再更换为<code>NetworkManager</code>。</p><p>因为是wifi链接，所以执行：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">wifi-menu</span></span><br></pre></td></tr></table></figure><p>然后连接到自己需要的网络。由于个人的路由器是限制设备ip的，因此需要在设备上填入固定IP才能正常联网。虽然上一步执行后失败，但是此时<code>netctl</code>已经有了需要的配置文件。形如：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/netctl/wlp2s0-wifi</span></span><br><span class="line">------------------------------------------------------------------------------------------------</span><br><span class="line">Description='Automatically generated profile by wifi-menu'</span><br><span class="line">Interface=wlp2s0</span><br><span class="line">Connection=wireless</span><br><span class="line">Security=wpa</span><br><span class="line">ESSID= <span class="comment">#WiFi名称</span></span><br><span class="line">IP=static</span><br><span class="line">Address=() <span class="comment">#指定的IP</span></span><br><span class="line">Gateway= <span class="comment">#网关，不知道怎么确定的就填写192.168.1.0一般没问题</span></span><br><span class="line">Key= <span class="comment">#密码</span></span><br></pre></td></tr></table></figure><p>当然这个是修改过的，然后执行：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netctl <span class="literal">start</span> wlp2s0-wifi</span><br></pre></td></tr></table></figure><p>来连接到这个Wifi，并使用：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netctl <span class="keyword">status</span> wlp2s0-wifi</span><br></pre></td></tr></table></figure><p>查看连接状况。</p><p>这样的话应该是有网络了。</p><h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><p>按照个人喜好，我比较习惯把包管理的颜色打开，便于区分包。</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># /etc/pacman.conf</span></span><br><span class="line">-----------------------------------------------------------------------------------</span><br><span class="line"><span class="meta"># Misc options部分</span></span><br><span class="line"><span class="meta">#UseSyslog</span></span><br><span class="line">Color #取消注释</span><br><span class="line"><span class="meta">#TotalDownload</span></span><br><span class="line">CheckSpace</span><br><span class="line">VerbosePkgLists #取消注释，更新时可看到变动信息</span><br><span class="line"></span><br><span class="line"><span class="meta"># 32位的东西有时候不可避免，为了不必要的麻烦需要打开</span></span><br><span class="line">[multilib]</span><br><span class="line">Include = /etc/pacman.d/mirrorlist</span><br><span class="line"></span><br><span class="line"><span class="meta"># 添加ArchlinuxCN仓库</span></span><br><span class="line">[archlinuxcn]</span><br><span class="line">SigLevel = TrustedOnly</span><br><span class="line">Server = http:<span class="comment">//mirrors.cqu.edu.cn/archlinuxcn/$arch</span></span><br></pre></td></tr></table></figure><p>之后需要执行：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman</span> -Syy  <span class="comment">#更新本地包管理的数据库</span></span><br><span class="line">pacman -S archlinuxcn-keyring <span class="comment">#添加archlinuxCN的签名，主要是为了安全，大概</span></span><br></pre></td></tr></table></figure><h2 id="桌面环境安装"><a href="#桌面环境安装" class="headerlink" title="桌面环境安装"></a>桌面环境安装</h2><p>一般来讲选KDE还是选gnome这个确实看眼缘。由于gnome上个版本的内存泄露太邪门了，虽然目前已经修好但是我还是用KDE吧。</p><p>安装KDE的话一般可能会推荐安装整个Plasma套件，但是好多东西其实用不到，因此也没必要装。我还是决定从最基础的plasma desktop 开始像搭积木一样配置好。</p><p>先安装最基础的桌面环境：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -S plasma-desktop</span></span><br></pre></td></tr></table></figure><p>然后我们装一下驱动，我是intel核显加上A卡独显，不怎么麻烦，并且A卡先不打算用，入门级性能弱的要死也没办法用：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman</span> -S xf86-video-intel</span><br></pre></td></tr></table></figure><p>一般这样的话 I 卡就可以正常工作了。然后安装桌面管理器<code>SDDM</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S sddm</span><br><span class="line">systemctl <span class="built_in">enable</span> sddm <span class="comment">#添加sddm开机启动</span></span><br></pre></td></tr></table></figure><p>因为我们进入桌面环境以后还需要进行配置，因此终端以及文件管理器是必须的：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -S konsole dolphin</span></span><br></pre></td></tr></table></figure><p>然后重启进入KDE。</p><h2 id="剩余桌面环境配置"><a href="#剩余桌面环境配置" class="headerlink" title="剩余桌面环境配置"></a>剩余桌面环境配置</h2><p>进入桌面环境以后就都属于比较常规的配置了，依照个人喜好进行配置就好。</p><h3 id="仍然是系统组件部分"><a href="#仍然是系统组件部分" class="headerlink" title="仍然是系统组件部分"></a>仍然是系统组件部分</h3><p>一般来讲的话我们的桌面目前已经可以使用了，但是为了一些更加方便的调整我们需要安装一些KDE设置中心的插件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Ss kcm</span><br></pre></td></tr></table></figure><p>不出意外的话应该得到如下结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">extra/kcmutils 5.60.0-1 (kf5) </span><br><span class="line">    Utilities <span class="keyword">for</span> interacting with KCModules</span><br><span class="line">extra/sddm-kcm 5.16.3-1 (plasma) </span><br><span class="line">    KDE Config Module <span class="keyword">for</span> SDDM</span><br><span class="line">extra/telepathy-kde-accounts-kcm 19.04.3-1 (kde-applications kdenetwork telepathy-kde)</span><br><span class="line">    KCM Module <span class="keyword">for</span> configuring Telepathy Instant Messaging Accounts</span><br><span class="line">community/kcm-fcitx 0.5.5-2 </span><br><span class="line">    KDE Config Module <span class="keyword">for</span> Fcitx</span><br><span class="line">community/kcm-wacomtablet 1:3.1.1-1</span><br><span class="line">    KDE GUI <span class="keyword">for</span> the Wacom Linux Drivers</span><br><span class="line">archlinuxcn/kcm-colorful-git 1.0.1.r0.g2cb0524-1 </span><br><span class="line">    Make your KDE plasma colorful</span><br><span class="line">archlinuxcn/kcm-fcitx5-git r240.62e087f-2</span><br><span class="line">    KDE Config Module <span class="keyword">for</span> Fcitx5</span><br><span class="line">archlinuxcn/nx-firewall-git 0.1.r70.gdf134bd-1 </span><br><span class="line">    Firewall KCM: Plasma 5 Firewall KCM.</span><br><span class="line">archlinuxcn/systemd-kcm 1.2.1-4 </span><br><span class="line">    Systemd control module <span class="keyword">for</span> KDE</span><br></pre></td></tr></table></figure><p>挑选我们喜欢的组件安装即可。</p><p>另外，由于对于显示部分以及触控板都有额外组件可以用，参照ArchLinux的wiki来一个个安装就可以了，比如相当常用的两个：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kscreen   libinput</span><br></pre></td></tr></table></figure><p>这部分完全是各取所需，另外比如<code>axel</code>等命令行工具也是可以根据需求安装的。</p><h3 id="美化部分"><a href="#美化部分" class="headerlink" title="美化部分"></a>美化部分</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;距离第一篇博文时隔快两年的更新。由于本次配置文件有问题，KDE直接罢工。修补无果于是决定重装。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="linux" scheme="https://blog.weearc.top/tags/linux/"/>
    
      <category term="完全配置" scheme="https://blog.weearc.top/tags/%E5%AE%8C%E5%85%A8%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>使用pandoc撰写论文</title>
    <link href="https://blog.weearc.top/posts/1448.html"/>
    <id>https://blog.weearc.top/posts/1448.html</id>
    <published>2019-05-02T12:45:10.000Z</published>
    <updated>2019-08-05T23:39:23.436Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>谁又说不可以呢？</p><a id="more"></a><h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>一般论文写作等会有如下痛点，包含：</p><ul><li>数学公式</li><li>图片处理</li><li>交叉引用、脚注、尾注</li><li>参考文献的文献库处理</li></ul><p>当然大名鼎鼎的Microsoft Office当然能处理这些问题，但是与其说是能处理，不如说是处理的不当就会变得麻烦起来。在这些方面处理的最好的应该是LaTeX，但是由于其语法学习曲线非常陡峭，那么支持部分LaTeX特性的Markdown将是比较好的选择，处理得当时将包含如下特性：</p><ul><li>基于自然语言的数学公式处理</li><li>HTML支持，意味着markdown的写作可以很灵活多变</li><li>插件扩展的的流程图、甘特图、美人鱼图支持</li><li>交叉引用、脚注、尾注、文献自动插入</li><li>目录自动生成</li></ul><p>那么本文将简要的介绍下如何使用markdown来进行基本的写作。</p><p>注：本文内容相对较多，但是请相信看完之后收获会是巨大的。</p><h1 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h1><h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><blockquote><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。<br>Markdown具有一系列衍生版本，用于扩展Markdown的功能（如表格、脚注、内嵌HTML等等），这些功能原初的Markdown尚不具备，它们能让Markdown转换成更多的格式，例如LaTeX，Docbook。Markdown增强版中比较有名的有Markdown Extra、MultiMarkdown、 Maruku等。这些衍生版本要么基于工具，如Pandoc；要么基于网站，如GitHub和Wikipedia，在语法上基本兼容，但在一些语法和渲染效果上有改动。[^2][@noauthor_markdown__nodate]</p></blockquote><p>看到这里很懵是不是？但是如果换种说法：DOC格式和markdown本是同根生，是不是就容易多了？DOC所有关键信息等均使用XML格式，而这个格式和markdown其实本质类似。区别是：</p><p>（图片）</p><p>哪个易读性更好一看便知。用markdown你能做什么？</p><ul><li>记笔记</li><li>写网页</li><li>其他</li></ul><h3 id="markdown编辑器推荐"><a href="#markdown编辑器推荐" class="headerlink" title="markdown编辑器推荐"></a>markdown编辑器推荐</h3><h4 id="Typora（全平台）"><a href="#Typora（全平台）" class="headerlink" title="Typora（全平台）"></a>Typora（全平台）</h4><p>所见即所得，只有用过的才知道多好用。功能最全。但是不能进行扩展。其实已有的功能已经非常够用了。</p><h4 id="Mu（Mac-OS）"><a href="#Mu（Mac-OS）" class="headerlink" title="Mu（Mac OS）"></a>Mu（Mac OS）</h4><p>同样所见即所得，但是功能性比Typora弱。</p><h4 id="Atom-或者-Visual-Studio-Code（全平台）"><a href="#Atom-或者-Visual-Studio-Code（全平台）" class="headerlink" title="Atom 或者 Visual Studio Code（全平台）"></a>Atom 或者 Visual Studio Code（全平台）</h4><p>伪装成IDE的文本编辑器，一般程序员以及编程爱好者无人不知，有巨量的插件扩展。能玩游戏看B站听歌聊QQ微信微博。摸鱼神器。</p><h2 id="pandoc"><a href="#pandoc" class="headerlink" title="pandoc"></a>pandoc</h2><blockquote><p>Pandoc是由John MacFarlane开发的标记语言转换工具，可实现不同标记语言间的格式转换，堪称该领域中的“瑞士军刀”。Pandoc使用Haskell语言编写，以命令行形式实现与用户的交互，可支持多种操作系统。[^3][@noauthor_pandoc_2017]</p></blockquote><p>那么它能处理的格式到底有多少种：</p><p>（图片）</p><p>图片上一个节点代表它能处理的一种格式。</p><h2 id="富文本"><a href="#富文本" class="headerlink" title="富文本"></a>富文本</h2><blockquote><p>富文本格式（Rich Text Format, 一般简称为RTF）是由微软公司开发的跨平台文档格式。一般的格式设置，比如字体和段落设置，页面设置等等信息都可以存在RTF格式中。[^1][@noauthor___nodate]</p></blockquote><p>这是狭义上的富文本，那么广义上的富文本是什么呢？就是所谓的当你编辑时所见即所得。没有谁希望编辑一个文件时还需要像二十年前一样还需要修修改源代码的吧？因此富文本及富文本编辑器的发明是非常重要的革新。但是这是不是意味着纯文本会消失呢？并不。富文本有着富文本的易用，纯文本有着纯文本的轻便。至少来讲，我可不希望在写作前写作后还需要花费大量时间插入参考资料或者调整文本的排版字体大小还是怎样。尤其在写作中如果遇到需要处理的图片，大部分人应该是相当头痛的——既需要照顾排版又不不希望切断思路。那么对于大多数只用到了Microsoft Office Word以及OneNote基础功能的人来说无论使用什么来编辑文档其实都差不了多少。</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><h2 id="Markdown基础"><a href="#Markdown基础" class="headerlink" title="Markdown基础"></a>Markdown基础</h2><p>请不要把markdown视为非常可怕的东西。其实它非常容易掌握，而且对于使用者很友好——因为你在写作时的思路不会被打断，所有格式使用的语法非常简洁并全部可以通过一些文本实现。</p><p>在使用之前，为了方便书写请确保你的输入法是处于半角状态（搜狗上是月牙和圆点，月牙为半角；微软拼音在设置里调整），使用半角输入会将你的输入速度无论是在是用什么都会提高一个等级。</p><h3 id="标题类"><a href="#标题类" class="headerlink" title="标题类"></a>标题类</h3><p>Markdown的标题很容易表示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 这是一级标题</span><br><span class="line">## 这时二级标题</span><br><span class="line">### 这是三级标题</span><br></pre></td></tr></table></figure><p>每多一级标题就可以增加一个“#”。具体支持到哪级目录需要看渲染工具的支持，理论上无限。</p><p><strong>注意：为了使格式生效请在“#”后记得加个空格</strong></p><h3 id="标注类"><a href="#标注类" class="headerlink" title="标注类"></a>标注类</h3><h4 id="文本上的标注"><a href="#文本上的标注" class="headerlink" title="文本上的标注"></a>文本上的标注</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*斜体*</span></span><br><span class="line"><span class="strong">**加粗**</span></span><br><span class="line"><span class="strong">***加粗的斜体**</span>*</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线<span class="xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>当然你也可以使用下划线替换“*”，效果是一样的。</p><h4 id="文内引用"><a href="#文内引用" class="headerlink" title="文内引用"></a>文内引用</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">代码：</span><br><span class="line">​<span class="code">```</span>你的代码语言</span><br><span class="line">echo helloworld;</span><br><span class="line">​</span><br></pre></td></tr></table></figure><p>脚注：<br>这是一段实例文字。[^1]<br>[^1]: 这是实例文字的脚注，在生成的Word文档中会自动放置</p><p>尾注：<br>这是一段实例文字。[@example P33 Weearc]<br>Reference:<br>(自动生成，不需要动它)</p><p>下标：<br>~下标~</p><p>段落引用：</p><blockquote><p>你要引用的段落</p></blockquote><p>说明：引用完成时请多加一个回车（换行符），引用时尖括号后需要空格<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">以上是Markdown的基础语法部分，和普通六级专八词汇相比应该是简单的不是一星半点吧。</span><br><span class="line"></span><br><span class="line">### 链接类</span><br><span class="line"></span><br><span class="line">#### 图片</span><br><span class="line"></span><br><span class="line">```markdown</span><br><span class="line">![图片的说明](图片位置)</span><br></pre></td></tr></table></figure></p><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">链接的说明文字</span>](<span class="link">链接</span>)</span><br></pre></td></tr></table></figure><h2 id="markdown进阶"><a href="#markdown进阶" class="headerlink" title="markdown进阶"></a>markdown进阶</h2><h3 id="表格类"><a href="#表格类" class="headerlink" title="表格类"></a>表格类</h3><h5 id="基本表格（不含单元格合并）"><a href="#基本表格（不含单元格合并）" class="headerlink" title="基本表格（不含单元格合并）"></a>基本表格（不含单元格合并）</h5><p>基本的一个三乘三表格</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|title1|title2|title3|</span><br><span class="line">|:-----|:----:|-----:|</span><br><span class="line">|左侧对齐|居中|右侧对齐|</span><br><span class="line">|x|y|z|</span><br></pre></td></tr></table></figure><p>生成效果如下：</p><table><thead><tr><th style="text-align:left">title1</th><th style="text-align:center">title2</th><th style="text-align:right">title3</th></tr></thead><tbody><tr><td style="text-align:left">左侧对齐</td><td style="text-align:center">居中</td><td style="text-align:right">右侧对齐</td></tr><tr><td style="text-align:left">x</td><td style="text-align:center">y</td><td style="text-align:right">z</td></tr></tbody></table><h5 id="HTML表格（包含单元格合并的）"><a href="#HTML表格（包含单元格合并的）" class="headerlink" title="HTML表格（包含单元格合并的）"></a>HTML表格（包含单元格合并的）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列一<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>合并行<span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列一<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>合并列<span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> &gt;</span>行二列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> &gt;</span>行三列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：</p><table><br>    <tr><br>        <td>列一</td><br>        <td>列二</td><br>   </tr><br>   <tr><br>        <td colspan="2">合并行</td><br>   </tr><br>   <tr><br>        <td>列一</td><br>        <td>列二</td><br>   </tr><br>    <tr><br>        <td rowspan="2">合并列</td><br>        <td>行二列二</td><br>    </tr><br>    <tr><br>        <td>行三列二</td><br>    </tr><br></table><h3 id="公式类"><a href="#公式类" class="headerlink" title="公式类"></a>公式类</h3><p>此节主要包含数学公式，使用LaTeX数学公式语法。</p><h5 id="上标"><a href="#上标" class="headerlink" title="上标"></a>上标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">x^n</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>生成为：$x^n$</p><h5 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">C^2_3</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>选择数： $C^2_3$</p><h5 id="多项式"><a href="#多项式" class="headerlink" title="多项式"></a>多项式</h5><p>一个不包含tag的多项式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">T(n)=\begin&#123;cases&#125;</span><br><span class="line">\Theta(1)\quad n=1\\</span><br><span class="line">T(n-q)+\Theta(n) \quad n&gt;1</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>那么生成的公式如下：</p><p>$T(n)=\begin{cases}<br>\Theta(1)\quad n=1\<br>T(n-q)+\Theta(n) \quad n&gt;1<br>\end{cases}$</p><h5 id="矩阵及行列式"><a href="#矩阵及行列式" class="headerlink" title="矩阵及行列式"></a>矩阵及行列式</h5><p>一个包含tag的矩阵[@noauthor_markdown_nodate-1]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line"> \begin&#123;bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;bmatrix&#125; \tag&#123;1&#125;</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>$$<br>\begin{bmatrix}<br>   1 &amp; 2 &amp; 3 \<br>   4 &amp; 5 &amp; 6 \<br>   7 &amp; 8 &amp; 9 \<br>  \end{bmatrix} \tag{1}<br>$$</p><h5 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">J(\theta) = \frac&#123;1&#125;&#123;2m&#125;\sum_&#123;i=0&#125;^m(y^i - h_\theta(x^i))^2</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>生成的均方差公式为：</p><p>$J(\theta) = \frac{1}{2m}\sum_{i=0}^m(y^i - h_\theta(x^i))^2$</p><h5 id="还有很多…"><a href="#还有很多…" class="headerlink" title="还有很多…"></a>还有很多…</h5><p>LaTeX的数学公式异常灵活，其余语法可以自行查阅。</p><h3 id="信息类"><a href="#信息类" class="headerlink" title="信息类"></a>信息类</h3><h4 id="YAML样式的信息"><a href="#YAML样式的信息" class="headerlink" title="YAML样式的信息"></a>YAML样式的信息</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 这是一个标题</span><br><span class="line">time: 2019</span><br><span class="line">TOC: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>那么将生成自动目录以及包含时间信息的文章标题部分。</p><h4 id="XML样式信息"><a href="#XML样式信息" class="headerlink" title="XML样式信息"></a>XML样式信息</h4><p>如果你更熟悉XML，直接上吧骚年！</p><h3 id="导图类"><a href="#导图类" class="headerlink" title="导图类"></a>导图类</h3><p>使用markdown可以通过公式方式扩展来写流程图等。[@noauthor_typora__nodate]</p><h4 id="甘特图-时序图"><a href="#甘特图-时序图" class="headerlink" title="甘特图(时序图)"></a>甘特图(时序图)</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">​<span class="code">```</span>mermaid</span><br><span class="line">  sequenceDiagram</span><br><span class="line"><span class="code">    participant 张三</span></span><br><span class="line"><span class="code">    participant 李四</span></span><br><span class="line"><span class="code">    张三-&gt;王五: 王五你好吗？</span></span><br><span class="line"><span class="code">    loop 健康检查</span></span><br><span class="line"><span class="code">        王五-&gt;王五: 与疾病战斗</span></span><br><span class="line"><span class="code">    end</span></span><br><span class="line"><span class="code">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span></span><br><span class="line"><span class="code">    李四--&gt;&gt;张三: 很好!</span></span><br><span class="line"><span class="code">    王五-&gt;李四: 你怎么样?</span></span><br><span class="line"><span class="code">    李四--&gt;王五: 很好!</span></span><br><span class="line">​</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```mermaid</span><br><span class="line"></span><br><span class="line">%% 时序图例子,-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line"></span><br><span class="line">  sequenceDiagram</span><br><span class="line"></span><br><span class="line">    participant 张三</span><br><span class="line"></span><br><span class="line">    participant 李四</span><br><span class="line"></span><br><span class="line">    张三-&gt;王五: 王五你好吗？</span><br><span class="line"></span><br><span class="line">    loop 健康检查</span><br><span class="line"></span><br><span class="line">        王五-&gt;王五: 与疾病战斗</span><br><span class="line"></span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span><br><span class="line"></span><br><span class="line">    李四--&gt;&gt;张三: 很好!</span><br><span class="line"></span><br><span class="line">    王五-&gt;李四: 你怎么样?</span><br><span class="line"></span><br><span class="line">    李四--&gt;王五: 很好!</span><br></pre></td></tr></table></figure><h4 id="美人鱼图"><a href="#美人鱼图" class="headerlink" title="美人鱼图"></a>美人鱼图</h4><p>一个示例的美人鱼图：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">​<span class="code">```</span>mermaid</span><br><span class="line">graph TD</span><br><span class="line">client1--&gt;|read / write|SVN((SVN server))</span><br><span class="line">client2--&gt;|read only|SVN</span><br><span class="line">client3--&gt;|read / write|SVN</span><br><span class="line">client4--&gt;|read only|SVN</span><br><span class="line">client5(...)--&gt;SVN</span><br><span class="line">SVN---|store the data|sharedrive</span><br><span class="line">​</span><br></pre></td></tr></table></figure><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```mermaid</span><br><span class="line">graph TD</span><br><span class="line">client1--&gt;|<span class="type">read</span> / write|<span class="type">SVN</span>((SVN server))</span><br><span class="line">client2--&gt;|<span class="type">read</span> only|<span class="type">SVN</span></span><br><span class="line">client3--&gt;|<span class="type">read</span> / write|<span class="type">SVN</span></span><br><span class="line">client4--&gt;|<span class="type">read</span> only|<span class="type">SVN</span></span><br><span class="line">client5(...)--&gt;SVN</span><br><span class="line">SVN---|<span class="type">store</span> the data|<span class="type">sharedrive</span></span><br></pre></td></tr></table></figure><p>此处参考</p><h1 id="与文献管理工具互动"><a href="#与文献管理工具互动" class="headerlink" title="与文献管理工具互动"></a>与文献管理工具互动</h1><p>为什么不推荐使用word自带的文献管理器，因为Zotero以及Mandelay等文献管理器更加强大而且易用，包含比如PDF阅读、文献检索、文献关联设置、关键词等。</p><p>这里只对zotero文献管理器与markdown论文撰写的互动进行说明。</p><h2 id="Zotero"><a href="#Zotero" class="headerlink" title="Zotero"></a>Zotero</h2><p>首先到Zotero官网下载软件本体进行安装，然后按照提示安装浏览器插件。使用如下图：</p><p>（gif）</p><p>之后你可以在Zotero导出参考文献。导出时请选择Bibtex格式。需要生成参考文献时直接将导出的文件用文本编辑器打开并进行如下操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#一个实例的bib文件内容</span><br><span class="line">@misc&#123;noauthor_britains_nodate,</span><br><span class="line">        title = &#123;Britain’s imperial fantasies have given us &#123;Brexit&#125; &#123;\textbar&#125; &#123;Gary&#125; &#123;Younge&#125; &#123;\textbar&#125; &#123;Opinion&#125; &#123;\textbar&#125; &#123;The&#125; &#123;Guardian&#125;&#125;,</span><br><span class="line">        url = &#123;https://www.theguardian.com/commentisfree/2018/feb/03/imperial-fantasies-brexit-theresa-may&#125;,</span><br><span class="line">        urldate = &#123;2019-04-29&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里引用了参考[@noauthor<span class="emphasis">_britains_</span>nodate]</span><br></pre></td></tr></table></figure><p>即将包含“@misc”行行首大括号后内容前加“@”用中括号“[]”包裹放在需要引用的位置。生成文件时会自动在文末添加参考文献。[@noauthor_markdown_nodate]</p><h1 id="使用pandoc生成（最后一步了）"><a href="#使用pandoc生成（最后一步了）" class="headerlink" title="使用pandoc生成（最后一步了）"></a>使用pandoc生成（最后一步了）</h1><h2 id="pandoc安装"><a href="#pandoc安装" class="headerlink" title="pandoc安装"></a>pandoc安装</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Windows用户可以再官网下载EXE文件进行安装，并安装Python3使用pip安装pandoc的其他扩展。</p><h3 id="Mac-OS"><a href="#Mac-OS" class="headerlink" title="Mac OS"></a>Mac OS</h3><p>Mac用户可以使用brew来安装pandoc，并使用pip来添加扩展</p><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>重点说一下Linux，以证明使用Linux同样可以撰写论文。</p><p>大多数Linux发行版的仓库内包含pandoc，并默认有pip。使用pip可安装扩展。</p><h4 id="对于Arch-Linux"><a href="#对于Arch-Linux" class="headerlink" title="对于Arch Linux"></a>对于Arch Linux</h4><p>Arch Linux仓库中为pandoc以及LaTeX全部扩展进行了打包，直接安装，舒适便捷。</p><h2 id="生成方式"><a href="#生成方式" class="headerlink" title="生成方式"></a>生成方式</h2><p>在此文中，我们需要使用的插件为：pandoc-citeproc。</p><p>那么使用如下指令生成：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc --filter pandoc-citeproc --bibliography=你的文献库.bib --csl=chinese-gb7714-2005-numeric.csl  你的markdown文件.md -o  你的生成文件.docx</span><br></pre></td></tr></table></figure><p>其中“–csl”选项为需要生成参考文献的具体格式标准。</p><p>如果你单单只使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc  markdown文件.md -o  生成的文件</span><br></pre></td></tr></table></figure><p>将只进行最基础的文件渲染，比如转换为PDF格式。</p><h1 id="参考文献（示例）"><a href="#参考文献（示例）" class="headerlink" title="参考文献（示例）"></a>参考文献（示例）</h1><p>[^1]: <a href="https://baike.baidu.com/item/%E5%AF%8C%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F/1017816?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/%E5%AF%8C%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F/1017816?fr=aladdin</a> 富文本格式<br>[^2]: <a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/markdown/3245829?fr=aladdin</a> markdown<br>[^3]: <a href="https://zh.wikipedia.org/wiki/Pandoc" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/Pandoc</a> Pandoc</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;谁又说不可以呢？&lt;/p&gt;
    
    </summary>
    
      <category term="实用工具" scheme="https://blog.weearc.top/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="markdown" scheme="https://blog.weearc.top/tags/markdown/"/>
    
      <category term="pandoc" scheme="https://blog.weearc.top/tags/pandoc/"/>
    
      <category term="zotero" scheme="https://blog.weearc.top/tags/zotero/"/>
    
  </entry>
  
</feed>
