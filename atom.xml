<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>weearc的个人博客</title>
  
  <subtitle>来一起探索吧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.weearc.top/"/>
  <updated>2020-05-17T15:43:00.048Z</updated>
  <id>https://blog.weearc.top/</id>
  
  <author>
    <name>weearc</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>redmi K30 Pro 简评</title>
    <link href="https://blog.weearc.top/posts/155.html"/>
    <id>https://blog.weearc.top/posts/155.html</id>
    <published>2020-05-17T15:05:40.000Z</published>
    <updated>2020-05-17T15:43:00.048Z</updated>
    
    <content type="html"><![CDATA[<p>今年换手机这个时间节点卡的非常不好，早一点有最末代 4G 旗舰机纷纷大降价，晚一点可能还有 5G 手机集体跳水。但是买了就买了。鄙人第三部纯小米家搭载 MIUI 的设备。</p><a id="more"></a><p>我的上一部设备：HTC U Ultra，HTC U系列的开山之作，也可能说是 U 系列最失败的作品。你问我当时后不后悔在 18 年年初买了一款 17 年初的产品，我的回答是不后悔：放在今天依然不为过时的机身设计、2K LCD 屏幕、强悍的双扬声器、主动降噪耳机以及 HIFI 都带来了非常极致的视觉听觉盛宴，当时最为彪悍的影像系统也使得这部设备在服役期间让我体会到了它的强大。可惜就可惜在这么看起来很强大的设备搭载的是高通有着火龙之称的 SOC 821，而且还是阉割版。如果是放在17年年初这款设备的运存性能什么的也都够用，但是一跨入19年立刻体现出了短板，并且仅仅3000毫安时外加极为激进的调度让我不得不时时刻刻准备着充电宝，但是仍有可能在剩余百分之十几电量时突然自动关机。</p><p>上学期好信儿测了一个月电池损耗，两年使用时间实际损耗不到百分之10倒是体现了 HTC 到底还是在用料上花了钱，遂换了块电池觉得能够继续服役。但是没能料到年后续航直接从刚换电池那会儿近乎腰斩，外加4GB 运行内存不怎么够用，所以还是准备更换手机。</p><p>要知道今年可以更换的手机真的是选择少之又少，尤其是 5G 手机，各家纷纷将高刷新率作为卖点的同时外加物料人工成本疯狂上涨，价格是直接翻了一番。因为考虑到后期可能需要使用 GMS（我对GMS重度依赖，没办法，从13年开始自己选择的），华为系手机不得已全部不能选择，很可惜。 那么能够选择的只剩下小米、OPPO、VIVO、Realme、一加这几个选项。俗话说得好：一朝被蛇咬十年怕井绳，看了大量网友的评测以后决定放弃续航稍差的 Realme X50 Pro，OPPO的机器因为价格也不得不放弃，一加在考虑了售后以后放弃，VIVO 因为系统原因放弃。只剩下小米10和 Redmi K30 Pro 这两个选项。不买中端机的原因也很简单，旗舰的配置可以在某种程度上将使用年限拉长并且体验更好。最终还是考虑了续航的情况下选择了红米 K30 Pro。</p><p>说了这么多，这台机器有什么卖点？是续航，还是所谓真全面屏？在我看来这些都不能算是卖点，高通 865 一套打包拿来就是那么些东西，各家标配。没有的高刷新率的屏幕虽然本身不错但是今年却意外的成为了各路网友疯狂吐槽的地方。于我个人而言，这台机器总体体验对比 U Ultra 是升级的，要不换手机是换了个什么呢？但是总体体验依旧降级：</p><ul><li>1080p 屏幕，等效330 ppi。对比 U Ultra 的“标准”2560×1440的屏幕 ppi 440（虽然米10等效ppi也很低）</li><li>单扬声器。从双扬声器缓过来不是不能适应，但是还是觉得并不舒服。</li><li>Type-C 接口数字信号音频输出功率小。自带 DAC 的转接线几乎就是推不动。</li><li>重量。重量来到了228g，用一年下来应该就成麒麟臂了，带壳贴膜妥妥“米半斤”</li></ul><p>那么也有一定的优势：</p><ul><li>续航。变态级别的续航，轻松日用亮屏10小时以上，充一次电使用时间20小时起步（前提是自己改一改省电策略）</li><li>还算不错的屏幕色彩。虽然 PPI 大打折扣但是屏幕色彩确实还可以。</li><li>还算不错的影像系统。虽然是打包出售的 imx686，但是体验下来整体体验确实不错。</li></ul><p>一个优点顶十个缺点。最起码换机的原因之一：续航这个痛点是完美解决了。</p><p>（未完待续）</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今年换手机这个时间节点卡的非常不好，早一点有最末代 4G 旗舰机纷纷大降价，晚一点可能还有 5G 手机集体跳水。但是买了就买了。鄙人第三部纯小米家搭载 MIUI 的设备。&lt;/p&gt;
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="小米" scheme="https://blog.weearc.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
      <category term="redmi" scheme="https://blog.weearc.top/tags/redmi/"/>
    
      <category term="红米 k30 pro" scheme="https://blog.weearc.top/tags/%E7%BA%A2%E7%B1%B3-k30-pro/"/>
    
      <category term="电量焦虑" scheme="https://blog.weearc.top/tags/%E7%94%B5%E9%87%8F%E7%84%A6%E8%99%91/"/>
    
  </entry>
  
  <entry>
    <title>夜食食谱</title>
    <link href="https://blog.weearc.top/posts/1552.html"/>
    <id>https://blog.weearc.top/posts/1552.html</id>
    <published>2020-04-07T17:21:14.000Z</published>
    <updated>2020-04-07T17:44:44.187Z</updated>
    
    <content type="html"><![CDATA[<p>最近晚上很容易饿，就自己摸索了一点简单的食谱出来。</p><a id="more"></a><p>可能是北方最近结束供暖的缘故，地气很凉，然后为了保持体温之前供暖那段时间的不大的饭量转化为热可能就没剩下多少了。有时候夜里也爱到处寻找食物，但是 … 毕竟宵夜不能总吃而且对身体不好，晚饭在家里又只有我一个人吃，那就不如晚饭做一点容易暖和起来的更容易有饱腹感的食物。(在家不吃肉，所以肉是不存在的.jpg)</p><p>大概参考了日式杂烩饭的做法，稍稍改造了一下，食谱如下：</p><blockquote><p>原料： 大米（看量杯就可以，一般一小杯是一人一碗半的量）、胡萝卜、生姜。如果有吃剩下的蘑菇也可以加一点进去</p><p>调料：酱油、白酒、砂糖</p></blockquote><p>没了，就这么简单。煮个大米饭也没什么要点。无非是控制好水不要太多，把手指插入米中差不多水面比大米高出一个指关节高度。然后酱油用生抽就好，如果能买到日式酱油当然更棒，酒 + 砂糖这个组合是为了替代味淋（本来早打算再买一点，但是卖这些的店这几天才重新开起来了），砂糖不用很多，刚好似有似无甜味的程度就可以了，得自己慢慢试着来。整个饭的亮点感觉在于生姜，给饭增添了非常棒的风味。如果是用南方的籼米做的话可以在出国后少淋一点芝麻油，当然东北大米就不需要了，油水很足，干吃都非常香。</p><p>以前也试着用咖喱粉+鸡蛋简单调一个蛋糊做调味饭，但是还是觉得自己更喜欢偏向日餐韩餐的风味，贴近锅边的地方会有一点点锅巴，很让人满足。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近晚上很容易饿，就自己摸索了一点简单的食谱出来。&lt;/p&gt;
    
    </summary>
    
      <category term="杂谈" scheme="https://blog.weearc.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="杂谈" scheme="https://blog.weearc.top/tags/%E6%9D%82%E8%B0%88/"/>
    
      <category term="食谱" scheme="https://blog.weearc.top/tags/%E9%A3%9F%E8%B0%B1/"/>
    
  </entry>
  
  <entry>
    <title>[冷门向] 使用 mpv 打造专属播放器</title>
    <link href="https://blog.weearc.top/posts/162.html"/>
    <id>https://blog.weearc.top/posts/162.html</id>
    <published>2020-03-29T12:53:56.000Z</published>
    <updated>2020-04-07T17:25:11.933Z</updated>
    
    <content type="html"><![CDATA[<p>全文已发布至重庆大学蓝盟微信公众号往期内容内，博客上的版本待修改完善。</p><a id="more"></a><p>作为一个影音爱好者，我需要利器去使电影播放效果更加出色。作为技术向玩家，既然目前已有的工具都不怎么好用，那我们就来改造它让它更好用。</p><p>这就是我们今天要介绍的主角：mpv。</p><p><img src="/home/ddqi/推文/mpv-logo-128-0baae5aa.png" alt="mpv-logo-128-0baae5aa"></p><blockquote><p>MPV 是基于 MPlayer 和 MPlayer2 的开源软件。具有卓越的性能以及跨平台兼容性。</p><p>— 维基百科</p></blockquote><p>说到 MPV ， 大部分日常使用 Windows 的同志可能都没有听说过。但是 Linux 和 Mac OS 用户可能大部分人还是接触过的，即便是使用了 MPV 的变种（比如： bomi，或者是 Mac 下拥有精美 GUI 界面的IINA）他们都和 MPV 同宗同源。在大部分情况下，使用已经功能足够完善的带 GUI 的 MPV 虽然已经足够，但是就个人而言，却远远不够，这个影音大杀器只有在我们的完全自定义中才能最强大的力量。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>MPV 的安装极其简单：</p><ul><li><p>Windows： 访问 mpv.io 并下载 mingw-w64-mpv </p></li><li><p>Mac：Mac OS 用户可以通过 Brew 安装 MPV：</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mpv</span><br></pre></td></tr></table></figure></li><li><p>Linux：一般的 Linux 仓库都会包含 MPV，部分发行版预装了 MPV，想要独立安装请使用以下指令</p><p>Ubuntu / Debian ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mpv</span><br></pre></td></tr></table></figure><p>OpenSUSE ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> mpv</span><br></pre></td></tr></table></figure><p>Fedora：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install mpv</span><br></pre></td></tr></table></figure><p>Arch Linux：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mpv</span><br></pre></td></tr></table></figure></li><li><p>当然你也可以从源代码编译 MPV ，可以从 MPV 的 GITHUB 仓库获取源代码并修改编译参数，包含 / 去除 某些特性</p></li></ul><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>如果你成功的克服了心里上的恐惧，成功“安装”了MPV，那么这一步将是你能够愉快使用与否的关键。</p><p>在大部分情况下（尤其是 Mac 和 Linux 用户），已经将编解码器作为依赖安装到了操作系统中，而 Windows 用户可能需要手动安装 FFmpeg 作为编解码工具。由于没有编解码器的播放器只是一个“睁眼瞎”，只有在编解码器的存在下它才能发挥其真正的作用。那么在安装结束后，你可以使用 MPV 的默认设置进行视频播放了。</p><p><img src="/home/ddqi/推文/image-20200329212708064.png" alt="image-20200329212708064"></p><p>通常来讲直接运行 MPV 应该是这个样子，相比于其他完全基于命令行的播放器，MPV 还有个 GUI（虽然没什么用）。</p><p><img src="/home/ddqi/推文/深度截图_选择区域_20200329212939.png" alt="深度截图_选择区域_20200329212939"></p><p>播放视频的时候是这个样子，功能全部集中于下部的控制栏上，好像也还够用（其实确实够用了）。这个是小编配置完的 MPV ，但是因为懒 GUI 部分就不打算动了，这样也挺好的。</p><p>MPV 之所以看上去很简单（应该叫简陋），是因为它和大多数的高自定义化的工具一样，许多功能只有在探索之后才会被发现，另外支持丰富的扩展，可以找别人已经写好了的插件，也可以自己学着写一些插件。与其让开发者动手去满足用户（还不一定都会满足），不如自己动手丰衣足食。如果使用默认配置就能够让你满足那确实是最好不过，但是我们完全可以给它加上一些更有趣的功能。</p><h2 id="缩略图"><a href="#缩略图" class="headerlink" title="缩略图"></a>缩略图</h2><p>这个是一般开箱即用的播放器都会有的功能。</p><p>地址：<a href="https://github.com/TheAMM/mpv_thumbnail_script" target="_blank" rel="noopener">https://github.com/TheAMM/mpv_thumbnail_script</a></p><p>这是一个非常棒的查看进度条上缩略图的脚本，基于 Lua ，并具有一定的自定义功能<img src="/home/ddqi/推文/深度录屏_选择区域_20200329214106.gif" alt="深度录屏_选择区域_20200329214106"></p><p>安装：将脚本放于以下位置</p><p>Windows: <code>%APPDATA%\mpv\scripts\mpv_thumbnail_script_server.lua</code> &amp; <code>%APPDATA%\mpv\scripts\mpv_thumbnail_script_client_osc.lua</code></p><p>Linux/Unix/Mac: ~/.config/mpv/scripts/mpv_thumbnail_script_server.lua &amp; ~/.config/mpv/scripts/mpv_thumbnail_script_client_osc.lua</p><p>注：如果目录不存在则需要手动创建，具体可以参照 GITHUB 上的说明</p><h2 id="文本菜单"><a href="#文本菜单" class="headerlink" title="文本菜单"></a>文本菜单</h2><p>如果觉得部分基于命令行的功能不太适应的话，不妨试一下图形菜单。</p><p>地址： <a href="https://github.com/carmanaught/mpvcontextmenu" target="_blank" rel="noopener">https://github.com/carmanaught/mpvcontextmenu</a></p><p><img src="/home/ddqi/推文/687474703a2f2f692e696d6775722e636f6d2f446a7053546f6d2e706e67.png" alt="687474703a2f2f692e696d6775722e636f6d2f446a7053546f6d2e706e67"></p><p>这里只给出了作者展示的样式，可以通过自己修改样式表获得更加美观并且好用的菜单。图形部分通过 TK 或 GTK 实现。部分功能需要自己书写一定配置。</p><h2 id="kdialog-open-files"><a href="#kdialog-open-files" class="headerlink" title="kdialog open files"></a>kdialog open files</h2><p>此方法仅适用于 Linux （KDE）。</p><p>作为一名 KDE 用户，在 Linux 桌面环境上 GTK 和 QT 程序体验上的割裂极其难受，别的都可以忍，但是 GTK 反人类的会话样式不能忍。幸好有人开源了这个调用 Kdialog 打开文件的脚本，打开 MPV 以后，使用快捷键即可开启打开文件的窗口。<img src="/home/ddqi/推文/深度录屏_选择区域_20200329215427.gif" alt="深度录屏_选择区域_20200329215427"></p><h2 id="Play-with-mpv"><a href="#Play-with-mpv" class="headerlink" title="Play with mpv"></a>Play with mpv</h2><p>这是一个相当好用的浏览器插件。在看视频的时候希望不看到浏览器上花花绿绿的列表 / 广告？还是单纯的就只想在本地播放器上播放网页视频？这个插件都可以满足你。该插件需要配合一个 Python 脚本实现网页视频本地化播放，通过调用 youtube-dl 解析播放地址，实测支持大部分主流的视频网站，配合弹幕插件可以本地愉快的看番，不用“关弹幕保智商”了。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>MPV 是一个相当好玩并且强大的工具。如果你期待的是开箱即用，那么它可能确实是开箱即用（虽然看上去不好用），如果你希望的是它生来强大，那么它也确实是生来强大，丰富的自定义选项以及插件可以使得它变成任何你想要的样子。</p><p>如果你和我一样对现有的工具并不满意，又有一定的“折腾的勇气”，那为什么不试试看这个工具呢？期待你的尝试！更多的插件部分可以参阅 MPV 仓库 文档：<a href="https://github.com/mpv-player/mpv/wiki/User-Scripts" target="_blank" rel="noopener">https://github.com/mpv-player/mpv/wiki/User-Scripts</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;全文已发布至重庆大学蓝盟微信公众号往期内容内，博客上的版本待修改完善。&lt;/p&gt;
    
    </summary>
    
    
      <category term="待修改" scheme="https://blog.weearc.top/tags/%E5%BE%85%E4%BF%AE%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>一言 20200319</title>
    <link href="https://blog.weearc.top/posts/3498.html"/>
    <id>https://blog.weearc.top/posts/3498.html</id>
    <published>2020-03-18T17:32:52.000Z</published>
    <updated>2020-03-18T17:36:17.376Z</updated>
    
    <content type="html"><![CDATA[<p>人完全可以为自己的愤怒而感到庆幸，因为它维系了自己的价值观。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;人完全可以为自己的愤怒而感到庆幸，因为它维系了自己的价值观。&lt;/p&gt;

      
    
    </summary>
    
      <category term="一言" scheme="https://blog.weearc.top/categories/%E4%B8%80%E8%A8%80/"/>
    
    
      <category term="一言" scheme="https://blog.weearc.top/tags/%E4%B8%80%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>有失公允？ 红米AC2100路由器体验</title>
    <link href="https://blog.weearc.top/posts/32494.html"/>
    <id>https://blog.weearc.top/posts/32494.html</id>
    <published>2020-03-05T08:12:35.000Z</published>
    <updated>2020-03-05T09:07:02.505Z</updated>
    
    <content type="html"><![CDATA[<p>往年这个时间就已经回到学校了，今年算是个例外也正好给家里换一下老旧设备。</p><a id="more"></a><p>本着勤俭节约的美德，一个物品确实是应该用到彻底罢工才能换的。本来想着这次也如此 —— 但是架不住网络提速，原本家里的普联某超旧型号的路由器在 20m 升级到 50m 的时候就已经不能跑满带宽了，更何况是现在百兆直接升级千兆网。因此也有了一个很好的理由说服父母允许咱更换路由器。</p><p>那么问题就来了，是按照惯例再挑选一个普联的新产品？还是选水星家的 D191g ？还是买 Newifi？Newifi 在学校寝室使用后我初步得出的结果是：同时接驳多个设备后负载非常大，承载能力太低。并且一些功能鲁棒性测试无法通过。虽然可以通过刷入 Openwrt 提升素质，但是对于需要非常稳定使用的家庭使用场景还是不太适合，因此不再做考虑。至于其他产品倒也是让人纠结不知如何下手。</p><p>在纠结了好一段之后突然想起朋友说过 Redmi 新出的那个路由器风评也相当不错，既然普联水星没法考虑，那就都不考虑吧，遂在看了一些测评后决定购买 <strong>Redmi AC2100</strong> 。</p><h3 id="开箱"><a href="#开箱" class="headerlink" title="开箱"></a>开箱</h3><p>疫情期间小米之家发货速度一般，顺丰也因为管制绕了本省一大圈才送进来。<img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142359.jpg" alt="外包装"></p><p>外包装倒是相当突出产品本体，内层使用纸模</p><p><img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142546.jpg" alt="内层"></p><p>产品本体为白色，使用了磨砂材质的塑料，气孔较多可能需要做防灰处理。另外看了一下天线等地方，包括充电器本体都出现了水口未处理干净或者飞边，考虑到同价位的水星做工都没出现这种问题还是要批评下。<img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2020.03.05/IMG_20200305_142801.jpg" alt="分模线">（看到了吗…天线下部的那个分模线……）作为胶佬得时刻提醒自己这个是摆在那放着的不是模型……</p><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>连接相比之前了解到的倒是简单了很多，不需要先用电脑来初始化。只要路由器上电，连接到网络以后就算通过手机也能轻松的进行设置。另外初始化时提供了包括中继的设置，这点好评。</p><h3 id="测速"><a href="#测速" class="headerlink" title="测速"></a>测速</h3><p>相比 speedtest 这种枯燥无味的测试，我觉得找一些相对极限的场景进行测试更有代表性，比如找一个穿墙次数相当多的地方下载文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ddqi &gt; ~ &gt; aria2c -x 16 http://mirrors.cqu.edu.cn/UbuntuKylin_release/ubuntukylin-19.10-enhanced-amd64.iso</span><br><span class="line">03/05 16:43:55 [NOTICE] Downloading 1 item(s)</span><br><span class="line"> *** Download Progress Summary as of Thu Mar  5 16:44:55 2020 ***                                                                     </span><br><span class="line">===================================================================</span><br><span class="line">[<span class="comment">#a89ecf 441MiB/2.5GiB(17%) CN:5 DL:7.0MiB ETA:5m3s]</span></span><br><span class="line">FILE: /home/ddqi/ubuntukylin-19.10-enhanced-amd64.iso</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>2.4 GHz 下穿墙效果一般都比 5GHz 要好上不少，但是在用网小高峰时候还隔着墙进行测试都能有这种成绩还是能说明一些问题的，至少从结果上讲这款路由器一般家用场景应该是完全应付得了，甚至可以说绰绰有余。（不要小看老旧小区所谓的“全楼共享带宽”带来的网络问题啊喂！）</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>既然本着家用场景，那就不需要再做其他专业性质的测试。目前使用情况来看完全是物有所值，是一款具有性价比的产品。至于是不是“有失公允”还有待测试，但是至少从风评上看确实是相比小米旧款路由器的评价好了不少，小米路由器团队做出的努力也确实让人看到了。卢十瓦吹得再神，这也是一款面向实用场景的产品，是一款有诚意的产品。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;往年这个时间就已经回到学校了，今年算是个例外也正好给家里换一下老旧设备。&lt;/p&gt;
    
    </summary>
    
      <category term="玩赏" scheme="https://blog.weearc.top/categories/%E7%8E%A9%E8%B5%8F/"/>
    
    
      <category term="路由器" scheme="https://blog.weearc.top/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
      <category term="Redmi" scheme="https://blog.weearc.top/tags/Redmi/"/>
    
      <category term="小米" scheme="https://blog.weearc.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
  </entry>
  
  <entry>
    <title>ArchLinux + Windows10 双系统固态硬盘迁移</title>
    <link href="https://blog.weearc.top/posts/25676.html"/>
    <id>https://blog.weearc.top/posts/25676.html</id>
    <published>2019-11-26T12:22:54.000Z</published>
    <updated>2019-11-26T12:49:06.620Z</updated>
    
    <content type="html"><![CDATA[<p>盼星星盼月亮终于拿到了心心念念的固态硬盘，终于能够有畅快淋漓的体验了。</p><a id="more"></a><p>既然固态硬盘体验这么好，那为啥以前非要买那么写机械？因为我是仓鼠症患者，买的硬盘全部拿去存电影了…….</p><p>那到固态以后其实就没什么好说的，之前光驱位以及主硬盘位都有机械硬盘，光驱位上的盘作为纯粹的数据盘挂载在 Arch 下面。所以就算单独拿下来去给 NAS 挂着也没什么大问题。那么最终就还是主硬盘位的机械硬盘去了光驱位，新买的固态上了主硬盘位。</p><p>其实在迁移前我很纠结要不要重装windows，本意上是不想重新安装的，一大堆专业软件和自己配置的环境重新弄起来费时费力而且真的要命。那么就还是决定使用软件做系统迁移。先把最麻烦的windows的部分解决。Linux 反而是一向最容易迁移的了。</p><h2 id="迁移windows10"><a href="#迁移windows10" class="headerlink" title="迁移windows10"></a>迁移windows10</h2><p>下载 aomei 无损分区助手PE版本，配合wepe做好系统迁移，这个时候会一并把esp分区迁移过来，所以 linux 下就不需要重建了。有的电脑可能会遇到说是内存不足，那就老老实实重装吧。</p><h2 id="迁移ArchLinux"><a href="#迁移ArchLinux" class="headerlink" title="迁移ArchLinux"></a>迁移ArchLinux</h2><p>在windows下面如果没有了 Aomei这样的工具，那么迁移起来说实在说的是极其痛苦的，尤其现在ghost还不能用。Arch就要轻松很多。只需要用到 <code>rsync</code> 即可。</p><p>在旧的Arch下面给新硬盘剩余空间分好区，然后直接把新的根分区挂载在 <code>/mnt</code> 其余比如 <code>/home</code> <code>/boo/efi</code> 也依次挂载好。终端中执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -aAXv /* /mnt/. --exclude=&#123;/dev/*,/proc/*,/sys/*,/tmp/*,/var/tmp/*,/run/*,/mnt/*,/home/*,/media/*,/lost+found,/boot/*&#125;</span><br></pre></td></tr></table></figure><p>命令参数详情请参阅 <code>rsync</code> 的手册部分。然后排除掉 “运行态”的部分，对所有目录进行重建，文件按照归档进行迁移。执行以后大功告成一半。</p><p>由于我需要将原来的根分区删掉分给 home , 因此进入 Livecd 对旧分区进行删除操作，然后将分区移动到空间头部。完成后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure><p>参照当初安装 Arch 的步骤进行，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi/ --recheck</span><br></pre></td></tr></table></figure><p>重新安装grub。并配置grub：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure><p>在此之前记得删除掉旧的esp分区。至此基本大功告成。最后记得检查一下 <code>/etc/fstab</code> 以免启动时出现问题。</p><p>耗时4个小时两个系统迁移完毕，windows用了三个多小时，Arch用了40分钟不到。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;盼星星盼月亮终于拿到了心心念念的固态硬盘，终于能够有畅快淋漓的体验了。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="系统迁移" scheme="https://blog.weearc.top/tags/%E7%B3%BB%E7%BB%9F%E8%BF%81%E7%A7%BB/"/>
    
  </entry>
  
  <entry>
    <title>fcitx5尝鲜(另付fcitx5输入法皮肤摸索)</title>
    <link href="https://blog.weearc.top/posts/14466.html"/>
    <id>https://blog.weearc.top/posts/14466.html</id>
    <published>2019-10-25T13:19:33.000Z</published>
    <updated>2019-11-26T12:21:43.685Z</updated>
    
    <content type="html"><![CDATA[<p>原本搜狗输入法确实是真香的，但是架不住它总不更新问题一大堆。</p><a id="more"></a><p>作为非英语作为母语的计算机使用者，尤其是 GNU/Linux 用户，输入法确实是非常大的一个硬伤。如果说 QQ 微信 网易云 还可以勉强要么通过 wine 的方式要么通过虚拟机 就多多少少都还能解决，输入法如果没有原生可用的那就非常痛苦了。因此国内最厉害的中文输入法 搜狗输入法 在推出 Linux 版本的时候为什么那么多人感到异常兴奋也就多多少少能够理解。你用或者不用，都无法否认搜狗在输入法上做的贡献之大。</p><p>但是距离上一次更新也过去许久，依旧构建于 QT4 的搜狗拼音已经渐渐暴露出很多问题，并且看来短时间内没法迁移到 QT5。并且搜狗造的轮子 <code>sogou-qimpanel</code> 还会和 fcitx 的 <code>kimpanel</code> 产生冲突。但是说实在的如果不是搜狗的词库异常强大咱也就不会就算一直被恶心也要坚持使用下去了。</p><p>不过，其实很早我们可能就有了另外一个非常棒的选择，也就是 fcitx5 。</p><p>有关 fcitx5 的详细配置过程可以参考 Arch Linux Wiki ， 网上也有诸多 Archer 来写，就不加赘述。也可以参考<a href="https://github.com/weearc/fcitx5-skin-simple-blue" target="_blank" rel="noopener">我的这个仓库</a>之中的 readme 。</p><p>今天主要是讲讲看、研究一下 fcitx 的皮肤绘制。</p><p>fcitx5 的皮肤最基础的部分由以下几个文件构成：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--- panel.png</span></span><br><span class="line">  |- hightlight.png</span><br><span class="line">  <span class="comment">-- theme.conf</span></span><br></pre></td></tr></table></figure><p>正如文件命名，panel 指输入法候选词位置的样式， highlight 为候选词高亮背景。简单的说如果我们拿到一个皮肤的样版，对面板和高亮进行更改的话就能够调整输入法皮肤样式。</p><p>（剩下的内容有时间再详细查查相关内容补全）</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;原本搜狗输入法确实是真香的，但是架不住它总不更新问题一大堆。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
      <category term="输入法" scheme="https://blog.weearc.top/categories/archlinux/%E8%BE%93%E5%85%A5%E6%B3%95/"/>
    
    
      <category term="fcitx" scheme="https://blog.weearc.top/tags/fcitx/"/>
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="fcitx5" scheme="https://blog.weearc.top/tags/fcitx5/"/>
    
  </entry>
  
  <entry>
    <title>杂谈</title>
    <link href="https://blog.weearc.top/posts/12326.html"/>
    <id>https://blog.weearc.top/posts/12326.html</id>
    <published>2019-08-27T13:20:57.000Z</published>
    <updated>2019-08-27T21:44:42.453Z</updated>
    
    <content type="html"><![CDATA[<p>人大多数时候选择去做一件事，也许并不是为了获得什么，而是单纯的害怕空虚。</p><a id="more"></a><p>近两年的个人状态可以说是非常奇怪了。总结下来也无非是开头那句话。正因为害怕空虚所以去做各种事情，将自己的时间填满。不过，就算空着的时间都填满了，难道就会感到满足了吗？我不以为意。反而感觉更加的空虚。说白了，这种因为空虚所以选择让自己看起来很忙的行为无异于饮鸩止渴，逞一时之快后患无穷。究其原因还是因为少了方向感。</p><p>高考前之所以能稳住拼尽全力，也无非是因为只需要考虑怎么答题就对了，脑子里什么都不需要想。拼命学了三年需要有一个突破口，一个来发泄的点。然后进入了大学，不再如同高中，可以考虑可以尝试的东西极大丰富，本来就患有选择困难的我人生第一次感到如此迷茫。专业不是我喜欢的、但是成绩又不是最好的、喜欢的东西在侵占我的时间、但是不喜欢的东西却本需要大把时间。越是想逃离就越是逃不掉，最后深陷其中。坦然接受现状虽然是最佳选择，不过，我又浪费掉了一年。确实可以有很多，但是似乎在前途面前都是苍白无力。每次回家看到父母日渐衰老，家事变化也不由得暗自落泪。</p><p>家人倒也不像是其他人说的那样对我寄予厚望，到时自己越是给说一般般平平常常就可以越是感到压力倍增。正因为看到了家人的辛苦之处，才想变得更强将来可以保护家人；越是想变得更强越是对现状不满，对自己不满；越是对自己不满就越是急切的想找到目标。然而我没有目标。因此愈发感到无比空虚。因此就尝试做很多事情，又因为本身学习能力并不差所以就学会很多事情，以此可以更好地消磨时间。</p><p>我急切的需要摆脱这种现状，那么最好的办法我希望不再是定下长远的目标，而是短时间内先从眼前的事情做好。以前到时很瞧不起做计划之类的，总觉得“到时候总会有办法”，不过现在看前人的经验真的是正确无比，所谓摸着石头过河也是需要摸到下一个石头的位置，更长远的目标就是“对岸”。重新来过的这一年，我仍不希望自己空虚，那么就尝试换成另外一种方法填满自己算了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;人大多数时候选择去做一件事，也许并不是为了获得什么，而是单纯的害怕空虚。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="https://blog.weearc.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="杂记" scheme="https://blog.weearc.top/categories/%E9%9A%8F%E7%AC%94/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="杂记" scheme="https://blog.weearc.top/tags/%E6%9D%82%E8%AE%B0/"/>
    
      <category term="随笔" scheme="https://blog.weearc.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>hexo主题模版改造记录</title>
    <link href="https://blog.weearc.top/posts/31380.html"/>
    <id>https://blog.weearc.top/posts/31380.html</id>
    <published>2019-08-05T15:37:27.000Z</published>
    <updated>2019-08-06T23:48:13.973Z</updated>
    
    <content type="html"><![CDATA[<p>有时候就是心血来潮才想搞一些好玩的，假期一旦懒下来人就待完了。</p><a id="more"></a><p>上一篇: <a href="https://blog.weearc.top/posts/6009.html">hexo主题迁移and折腾记</a></p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>之前一直是抱着小小改造一下将就用就行了的心态来改造博客主题，直到又一个朋友也开始建立博客。于是一直懒着不愿意写的友链以及关于的独立页面也不得不提上日程，就连之前想加入的 clipboard.js 这次也想一股气做好。说起来容易，实际开始读 layout 部分代码才发现自己并不是很懂整个 pug 模版的渲染流程以及构架。整个博文是对于改造过程的记录，如果嫌烦可以跳过我思考的那一部分。</p><h1 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h1><p>最初搜索一番，仍然发现大多数就是简单的建立一个友链的 page 然后直接 md 堆上去就完事了。当然我之前也这么做过。但是实际效果并不尽如人意。于是不得不进行主题拆解。</p><p>然后花费了相当长一段时间发现并没有搞懂主题的布局…Orz。这就产生了一个问题，在寻找了非常多 HEXO 主题开发相关的博文时候，发现不管是用脚手架来搭建还是怎样，一个主题一定是先有布局再往里面填肉，虽然日常自己写点东西是这个思想却没想到用这个思想来解构，有点呆。</p><h1 id="解构主题"><a href="#解构主题" class="headerlink" title="解构主题"></a>解构主题</h1><p>所以，整体布局确实如下图，从代码中也多少能看出点倪端：</p><p><img src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2019.08.06/base.png" alt></p><p>那么看下整体文件的解构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">themes/maupassant/layout/</span><br><span class="line">----------------------------------</span><br><span class="line">├── archive.pug</span><br><span class="line">├── base.pug</span><br><span class="line">├── index.pug</span><br><span class="line">├── page.pug</span><br><span class="line">├── post.pug</span><br><span class="line">├── single-column.pug</span><br><span class="line">├── timeline.pug</span><br><span class="line">├── _partial</span><br><span class="line">     ├── after_footer.pug</span><br><span class="line">     ├── comments.pug</span><br><span class="line">     ├── footer.pug</span><br><span class="line">     ├── head.pug</span><br><span class="line">     ├── helpers.pug</span><br><span class="line">     ├── mathjax2.pug</span><br><span class="line">     ├── mathjax.pug</span><br><span class="line">     ├── paginator.pug</span><br><span class="line">     ├── post_nav.pug</span><br><span class="line">     ├── tag.pug</span><br><span class="line">     ├── totop.pug</span><br><span class="line">     └── wordcount.pug</span><br><span class="line">|── _widget</span><br><span class="line">    ├── category.pug</span><br><span class="line">    ├── links.pug</span><br><span class="line">    ├── recent_comments.pug</span><br><span class="line">    ├── recent_posts.pug</span><br><span class="line">    ├── search.pug</span><br><span class="line">    ├── tag.pug</span><br><span class="line">    └── toc.pug</span><br></pre></td></tr></table></figure><p>如果是仔细阅读过主题配置文件，就会发现其中下面列出的这一部分就属于我们说的“单独的页面”：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── index.pug</span><br><span class="line">├── timeline.pug</span><br><span class="line">├── post.pug</span><br><span class="line">├── archive.pug</span><br></pre></td></tr></table></figure><p>这些是主题中最最基础的几个独立页面：文章、时间线、主页、文章归档。</p><p>其中都会有那么句：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">extends base</span><br><span class="line">...</span><br><span class="line">include _partial/BALABALA.pug</span><br></pre></td></tr></table></figure><p>如果是对编程相对熟悉的同学可能一下子就发现了这不是典型的引入么，前面是以 <code>base.pug</code> 作为“母版”，后面在上面加东西。前面尝试着 copy 过别人的代码尝试添加一个侧边栏的 TOC（以失败告终），但是并没有好好阅读代码，所以这次吃了大苦头。所以，就连其他全部页面都是在 base 基础上扩展来的，因此提供了一个思路：要想添加自己的独立页面，就需要仿照其他的从 base 为基础进行扩展。</p><p>那么我们来看一下，比如这个 archive:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">archive.pug</span><br><span class="line">-------------------</span><br><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">  if page.category</span><br><span class="line">     title= page.category + ' | ' + config.title</span><br><span class="line">  if page.tag</span><br><span class="line">     title= page.tag + ' | ' + config.title</span><br><span class="line">  if page.archive</span><br><span class="line">     title= __('archive') + ' | ' + config.title</span><br><span class="line">block content</span><br><span class="line">  if page.category || page.tag</span><br><span class="line">      h1.label-title=  __('reading_label', page.category || page.tag)</span><br><span class="line">  .post</span><br><span class="line">    .post-archive</span><br><span class="line">        //Use lodash to classify posts. See https://lodash.com/docs#groupBy</span><br><span class="line">        each posts, year in _.groupBy(page.posts.toArray(), function(p)&#123;return -p.date.format('YYYY')&#125;)</span><br><span class="line">          h2= -year</span><br><span class="line">          ul.listing</span><br><span class="line">            for post in posts</span><br><span class="line">              li</span><br><span class="line">                span.date= post.date.format(config.date_format)</span><br><span class="line">                a(href=url_for(post.path), title=post.title)</span><br><span class="line">                  +title(post)</span><br><span class="line">  include _partial/paginator.pug</span><br></pre></td></tr></table></figure><p>可以发现整个结构如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">..........</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">........</span><br></pre></td></tr></table></figure><p>正好也符合整个页面的布局。那么，友链那么多条是不是要自己一条条加上去呢？傻子才全手写。</p><p><code>_widget/links.pug</code> 中就很好的提到了一个思路，当然也非常常用：用 for 循环</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- for (var i in theme.links)</span><br><span class="line">    ul</span><br><span class="line">    a(href=theme.links[i].url title=theme.links[i].title target='_blank') #&#123;theme.links[i].title&#125;</span><br></pre></td></tr></table></figure><p>不过可以发现少了一些东西，头像呢？描述呢？其实这些东西自己加上就好，这里不赘述 YAML 的语法，整个过程相当是从<code>themes/_config.yml</code> 中取出 <code>links</code>部分的值，然后找寻每个 links 部分的的子项，这是个很好的思路。</p><h1 id="动工"><a href="#动工" class="headerlink" title="动工"></a>动工</h1><p>首先现在<code>themes/_config.yml</code>填入所需值，然后编写独立页面：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">layout/single-link-page.pug</span><br><span class="line">-------------------------------------</span><br><span class="line">extends base</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">    title= page.title + ' | ' + config.title</span><br><span class="line"></span><br><span class="line">block  content</span><br><span class="line">    - for (var i in theme.links)</span><br><span class="line">        p</span><br><span class="line">            a.friendurl(target='_blank', href=theme.links[i].url, title=theme.links[i].title)</span><br><span class="line">        a.friendurl(target='_blank', href=theme.links[i].url, title=theme.links[i].title)</span><br><span class="line">            .frienddiv</span><br><span class="line">                a.frienddivleft(target='_blank', href=theme.links[i].url)</span><br><span class="line">                    img.myfriend(src=theme.links[i].src)  // 头像部分</span><br><span class="line">                .frienddivright</span><br><span class="line">                    |  #&#123;theme.links[i].title&#125;</span><br><span class="line">                    br</span><br><span class="line">                    br</span><br><span class="line">                    |  #&#123;theme.links[i].dec&#125;  // 描述</span><br></pre></td></tr></table></figure><p>样式网上有非常多，不愿意写可以找一找抄一抄（虽然有无脑抄完回来给我留言说编译失败的….）。有点前端基础自己写就好，这种东西不怎么依赖定位倒也是好写。</p><p>然后出现一个问题：侧边栏影响美观程度。解决方法是仿照 base 写一个无侧边栏的即可（其实就是把 sidebar 对应部分注释掉），相对的，开头 extends 的部分也要进行修改。</p><p>（未完待续）</p><p><a href="http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-2-Other-Pages/" target="_blank" rel="noopener">http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-2-Other-Pages/</a></p><p><a href="https://hqcfly.github.io/2016/06/19/hexo-theme-guide/" target="_blank" rel="noopener">https://hqcfly.github.io/2016/06/19/hexo-theme-guide/</a></p><p><a href="https://molunerfinn.com/make-a-hexo-theme/" target="_blank" rel="noopener">https://molunerfinn.com/make-a-hexo-theme/</a></p><p><a href="http://huanyouchen.github.io/2019/03/22/add-tags-pages-to-hexo-maupassant-theme/" target="_blank" rel="noopener">http://huanyouchen.github.io/2019/03/22/add-tags-pages-to-hexo-maupassant-theme/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有时候就是心血来潮才想搞一些好玩的，假期一旦懒下来人就待完了。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://blog.weearc.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="hexo" scheme="https://blog.weearc.top/tags/hexo/"/>
    
      <category term="模版" scheme="https://blog.weearc.top/tags/%E6%A8%A1%E7%89%88/"/>
    
      <category term="响应式" scheme="https://blog.weearc.top/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>使用zenity+xclip实现文字复制粘贴</title>
    <link href="https://blog.weearc.top/posts/5960.html"/>
    <id>https://blog.weearc.top/posts/5960.html</id>
    <published>2019-07-21T11:27:40.000Z</published>
    <updated>2019-08-05T23:37:57.103Z</updated>
    
    <content type="html"><![CDATA[<p>都多久了我也不太记得，网易云下竟然由于qt的某个问题不能使用fcitx输入中文了！WTF！不过我们可以曲线救国。</p><a id="more"></a><p>就算直接不能输入中文我们也有办法暂时解决这个问题。那就是使用zenity+xclip制作一个可输入中文的带有 <strong>GUI</strong> 的一个脚本。</p><blockquote><p>xclip是Unix以及类Unix系统下非常强大的剪贴板交互程序</p></blockquote><p>我们可以简单看一下xclip的help输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Usage: xclip [OPTION] [FILE]...</span><br><span class="line">Access an X server selection <span class="keyword">for</span> reading or writing.</span><br><span class="line"></span><br><span class="line">  -i, -<span class="keyword">in</span>          <span class="built_in">read</span> text into X selection from standard input or files</span><br><span class="line">                   (default)</span><br><span class="line">  -o, -out         prints the selection to standard out (generally <span class="keyword">for</span></span><br><span class="line">                   piping to a file or program)</span><br><span class="line">  -l, -loops       number of selection requests to <span class="built_in">wait</span> <span class="keyword">for</span> before exiting</span><br><span class="line">  -d, -display     X display to connect to (eg localhost:0<span class="string">")</span></span><br><span class="line"><span class="string">  -h, -help        usage information</span></span><br><span class="line"><span class="string">      -selection   selection to access ("</span>primary<span class="string">", "</span>secondary<span class="string">", "</span>clipboard<span class="string">" or "</span>buffer-cut<span class="string">")</span></span><br><span class="line"><span class="string">      -noutf8      don't treat text as utf-8, use old unicode</span></span><br><span class="line"><span class="string">      -target      use the given target atom</span></span><br><span class="line"><span class="string">      -rmlastnl    remove the last newline charater if present</span></span><br><span class="line"><span class="string">      -version     version information</span></span><br><span class="line"><span class="string">      -silent      errors only, run in background (default)</span></span><br><span class="line"><span class="string">      -quiet       run in foreground, show what's happening</span></span><br><span class="line"><span class="string">      -verbose     running commentary</span></span><br></pre></td></tr></table></figure><p>按照功能，我们需要：</p><ol><li>输入文字</li><li>将文字输入到剪贴板</li><li>将文字传给clipboard程序</li></ol><p>非常简单的三个部分。输入文字部分由zenity负责，同时将输入的文字存入变量中，之后用管道传给xclip程序。</p><p>那么需要用到的xclip选项应该就很容易选择了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xclip option</span></span><br><span class="line">xclip -i  <span class="comment"># read text into X selection from standard input or files</span></span><br><span class="line">xclip --selectron clipboard <span class="comment"># copy input to clipboard for output</span></span><br></pre></td></tr></table></figure><p>思路明确了以后就非常容易办了，我们再看一下zenity <code>entry</code>部分的帮助说明：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">用法：</span><br><span class="line">  zenity [OPTION…]</span><br><span class="line"></span><br><span class="line">文字输入选项</span><br><span class="line">  --entry                                显示文本输入对话框</span><br><span class="line">  --text=文字                            设置对话框文字</span><br><span class="line">  --entry-text=文字                      设置输入文字</span><br><span class="line">  --hide-text                            隐藏输入文字</span><br></pre></td></tr></table></figure><p>也就是说我们只需要使用 <code>--entry</code> 选项显示输入框即可，在尝试中发现，bash下执行zenity –entry后会将输入打印到终端，也就是说我们需要将其存为变量才可以使用。因此完整代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">words_to_copy=$(zenity --entry)</span><br><span class="line"><span class="comment"># Use zenity to display a GUI information message.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$words_to_copy</span> | xclip -i </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$words_to_copy</span> | xclip -sel c</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;都多久了我也不太记得，网易云下竟然由于qt的某个问题不能使用fcitx输入中文了！WTF！不过我们可以曲线救国。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="zenity" scheme="https://blog.weearc.top/tags/zenity/"/>
    
      <category term="xclip" scheme="https://blog.weearc.top/tags/xclip/"/>
    
      <category term="去他妈的网易云" scheme="https://blog.weearc.top/tags/%E5%8E%BB%E4%BB%96%E5%A6%88%E7%9A%84%E7%BD%91%E6%98%93%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>使用nodejs+shellscript实现github-webhook</title>
    <link href="https://blog.weearc.top/posts/41471.html"/>
    <id>https://blog.weearc.top/posts/41471.html</id>
    <published>2019-07-10T11:27:40.000Z</published>
    <updated>2019-07-10T19:33:29.313Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="webhook" scheme="https://blog.weearc.top/tags/webhook/"/>
    
      <category term="nodejs" scheme="https://blog.weearc.top/tags/nodejs/"/>
    
      <category term="自动化流程" scheme="https://blog.weearc.top/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%81%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>archlinux安装配置(3)</title>
    <link href="https://blog.weearc.top/posts/12422.html"/>
    <id>https://blog.weearc.top/posts/12422.html</id>
    <published>2019-07-08T15:22:05.000Z</published>
    <updated>2019-07-18T21:27:03.146Z</updated>
    
    <content type="html"><![CDATA[<p>距离第一篇博文时隔快两年的更新。由于本次配置文件有问题，KDE直接罢工。修补无果于是决定重装。</p><a id="more"></a><p>前文：</p><ul><li><a href="https://blog.weearc.top/posts/7521.html">基础系统安装</a></li><li><a href="https://blog.weearc.top/posts/60769.html">基础系统配置</a></li></ul><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文将会涉及到的内容：</p><ul><li>相当个人级别的系统配置</li><li>可能非常不符合常理的做法</li><li>可能涉及到的错误</li></ul><p>如果是第一次或者还没安装的话可以先按照正经的步骤进行安装以避免误导。</p><h1 id="chroot下的变更"><a href="#chroot下的变更" class="headerlink" title="chroot下的变更"></a>chroot下的变更</h1><p>在正常的安装流程下，我增加安装了几个包：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fish iw <span class="keyword">dialog </span>dhcp wpa_supplicant vim sudo <span class="keyword">screenfetch </span>htop</span><br></pre></td></tr></table></figure><p>将其分为几类：</p><ul><li>shell: fish(开箱即用的强大shell)</li><li>network: iw dialog wpa_supplicant dhcp(保证进入新系统有网)</li><li>editor: vim(个人非常喜欢的编辑器，更改sudoer会强制使用)</li><li>tools: htop sudo screenfetch(强大的进程管理器、提权工具、基础信息查看)</li></ul><p>这样的话进入新系统会节省一部分时间。</p><h1 id="新系统下的更改"><a href="#新系统下的更改" class="headerlink" title="新系统下的更改"></a>新系统下的更改</h1><h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><p>由于我是重新安装系统，因此<code>/home</code>还在，因此没必要按照常规的在新建用户时候添加<code>-m</code>选项：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">useradd username</span></span><br></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">passwd username</span></span><br></pre></td></tr></table></figure><p>这样的话就完成了用户建立（并且使用旧的<code>/home</code>）。</p><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>因为之前配置完了大部分的内容，因此进入系统的第二件事是先联网。这里使用的是<code>netctl</code>,稍后再更换为<code>NetworkManager</code>。</p><p>因为是wifi链接，所以执行：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">wifi-menu</span></span><br></pre></td></tr></table></figure><p>然后连接到自己需要的网络。由于个人的路由器是限制设备ip的，因此需要在设备上填入固定IP才能正常联网。虽然上一步执行后失败，但是此时<code>netctl</code>已经有了需要的配置文件。形如：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/netctl/wlp2s0-wifi</span></span><br><span class="line">------------------------------------------------------------------------------------------------</span><br><span class="line">Description='Automatically generated profile by wifi-menu'</span><br><span class="line">Interface=wlp2s0</span><br><span class="line">Connection=wireless</span><br><span class="line">Security=wpa</span><br><span class="line">ESSID= <span class="comment">#WiFi名称</span></span><br><span class="line">IP=static</span><br><span class="line">Address=() <span class="comment">#指定的IP</span></span><br><span class="line">Gateway= <span class="comment">#网关，不知道怎么确定的就填写192.168.1.0一般没问题</span></span><br><span class="line">Key= <span class="comment">#密码</span></span><br></pre></td></tr></table></figure><p>当然这个是修改过的，然后执行：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netctl <span class="literal">start</span> wlp2s0-wifi</span><br></pre></td></tr></table></figure><p>来连接到这个Wifi，并使用：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netctl <span class="keyword">status</span> wlp2s0-wifi</span><br></pre></td></tr></table></figure><p>查看连接状况。</p><p>这样的话应该是有网络了。</p><h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><p>按照个人喜好，我比较习惯把包管理的颜色打开，便于区分包。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/pacman.conf</span></span><br><span class="line">-----------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># Misc options部分</span></span><br><span class="line"><span class="comment">#UseSyslog</span></span><br><span class="line">Color <span class="comment">#取消注释</span></span><br><span class="line"><span class="comment">#TotalDownload</span></span><br><span class="line">CheckSpace</span><br><span class="line">VerbosePkgLists <span class="comment">#取消注释，更新时可看到变动信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 32位的东西有时候不可避免，为了不必要的麻烦需要打开</span></span><br><span class="line">[multilib]</span><br><span class="line">Include = /etc/pacman.d/mirrorlist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加ArchlinuxCN仓库</span></span><br><span class="line">[archlinuxcn]</span><br><span class="line">SigLevel = TrustedOnly</span><br><span class="line">Server = http://mirrors.cqu.edu.cn/archlinuxcn/$arch</span><br></pre></td></tr></table></figure><p>之后需要执行：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman</span> -Syy  <span class="comment">#更新本地包管理的数据库</span></span><br><span class="line">pacman -S archlinuxcn-keyring <span class="comment">#添加archlinuxCN的签名，主要是为了安全，大概</span></span><br></pre></td></tr></table></figure><h2 id="桌面环境安装"><a href="#桌面环境安装" class="headerlink" title="桌面环境安装"></a>桌面环境安装</h2><p>一般来讲选KDE还是选gnome这个确实看眼缘。由于gnome上个版本的内存泄露太邪门了，虽然目前已经修好但是我还是用KDE吧。</p><p>安装KDE的话一般可能会推荐安装整个Plasma套件，但是好多东西其实用不到，因此也没必要装。我还是决定从最基础的plasma desktop 开始像搭积木一样配置好。</p><p>先安装最基础的桌面环境：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -S plasma-desktop</span></span><br></pre></td></tr></table></figure><p>然后我们装一下驱动，我是intel核显加上A卡独显，不怎么麻烦，并且A卡先不打算用，入门级性能弱的要死也没办法用：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman</span> -S xf86-video-intel</span><br></pre></td></tr></table></figure><p>一般这样的话 I 卡就可以正常工作了。然后安装桌面管理器<code>SDDM</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S sddm</span><br><span class="line">systemctl <span class="built_in">enable</span> sddm <span class="comment">#添加sddm开机启动</span></span><br></pre></td></tr></table></figure><p>因为我们进入桌面环境以后还需要进行配置，因此终端以及文件管理器是必须的：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -S konsole dolphin</span></span><br></pre></td></tr></table></figure><p>然后重启进入KDE。</p><h2 id="剩余桌面环境配置"><a href="#剩余桌面环境配置" class="headerlink" title="剩余桌面环境配置"></a>剩余桌面环境配置</h2><p>进入桌面环境以后就都属于比较常规的配置了，依照个人喜好进行配置就好。</p><h3 id="仍然是系统组件部分"><a href="#仍然是系统组件部分" class="headerlink" title="仍然是系统组件部分"></a>仍然是系统组件部分</h3><p>一般来讲的话我们的桌面目前已经可以使用了，但是为了一些更加方便的调整我们需要安装一些KDE设置中心的插件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Ss kcm</span><br></pre></td></tr></table></figure><p>不出意外的话应该得到如下结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">extra/kcmutils 5.60.0-1 (kf5) </span><br><span class="line">    Utilities <span class="keyword">for</span> interacting with KCModules</span><br><span class="line">extra/sddm-kcm 5.16.3-1 (plasma) </span><br><span class="line">    KDE Config Module <span class="keyword">for</span> SDDM</span><br><span class="line">extra/telepathy-kde-accounts-kcm 19.04.3-1 (kde-applications kdenetwork telepathy-kde)</span><br><span class="line">    KCM Module <span class="keyword">for</span> configuring Telepathy Instant Messaging Accounts</span><br><span class="line">community/kcm-fcitx 0.5.5-2 </span><br><span class="line">    KDE Config Module <span class="keyword">for</span> Fcitx</span><br><span class="line">community/kcm-wacomtablet 1:3.1.1-1</span><br><span class="line">    KDE GUI <span class="keyword">for</span> the Wacom Linux Drivers</span><br><span class="line">archlinuxcn/kcm-colorful-git 1.0.1.r0.g2cb0524-1 </span><br><span class="line">    Make your KDE plasma colorful</span><br><span class="line">archlinuxcn/kcm-fcitx5-git r240.62e087f-2</span><br><span class="line">    KDE Config Module <span class="keyword">for</span> Fcitx5</span><br><span class="line">archlinuxcn/nx-firewall-git 0.1.r70.gdf134bd-1 </span><br><span class="line">    Firewall KCM: Plasma 5 Firewall KCM.</span><br><span class="line">archlinuxcn/systemd-kcm 1.2.1-4 </span><br><span class="line">    Systemd control module <span class="keyword">for</span> KDE</span><br></pre></td></tr></table></figure><p>挑选我们喜欢的组件安装即可。</p><p>另外，由于对于显示部分以及触控板都有额外组件可以用，参照ArchLinux的wiki来一个个安装就可以了，比如相当常用的两个：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kscreen   libinput</span><br></pre></td></tr></table></figure><p>这部分完全是各取所需，另外比如<code>axel</code>等命令行工具也是可以根据需求安装的。</p><h3 id="美化部分"><a href="#美化部分" class="headerlink" title="美化部分"></a>美化部分</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;距离第一篇博文时隔快两年的更新。由于本次配置文件有问题，KDE直接罢工。修补无果于是决定重装。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="linux" scheme="https://blog.weearc.top/tags/linux/"/>
    
      <category term="完全配置" scheme="https://blog.weearc.top/tags/%E5%AE%8C%E5%85%A8%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>使用pandoc撰写论文</title>
    <link href="https://blog.weearc.top/posts/1448.html"/>
    <id>https://blog.weearc.top/posts/1448.html</id>
    <published>2019-05-02T12:45:10.000Z</published>
    <updated>2019-08-05T23:39:23.436Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>谁又说不可以呢？</p><a id="more"></a><h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>一般论文写作等会有如下痛点，包含：</p><ul><li>数学公式</li><li>图片处理</li><li>交叉引用、脚注、尾注</li><li>参考文献的文献库处理</li></ul><p>当然大名鼎鼎的Microsoft Office当然能处理这些问题，但是与其说是能处理，不如说是处理的不当就会变得麻烦起来。在这些方面处理的最好的应该是LaTeX，但是由于其语法学习曲线非常陡峭，那么支持部分LaTeX特性的Markdown将是比较好的选择，处理得当时将包含如下特性：</p><ul><li>基于自然语言的数学公式处理</li><li>HTML支持，意味着markdown的写作可以很灵活多变</li><li>插件扩展的的流程图、甘特图、美人鱼图支持</li><li>交叉引用、脚注、尾注、文献自动插入</li><li>目录自动生成</li></ul><p>那么本文将简要的介绍下如何使用markdown来进行基本的写作。</p><p>注：本文内容相对较多，但是请相信看完之后收获会是巨大的。</p><h1 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h1><h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><blockquote><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。<br>Markdown具有一系列衍生版本，用于扩展Markdown的功能（如表格、脚注、内嵌HTML等等），这些功能原初的Markdown尚不具备，它们能让Markdown转换成更多的格式，例如LaTeX，Docbook。Markdown增强版中比较有名的有Markdown Extra、MultiMarkdown、 Maruku等。这些衍生版本要么基于工具，如Pandoc；要么基于网站，如GitHub和Wikipedia，在语法上基本兼容，但在一些语法和渲染效果上有改动。[^2][@noauthor_markdown__nodate]</p></blockquote><p>看到这里很懵是不是？但是如果换种说法：DOC格式和markdown本是同根生，是不是就容易多了？DOC所有关键信息等均使用XML格式，而这个格式和markdown其实本质类似。区别是：</p><p>（图片）</p><p>哪个易读性更好一看便知。用markdown你能做什么？</p><ul><li>记笔记</li><li>写网页</li><li>其他</li></ul><h3 id="markdown编辑器推荐"><a href="#markdown编辑器推荐" class="headerlink" title="markdown编辑器推荐"></a>markdown编辑器推荐</h3><h4 id="Typora（全平台）"><a href="#Typora（全平台）" class="headerlink" title="Typora（全平台）"></a>Typora（全平台）</h4><p>所见即所得，只有用过的才知道多好用。功能最全。但是不能进行扩展。其实已有的功能已经非常够用了。</p><h4 id="Mu（Mac-OS）"><a href="#Mu（Mac-OS）" class="headerlink" title="Mu（Mac OS）"></a>Mu（Mac OS）</h4><p>同样所见即所得，但是功能性比Typora弱。</p><h4 id="Atom-或者-Visual-Studio-Code（全平台）"><a href="#Atom-或者-Visual-Studio-Code（全平台）" class="headerlink" title="Atom 或者 Visual Studio Code（全平台）"></a>Atom 或者 Visual Studio Code（全平台）</h4><p>伪装成IDE的文本编辑器，一般程序员以及编程爱好者无人不知，有巨量的插件扩展。能玩游戏看B站听歌聊QQ微信微博。摸鱼神器。</p><h2 id="pandoc"><a href="#pandoc" class="headerlink" title="pandoc"></a>pandoc</h2><blockquote><p>Pandoc是由John MacFarlane开发的标记语言转换工具，可实现不同标记语言间的格式转换，堪称该领域中的“瑞士军刀”。Pandoc使用Haskell语言编写，以命令行形式实现与用户的交互，可支持多种操作系统。[^3][@noauthor_pandoc_2017]</p></blockquote><p>那么它能处理的格式到底有多少种：</p><p>（图片）</p><p>图片上一个节点代表它能处理的一种格式。</p><h2 id="富文本"><a href="#富文本" class="headerlink" title="富文本"></a>富文本</h2><blockquote><p>富文本格式（Rich Text Format, 一般简称为RTF）是由微软公司开发的跨平台文档格式。一般的格式设置，比如字体和段落设置，页面设置等等信息都可以存在RTF格式中。[^1][@noauthor___nodate]</p></blockquote><p>这是狭义上的富文本，那么广义上的富文本是什么呢？就是所谓的当你编辑时所见即所得。没有谁希望编辑一个文件时还需要像二十年前一样还需要修修改源代码的吧？因此富文本及富文本编辑器的发明是非常重要的革新。但是这是不是意味着纯文本会消失呢？并不。富文本有着富文本的易用，纯文本有着纯文本的轻便。至少来讲，我可不希望在写作前写作后还需要花费大量时间插入参考资料或者调整文本的排版字体大小还是怎样。尤其在写作中如果遇到需要处理的图片，大部分人应该是相当头痛的——既需要照顾排版又不不希望切断思路。那么对于大多数只用到了Microsoft Office Word以及OneNote基础功能的人来说无论使用什么来编辑文档其实都差不了多少。</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><h2 id="Markdown基础"><a href="#Markdown基础" class="headerlink" title="Markdown基础"></a>Markdown基础</h2><p>请不要把markdown视为非常可怕的东西。其实它非常容易掌握，而且对于使用者很友好——因为你在写作时的思路不会被打断，所有格式使用的语法非常简洁并全部可以通过一些文本实现。</p><p>在使用之前，为了方便书写请确保你的输入法是处于半角状态（搜狗上是月牙和圆点，月牙为半角；微软拼音在设置里调整），使用半角输入会将你的输入速度无论是在是用什么都会提高一个等级。</p><h3 id="标题类"><a href="#标题类" class="headerlink" title="标题类"></a>标题类</h3><p>Markdown的标题很容易表示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 这是一级标题</span><br><span class="line">## 这时二级标题</span><br><span class="line">### 这是三级标题</span><br></pre></td></tr></table></figure><p>每多一级标题就可以增加一个“#”。具体支持到哪级目录需要看渲染工具的支持，理论上无限。</p><p><strong>注意：为了使格式生效请在“#”后记得加个空格</strong></p><h3 id="标注类"><a href="#标注类" class="headerlink" title="标注类"></a>标注类</h3><h4 id="文本上的标注"><a href="#文本上的标注" class="headerlink" title="文本上的标注"></a>文本上的标注</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*斜体*</span></span><br><span class="line"><span class="strong">**加粗**</span></span><br><span class="line"><span class="strong">***加粗的斜体**</span>*</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线<span class="xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>当然你也可以使用下划线替换“*”，效果是一样的。</p><h4 id="文内引用"><a href="#文内引用" class="headerlink" title="文内引用"></a>文内引用</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">代码：</span><br><span class="line">​<span class="code">```你的代码语言</span></span><br><span class="line"><span class="code">echo helloworld;</span></span><br><span class="line"><span class="code">​</span></span><br></pre></td></tr></table></figure><p>脚注：<br>这是一段实例文字。[^1]<br>[^1]: 这是实例文字的脚注，在生成的Word文档中会自动放置</p><p>尾注：<br>这是一段实例文字。[@example P33 Weearc]<br>Reference:<br>(自动生成，不需要动它)</p><p>下标：<br>~下标~</p><p>段落引用：</p><blockquote><p>你要引用的段落</p></blockquote><p>说明：引用完成时请多加一个回车（换行符），引用时尖括号后需要空格<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">以上是Markdown的基础语法部分，和普通六级专八词汇相比应该是简单的不是一星半点吧。</span><br><span class="line"></span><br><span class="line">### 链接类</span><br><span class="line"></span><br><span class="line">#### 图片</span><br><span class="line"></span><br><span class="line">```markdown</span><br><span class="line">![图片的说明](图片位置)</span><br></pre></td></tr></table></figure></p><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">链接的说明文字</span>](<span class="link">链接</span>)</span><br></pre></td></tr></table></figure><h2 id="markdown进阶"><a href="#markdown进阶" class="headerlink" title="markdown进阶"></a>markdown进阶</h2><h3 id="表格类"><a href="#表格类" class="headerlink" title="表格类"></a>表格类</h3><h5 id="基本表格（不含单元格合并）"><a href="#基本表格（不含单元格合并）" class="headerlink" title="基本表格（不含单元格合并）"></a>基本表格（不含单元格合并）</h5><p>基本的一个三乘三表格</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|title1|title2|title3|</span><br><span class="line">|:-----|:----:|-----:|</span><br><span class="line">|左侧对齐|居中|右侧对齐|</span><br><span class="line">|x|y|z|</span><br></pre></td></tr></table></figure><p>生成效果如下：</p><table><thead><tr><th style="text-align:left">title1</th><th style="text-align:center">title2</th><th style="text-align:right">title3</th></tr></thead><tbody><tr><td style="text-align:left">左侧对齐</td><td style="text-align:center">居中</td><td style="text-align:right">右侧对齐</td></tr><tr><td style="text-align:left">x</td><td style="text-align:center">y</td><td style="text-align:right">z</td></tr></tbody></table><h5 id="HTML表格（包含单元格合并的）"><a href="#HTML表格（包含单元格合并的）" class="headerlink" title="HTML表格（包含单元格合并的）"></a>HTML表格（包含单元格合并的）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列一<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>合并行<span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列一<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>合并列<span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> &gt;</span>行二列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> &gt;</span>行三列二<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：</p><table><br>    <tr><br>        <td>列一</td><br>        <td>列二</td><br>   </tr><br>   <tr><br>        <td colspan="2">合并行</td><br>   </tr><br>   <tr><br>        <td>列一</td><br>        <td>列二</td><br>   </tr><br>    <tr><br>        <td rowspan="2">合并列</td><br>        <td>行二列二</td><br>    </tr><br>    <tr><br>        <td>行三列二</td><br>    </tr><br></table><h3 id="公式类"><a href="#公式类" class="headerlink" title="公式类"></a>公式类</h3><p>此节主要包含数学公式，使用LaTeX数学公式语法。</p><h5 id="上标"><a href="#上标" class="headerlink" title="上标"></a>上标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">x^n</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>生成为：$x^n$</p><h5 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">C^2_3</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>选择数： $C^2_3$</p><h5 id="多项式"><a href="#多项式" class="headerlink" title="多项式"></a>多项式</h5><p>一个不包含tag的多项式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">T(n)=\begin&#123;cases&#125;</span><br><span class="line">\Theta(1)\quad n=1\\</span><br><span class="line">T(n-q)+\Theta(n) \quad n&gt;1</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>那么生成的公式如下：</p><p>$T(n)=\begin{cases}<br>\Theta(1)\quad n=1\<br>T(n-q)+\Theta(n) \quad n&gt;1<br>\end{cases}$</p><h5 id="矩阵及行列式"><a href="#矩阵及行列式" class="headerlink" title="矩阵及行列式"></a>矩阵及行列式</h5><p>一个包含tag的矩阵[@noauthor_markdown_nodate-1]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line"> \begin&#123;bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;bmatrix&#125; \tag&#123;1&#125;</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>$$<br>\begin{bmatrix}<br>   1 &amp; 2 &amp; 3 \<br>   4 &amp; 5 &amp; 6 \<br>   7 &amp; 8 &amp; 9 \<br>  \end{bmatrix} \tag{1}<br>$$</p><h5 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">J(\theta) = \frac&#123;1&#125;&#123;2m&#125;\sum_&#123;i=0&#125;^m(y^i - h_\theta(x^i))^2</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>生成的均方差公式为：</p><p>$J(\theta) = \frac{1}{2m}\sum_{i=0}^m(y^i - h_\theta(x^i))^2$</p><h5 id="还有很多…"><a href="#还有很多…" class="headerlink" title="还有很多…"></a>还有很多…</h5><p>LaTeX的数学公式异常灵活，其余语法可以自行查阅。</p><h3 id="信息类"><a href="#信息类" class="headerlink" title="信息类"></a>信息类</h3><h4 id="YAML样式的信息"><a href="#YAML样式的信息" class="headerlink" title="YAML样式的信息"></a>YAML样式的信息</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 这是一个标题</span><br><span class="line">time: 2019</span><br><span class="line">TOC: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>那么将生成自动目录以及包含时间信息的文章标题部分。</p><h4 id="XML样式信息"><a href="#XML样式信息" class="headerlink" title="XML样式信息"></a>XML样式信息</h4><p>如果你更熟悉XML，直接上吧骚年！</p><h3 id="导图类"><a href="#导图类" class="headerlink" title="导图类"></a>导图类</h3><p>使用markdown可以通过公式方式扩展来写流程图等。[@noauthor_typora__nodate]</p><h4 id="甘特图-时序图"><a href="#甘特图-时序图" class="headerlink" title="甘特图(时序图)"></a>甘特图(时序图)</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">​<span class="code">```mermaid</span></span><br><span class="line"><span class="code">  sequenceDiagram</span></span><br><span class="line"><span class="code">    participant 张三</span></span><br><span class="line"><span class="code">    participant 李四</span></span><br><span class="line"><span class="code">    张三-&gt;王五: 王五你好吗？</span></span><br><span class="line"><span class="code">    loop 健康检查</span></span><br><span class="line"><span class="code">        王五-&gt;王五: 与疾病战斗</span></span><br><span class="line"><span class="code">    end</span></span><br><span class="line"><span class="code">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span></span><br><span class="line"><span class="code">    李四--&gt;&gt;张三: 很好!</span></span><br><span class="line"><span class="code">    王五-&gt;李四: 你怎么样?</span></span><br><span class="line"><span class="code">    李四--&gt;王五: 很好!</span></span><br><span class="line"><span class="code">​</span></span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```mermaid</span><br><span class="line"></span><br><span class="line">%% 时序图例子,-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line"></span><br><span class="line">  <span class="attribute">sequenceDiagram</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line">    participant 张三</span><br><span class="line"></span><br><span class="line">    participant 李四</span><br><span class="line"></span><br><span class="line">    张三-&gt;王五: 王五你好吗？</span><br><span class="line"></span><br><span class="line">    loop 健康检查</span><br><span class="line"></span><br><span class="line">        王五-&gt;王五: 与疾病战斗</span><br><span class="line"></span><br><span class="line">    <span class="attribute">end</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span><br><span class="line"></span><br><span class="line">    李四--&gt;&gt;张三: 很好!</span><br><span class="line"></span><br><span class="line">    王五-&gt;李四: 你怎么样?</span><br><span class="line"></span><br><span class="line">    李四--&gt;王五: 很好!</span><br></pre></td></tr></table></figure><h4 id="美人鱼图"><a href="#美人鱼图" class="headerlink" title="美人鱼图"></a>美人鱼图</h4><p>一个示例的美人鱼图：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">​<span class="code">```mermaid</span></span><br><span class="line"><span class="code">graph TD</span></span><br><span class="line"><span class="code">client1--&gt;|read / write|SVN((SVN server))</span></span><br><span class="line"><span class="code">client2--&gt;|read only|SVN</span></span><br><span class="line"><span class="code">client3--&gt;|read / write|SVN</span></span><br><span class="line"><span class="code">client4--&gt;|read only|SVN</span></span><br><span class="line"><span class="code">client5(...)--&gt;SVN</span></span><br><span class="line"><span class="code">SVN---|store the data|sharedrive</span></span><br><span class="line"><span class="code">​</span></span><br></pre></td></tr></table></figure><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```mermaid</span><br><span class="line">graph TD</span><br><span class="line">client1--&gt;|<span class="type">read</span> / write|<span class="type">SVN</span>((SVN server))</span><br><span class="line">client2--&gt;|<span class="type">read</span> only|<span class="type">SVN</span></span><br><span class="line">client3--&gt;|<span class="type">read</span> / write|<span class="type">SVN</span></span><br><span class="line">client4--&gt;|<span class="type">read</span> only|<span class="type">SVN</span></span><br><span class="line">client5(...)--&gt;SVN</span><br><span class="line">SVN---|<span class="type">store</span> the data|<span class="type">sharedrive</span></span><br></pre></td></tr></table></figure><p>此处参考</p><h1 id="与文献管理工具互动"><a href="#与文献管理工具互动" class="headerlink" title="与文献管理工具互动"></a>与文献管理工具互动</h1><p>为什么不推荐使用word自带的文献管理器，因为Zotero以及Mandelay等文献管理器更加强大而且易用，包含比如PDF阅读、文献检索、文献关联设置、关键词等。</p><p>这里只对zotero文献管理器与markdown论文撰写的互动进行说明。</p><h2 id="Zotero"><a href="#Zotero" class="headerlink" title="Zotero"></a>Zotero</h2><p>首先到Zotero官网下载软件本体进行安装，然后按照提示安装浏览器插件。使用如下图：</p><p>（gif）</p><p>之后你可以在Zotero导出参考文献。导出时请选择Bibtex格式。需要生成参考文献时直接将导出的文件用文本编辑器打开并进行如下操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#一个实例的bib文件内容</span><br><span class="line">@misc&#123;noauthor_britains_nodate,</span><br><span class="line">        title = &#123;Britain’s imperial fantasies have given us &#123;Brexit&#125; &#123;\textbar&#125; &#123;Gary&#125; &#123;Younge&#125; &#123;\textbar&#125; &#123;Opinion&#125; &#123;\textbar&#125; &#123;The&#125; &#123;Guardian&#125;&#125;,</span><br><span class="line">        url = &#123;https://www.theguardian.com/commentisfree/2018/feb/03/imperial-fantasies-brexit-theresa-may&#125;,</span><br><span class="line">        urldate = &#123;2019-04-29&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里引用了参考[@noauthor<span class="emphasis">_britains_</span>nodate]</span><br></pre></td></tr></table></figure><p>即将包含“@misc”行行首大括号后内容前加“@”用中括号“[]”包裹放在需要引用的位置。生成文件时会自动在文末添加参考文献。[@noauthor_markdown_nodate]</p><h1 id="使用pandoc生成（最后一步了）"><a href="#使用pandoc生成（最后一步了）" class="headerlink" title="使用pandoc生成（最后一步了）"></a>使用pandoc生成（最后一步了）</h1><h2 id="pandoc安装"><a href="#pandoc安装" class="headerlink" title="pandoc安装"></a>pandoc安装</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Windows用户可以再官网下载EXE文件进行安装，并安装Python3使用pip安装pandoc的其他扩展。</p><h3 id="Mac-OS"><a href="#Mac-OS" class="headerlink" title="Mac OS"></a>Mac OS</h3><p>Mac用户可以使用brew来安装pandoc，并使用pip来添加扩展</p><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>重点说一下Linux，以证明使用Linux同样可以撰写论文。</p><p>大多数Linux发行版的仓库内包含pandoc，并默认有pip。使用pip可安装扩展。</p><h4 id="对于Arch-Linux"><a href="#对于Arch-Linux" class="headerlink" title="对于Arch Linux"></a>对于Arch Linux</h4><p>Arch Linux仓库中为pandoc以及LaTeX全部扩展进行了打包，直接安装，舒适便捷。</p><h2 id="生成方式"><a href="#生成方式" class="headerlink" title="生成方式"></a>生成方式</h2><p>在此文中，我们需要使用的插件为：pandoc-citeproc。</p><p>那么使用如下指令生成：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc --filter pandoc-citeproc --bibliography=你的文献库.bib --csl=chinese-gb7714-2005-numeric.csl  你的markdown文件.md -o  你的生成文件.docx</span><br></pre></td></tr></table></figure><p>其中“–csl”选项为需要生成参考文献的具体格式标准。</p><p>如果你单单只使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc  markdown文件.md -o  生成的文件</span><br></pre></td></tr></table></figure><p>将只进行最基础的文件渲染，比如转换为PDF格式。</p><h1 id="参考文献（示例）"><a href="#参考文献（示例）" class="headerlink" title="参考文献（示例）"></a>参考文献（示例）</h1><p>[^1]: <a href="https://baike.baidu.com/item/%E5%AF%8C%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F/1017816?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/%E5%AF%8C%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F/1017816?fr=aladdin</a> 富文本格式<br>[^2]: <a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/markdown/3245829?fr=aladdin</a> markdown<br>[^3]: <a href="https://zh.wikipedia.org/wiki/Pandoc" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/Pandoc</a> Pandoc</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;谁又说不可以呢？&lt;/p&gt;
    
    </summary>
    
      <category term="实用工具" scheme="https://blog.weearc.top/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="markdown" scheme="https://blog.weearc.top/tags/markdown/"/>
    
      <category term="pandoc" scheme="https://blog.weearc.top/tags/pandoc/"/>
    
      <category term="zotero" scheme="https://blog.weearc.top/tags/zotero/"/>
    
  </entry>
  
  <entry>
    <title>hexo主题迁移and折腾记</title>
    <link href="https://blog.weearc.top/posts/6009.html"/>
    <id>https://blog.weearc.top/posts/6009.html</id>
    <published>2019-04-06T07:25:05.000Z</published>
    <updated>2019-08-06T22:36:12.890Z</updated>
    
    <content type="html"><![CDATA[<p>老实说，其实为什么突然又开始折腾折腾主题了呢…….因为<strong><em>用NexT的人实在太多了</em></strong>。而我又不想让别人打开发现“和某个某个人的很像”。那样就失去了折腾的必要。因此我决定切换主题。另：本文在调整的相对安逸之前会持续更新。</p><a id="more"></a><p>这个目标主题<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a>，也是早就看上的，但是考虑到next实在太方便了才没能有勇气换过去。直到最近假期才敢小小的折腾一下。在这里感谢一下将这个主题移植到<a href="https://hexo.io" target="_blank" rel="noopener">hexo</a>博客系统的大大。如果有机会的话我要尝试把它移植到<a href="https://gohugo.io" target="_blank" rel="noopener">HUGO</a>上看看。稍微小小的看了一下，虽然用的人很多。但是因为结构不算复杂，而且pug格式也方便和纯HTML进行转换，因此可以随时随地添加自己喜欢的插件，把博客改造成自己中意的样子。接下来尽可能简单的并详细的介绍下改造以及部署流程。</p><h1 id="主体部分"><a href="#主体部分" class="headerlink" title="主体部分"></a>主体部分</h1><h2 id="hexo部署"><a href="#hexo部署" class="headerlink" title="hexo部署"></a>hexo部署</h2><p>这个我想既然会看这篇文章的话至少说明回去读<a href="https://hexo.io/docs/" target="_blank" rel="noopener">hexo的文档</a>吧！但是以防万一还是从基础开始。</p><p>首先配置好nodejs环境，这个绝对不会再写了，无论是哪个平台教程都多得很。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add hexo-cli</span><br></pre></td></tr></table></figure><p>这样就部署完成了hexo本体。像我一样做过系统迁移的人，可能需要直接在博客工程文件文件夹内执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>然后参考文档建立初始站点，此时应该是使用了landscape主题。那么接下来填写好hexo的_config.yml相关内容。这部分的各个参数请直接参考hexo官方介绍。因为几乎都是自然语言，因此并不难处理。</p><h2 id="Maupassant主题部署"><a href="#Maupassant主题部署" class="headerlink" title="Maupassant主题部署"></a>Maupassant主题部署</h2><p>和大多数hexo引擎的主题采用swig格式的模版不同，Maupassant使用的是pug格式的模版，这个之前也说过了。这种格式并没有比起原生HTML来的更有什么优势。但是可以单独罗列各个部分组件可以更方便的互相拼凑。</p><p>按照README，执行一下命令进行部署（我权当此时你仍在工程文件的根目录下）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line">$ yarn add hexo-renderer-pug</span><br><span class="line">$ yarn add hexo-renderer-sass</span><br></pre></td></tr></table></figure><p>此时hexo应该有能力渲染pug模版的页面了。</p><p>接下来仍然是根据自己需求修改_config.yml文件。这部分也没什么好说的。</p><h1 id="开始魔改"><a href="#开始魔改" class="headerlink" title="开始魔改"></a>开始魔改</h1><p>为什么说是魔改，因为都是只涉及到前端所需要的代码，相对容易修改和调试，只要稍花点心思就可以调整成自己想要的样子。</p><h2 id="修改永久链接-amp-添加评论"><a href="#修改永久链接-amp-添加评论" class="headerlink" title="修改永久链接&amp;添加评论"></a>修改永久链接&amp;添加评论</h2><p>首先是修改评论系统。之前已知使用Disqus!作为评论系统的，但是由于众所周知的原因，这货并没想象的那么棒，那么需要一个相对折中的方案。最开始想选择更为流行的Gitment，但是作者服务器到期了，因此更换为GitTalk。如果只是简单的添加评论系统的话并不能称得上是魔改。如果各位仔细观察的话会发现hexo的文章链接形式都是<strong>时间+文章名</strong>，这样就难免出现比如中文标题的文章不能初始化评论的问题。</p><p>因此这时候需要用到这款插件：hexo-abbrlink。主要作用是将原本非常长的文章链接修改成比较短的、数字加字母的随机生成的链接。</p><p>执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add hexo-abbrlink</span><br></pre></td></tr></table></figure><p>添加该插件。然后修改站点的_config.yml：</p><p>添加内容：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#abbrlink</span></span><br><span class="line"><span class="attr">abbrink:</span></span><br><span class="line"><span class="attr">  alg:</span> <span class="string">crc32</span></span><br><span class="line"><span class="attr">  rep:</span> <span class="string">dec</span></span><br></pre></td></tr></table></figure><p>并修改永久链接样式：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span></span><br></pre></td></tr></table></figure><p>这时候重新生成饮下会发现所有文章链接变成了相对短的链接。而且这款插件会在生成新post时候自动添加选项。非常方便。如果不放心的话可以修改post模版文件。</p><h3 id="修改文章文件名"><a href="#修改文章文件名" class="headerlink" title="修改文章文件名"></a>修改文章文件名</h3><p>为什么要单列出来这个，因为我们有了addrlink这个好东西。但是无论是用什么来管理文章的话，如果全部是带有下划线或者短杠的文件名的话并不利于管理。因此修改站点配置文件_config.yml：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year-:month-:day-:title.md</span> <span class="comment"># File name of new posts</span></span><br></pre></td></tr></table></figure><h2 id="添加进度条效果"><a href="#添加进度条效果" class="headerlink" title="添加进度条效果"></a>添加进度条效果</h2><p>这个其实应该是不算难的。因为只涉及到修改CSS部分以及引入pace.js。</p><blockquote><p> 注：以下全部都涉及到主题模版的修改，请全部在主题文件夹进行</p></blockquote><p>修改head.pug：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> //- 插入进度条</span><br><span class="line"> script(src='//cdn.bootcss.com/pace/1.0.2/pace.min.js')</span><br><span class="line"> link(href='//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css', rel='stylesheet')</span><br><span class="line"> style.</span><br><span class="line">   .pace .pace-progress &#123;</span><br><span class="line">   background: #1abc9c;</span><br><span class="line">   height: 3px;</span><br><span class="line">   &#125;</span><br><span class="line">   .pace .pace-progress-inner &#123;</span><br><span class="line">   box-shadow: 0 0 10px #1abc9c, 0 0 5px     #1abc9c;</span><br><span class="line">   &#125;</span><br><span class="line">   .pace .pace-activity &#123;</span><br><span class="line">   border-top-color: #1abc9c; </span><br><span class="line">   border-left-color: #1abc9c; </span><br><span class="line">   &#125;</span><br><span class="line">//- 插入进度掉end</span><br></pre></td></tr></table></figure><p>如果实在是无法手写pug的话可以先考虑写成HTML再用转换工具进行转换。</p><h2 id="添加点击的烟花效果"><a href="#添加点击的烟花效果" class="headerlink" title="添加点击的烟花效果"></a>添加点击的烟花效果</h2><p>同样修改head.pug，添加如下行：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//- 烟花点击效果</span><br><span class="line">    if theme.fireworks</span><br><span class="line">      canvas.fireworks(style='position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;')</span><br><span class="line">        script(type='text/javascript', src='//cdn.bootcss.com/animejs/2.2.0/anime.min.js')</span><br><span class="line">        script(type='text/javascript', src='/js/fireworks.js')</span><br><span class="line">//- 烟花点击效果end</span><br></pre></td></tr></table></figure><p>在source/js/下添加fireworks.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    pointerX = (e.clientX || e.touches[<span class="number">0</span>].clientX) - canvasEl.getBoundingClientRect().left, pointerY = e.clientY || e.touches[<span class="number">0</span>].clientY - canvasEl.getBoundingClientRect().top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">var</span> t = anime.random(<span class="number">0</span>, <span class="number">360</span>) * <span class="built_in">Math</span>.PI / <span class="number">180</span>,</span><br><span class="line">        a = anime.random(<span class="number">50</span>, <span class="number">180</span>),</span><br><span class="line">        n = [<span class="number">-1</span>, <span class="number">1</span>][anime.random(<span class="number">0</span>, <span class="number">1</span>)] * a; <span class="keyword">return</span> &#123; <span class="attr">x</span>: e.x + n * <span class="built_in">Math</span>.cos(t), <span class="attr">y</span>: e.y + n * <span class="built_in">Math</span>.sin(t) &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.x = e, a.y = t, a.color = colors[anime.random(<span class="number">0</span>, colors.length - <span class="number">1</span>)], a.radius = anime.random(<span class="number">16</span>, <span class="number">32</span>), a.endPos = setParticuleDirection(a), a.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.beginPath(), ctx.arc(a.x, a.y, a.radius, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI, !<span class="number">0</span>), ctx.fillStyle = a.color, ctx.fill() &#125;, a &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.x = e, a.y = t, a.color = <span class="string">"#F00"</span>, a.radius = <span class="number">0.1</span>, a.alpha = <span class="number">0.5</span>, a.lineWidth = <span class="number">6</span>, a.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.globalAlpha = a.alpha, ctx.beginPath(), ctx.arc(a.x, a.y, a.radius, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI, !<span class="number">0</span>), ctx.lineWidth = a.lineWidth, ctx.strokeStyle = a.color, ctx.stroke(), ctx.globalAlpha = <span class="number">1</span> &#125;, a &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; e.animatables.length; t++) &#123; e.animatables[t].target.draw() &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">for</span> (<span class="keyword">var</span> a = createCircle(e, t), n = [], i = <span class="number">0</span>; i &lt; numberOfParticules; i++) &#123; n.push(createParticule(e, t)) &#125;</span><br><span class="line">    anime.timeline().add(&#123; <span class="attr">targets</span>: n, <span class="attr">x</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">return</span> e.endPos.x &#125;, <span class="attr">y</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">return</span> e.endPos.y &#125;, <span class="attr">radius</span>: <span class="number">0.1</span>, <span class="attr">duration</span>: anime.random(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">"easeOutExpo"</span>, <span class="attr">update</span>: renderParticule &#125;).add(&#123; <span class="attr">targets</span>: a, <span class="attr">radius</span>: anime.random(<span class="number">80</span>, <span class="number">160</span>), <span class="attr">lineWidth</span>: <span class="number">0</span>, <span class="attr">alpha</span>: &#123; <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">easing</span>: <span class="string">"linear"</span>, <span class="attr">duration</span>: anime.random(<span class="number">600</span>, <span class="number">800</span>) &#125;, <span class="attr">duration</span>: anime.random(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">"easeOutExpo"</span>, <span class="attr">update</span>: renderParticule, <span class="attr">offset</span>: <span class="number">0</span> &#125;) &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a; <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">var</span> n = <span class="keyword">this</span>,</span><br><span class="line">            i = <span class="built_in">arguments</span>;</span><br><span class="line">        clearTimeout(a), a = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; e.apply(n, i) &#125;, t) &#125; &#125;</span><br><span class="line"><span class="keyword">var</span> canvasEl = <span class="built_in">document</span>.querySelector(<span class="string">".fireworks"</span>);</span><br><span class="line"><span class="keyword">if</span> (canvasEl) &#123; <span class="keyword">var</span> ctx = canvasEl.getContext(<span class="string">"2d"</span>),</span><br><span class="line">        numberOfParticules = <span class="number">30</span>,</span><br><span class="line">        pointerX = <span class="number">0</span>,</span><br><span class="line">        pointerY = <span class="number">0</span>,</span><br><span class="line">        tap = <span class="string">"mousedown"</span>,</span><br><span class="line">        colors = [<span class="string">"#FF1461"</span>, <span class="string">"#18FF92"</span>, <span class="string">"#5A87FF"</span>, <span class="string">"#FBF38C"</span>],</span><br><span class="line">        setCanvasSize = debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; canvasEl.width = <span class="number">2</span> * <span class="built_in">window</span>.innerWidth, canvasEl.height = <span class="number">2</span> * <span class="built_in">window</span>.innerHeight, canvasEl.style.width = <span class="built_in">window</span>.innerWidth + <span class="string">"px"</span>, canvasEl.style.height = <span class="built_in">window</span>.innerHeight + <span class="string">"px"</span>, canvasEl.getContext(<span class="string">"2d"</span>).scale(<span class="number">2</span>, <span class="number">2</span>) &#125;, <span class="number">500</span>),</span><br><span class="line">        render = anime(&#123; <span class="attr">duration</span>: <span class="number">1</span> / <span class="number">0</span>, <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvasEl.width, canvasEl.height) &#125; &#125;);</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(tap, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="string">"sidebar"</span> !== e.target.id &amp;&amp; <span class="string">"toggle-sidebar"</span> !== e.target.id &amp;&amp; <span class="string">"A"</span> !== e.target.nodeName &amp;&amp; <span class="string">"IMG"</span> !== e.target.nodeName &amp;&amp; (render.play(), updateCoords(e), animateParticules(pointerX, pointerY)) &#125;, !<span class="number">1</span>), setCanvasSize(), <span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>, setCanvasSize, !<span class="number">1</span>) &#125;</span><br><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>) </span>&#123; pointerX = (e.clientX || e.touches[<span class="number">0</span>].clientX) - canvasEl.getBoundingClientRect().left, pointerY = e.clientY || e.touches[<span class="number">0</span>].clientY - canvasEl.getBoundingClientRect().top &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">var</span> t = anime.random(<span class="number">0</span>, <span class="number">360</span>) * <span class="built_in">Math</span>.PI / <span class="number">180</span>,</span><br><span class="line">        a = anime.random(<span class="number">50</span>, <span class="number">180</span>),</span><br><span class="line">        n = [<span class="number">-1</span>, <span class="number">1</span>][anime.random(<span class="number">0</span>, <span class="number">1</span>)] * a; <span class="keyword">return</span> &#123; <span class="attr">x</span>: e.x + n * <span class="built_in">Math</span>.cos(t), <span class="attr">y</span>: e.y + n * <span class="built_in">Math</span>.sin(t) &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.x = e, a.y = t, a.color = colors[anime.random(<span class="number">0</span>, colors.length - <span class="number">1</span>)], a.radius = anime.random(<span class="number">16</span>, <span class="number">32</span>), a.endPos = setParticuleDirection(a), a.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.beginPath(), ctx.arc(a.x, a.y, a.radius, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI, !<span class="number">0</span>), ctx.fillStyle = a.color, ctx.fill() &#125;, a &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.x = e, a.y = t, a.color = <span class="string">"#F00"</span>, a.radius = <span class="number">0.1</span>, a.alpha = <span class="number">0.5</span>, a.lineWidth = <span class="number">6</span>, a.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.globalAlpha = a.alpha, ctx.beginPath(), ctx.arc(a.x, a.y, a.radius, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI, !<span class="number">0</span>), ctx.lineWidth = a.lineWidth, ctx.strokeStyle = a.color, ctx.stroke(), ctx.globalAlpha = <span class="number">1</span> &#125;, a &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; e.animatables.length; t++) &#123; e.animatables[t].target.draw() &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">for</span> (<span class="keyword">var</span> a = createCircle(e, t), n = [], i = <span class="number">0</span>; i &lt; numberOfParticules; i++) &#123; n.push(createParticule(e, t)) &#125;</span><br><span class="line">    anime.timeline().add(&#123; <span class="attr">targets</span>: n, <span class="attr">x</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">return</span> e.endPos.x &#125;, <span class="attr">y</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="keyword">return</span> e.endPos.y &#125;, <span class="attr">radius</span>: <span class="number">0.1</span>, <span class="attr">duration</span>: anime.random(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">"easeOutExpo"</span>, <span class="attr">update</span>: renderParticule &#125;).add(&#123; <span class="attr">targets</span>: a, <span class="attr">radius</span>: anime.random(<span class="number">80</span>, <span class="number">160</span>), <span class="attr">lineWidth</span>: <span class="number">0</span>, <span class="attr">alpha</span>: &#123; <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">easing</span>: <span class="string">"linear"</span>, <span class="attr">duration</span>: anime.random(<span class="number">600</span>, <span class="number">800</span>) &#125;, <span class="attr">duration</span>: anime.random(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">"easeOutExpo"</span>, <span class="attr">update</span>: renderParticule, <span class="attr">offset</span>: <span class="number">0</span> &#125;) &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e, t</span>) </span>&#123; <span class="keyword">var</span> a; <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">var</span> n = <span class="keyword">this</span>,</span><br><span class="line">            i = <span class="built_in">arguments</span>;</span><br><span class="line">        clearTimeout(a), a = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; e.apply(n, i) &#125;, t) &#125; &#125;</span><br><span class="line"><span class="keyword">var</span> canvasEl = <span class="built_in">document</span>.querySelector(<span class="string">".fireworks"</span>);</span><br><span class="line"><span class="keyword">if</span> (canvasEl) &#123;</span><br><span class="line">    <span class="keyword">var</span> ctx = canvasEl.getContext(<span class="string">"2d"</span>),</span><br><span class="line">        numberOfParticules = <span class="number">30</span>,</span><br><span class="line">        pointerX = <span class="number">0</span>,</span><br><span class="line">        pointerY = <span class="number">0</span>,</span><br><span class="line">        tap = <span class="string">"mousedown"</span>,</span><br><span class="line">        colors = [<span class="string">"#FF1461"</span>, <span class="string">"#18FF92"</span>, <span class="string">"#5A87FF"</span>, <span class="string">"#FBF38C"</span>],</span><br><span class="line">        setCanvasSize = debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; canvasEl.width = <span class="number">2</span> * <span class="built_in">window</span>.innerWidth, canvasEl.height = <span class="number">2</span> * <span class="built_in">window</span>.innerHeight, canvasEl.style.width = <span class="built_in">window</span>.innerWidth + <span class="string">"px"</span>, canvasEl.style.height = <span class="built_in">window</span>.innerHeight + <span class="string">"px"</span>, canvasEl.getContext(<span class="string">"2d"</span>).scale(<span class="number">2</span>, <span class="number">2</span>) &#125;, <span class="number">500</span>),</span><br><span class="line">        render = anime(&#123; <span class="attr">duration</span>: <span class="number">1</span> / <span class="number">0</span>, <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvasEl.width, canvasEl.height) &#125; &#125;);</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(tap, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="string">"sidebar"</span> !== e.target.id &amp;&amp; <span class="string">"toggle-sidebar"</span> !== e.target.id &amp;&amp; <span class="string">"A"</span> !== e.target.nodeName &amp;&amp; <span class="string">"IMG"</span> !== e.target.nodeName &amp;&amp; (render.play(), updateCoords(e), animateParticules(pointerX, pointerY)) &#125;, !<span class="number">1</span>), setCanvasSize(), <span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>, setCanvasSize, !<span class="number">1</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这个部分可以自己按照洗好做一定的修改，会有不一样的效果。</p><h2 id="添加不蒜子站点浏览数"><a href="#添加不蒜子站点浏览数" class="headerlink" title="添加不蒜子站点浏览数"></a>添加不蒜子站点浏览数</h2><p>修改footer.pug，并添加如下行：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">script(async='', src='https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js')</span><br><span class="line">  span<span class="meta">#busuanzi_container_site_pv</span></span><br><span class="line">    i.fa.fa-eye</span><br><span class="line">    <span class="string">| 访问量</span></span><br><span class="line">    span<span class="meta">#busuanzi_value_site_pv</span></span><br><span class="line">    <span class="string">| 次 |  </span></span><br><span class="line">  span<span class="meta">#busuanzi_container_site_uv</span></span><br><span class="line">    i.fa.fa-user-md</span><br><span class="line">    <span class="string">| 访客数</span></span><br><span class="line">    span<span class="meta">#busuanzi_value_site_uv</span></span><br><span class="line">    <span class="string">| 人</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br></pre></td></tr></table></figure><p>由于pug对空格敏感，因此空格多少可以相对容易的调整。</p><h2 id="添加clipboard-js"><a href="#添加clipboard-js" class="headerlink" title="添加clipboard.js"></a>添加clipboard.js</h2><p>(待完成)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;老实说，其实为什么突然又开始折腾折腾主题了呢…….因为&lt;strong&gt;&lt;em&gt;用NexT的人实在太多了&lt;/em&gt;&lt;/strong&gt;。而我又不想让别人打开发现“和某个某个人的很像”。那样就失去了折腾的必要。因此我决定切换主题。另：本文在调整的相对安逸之前会持续更新。&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://blog.weearc.top/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://blog.weearc.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>新年折腾记---从Manjaro迁移到Arch</title>
    <link href="https://blog.weearc.top/posts/30549.html"/>
    <id>https://blog.weearc.top/posts/30549.html</id>
    <published>2019-02-06T09:48:04.000Z</published>
    <updated>2019-07-08T20:12:30.143Z</updated>
    
    <content type="html"><![CDATA[<p>新的一年，热爱折腾的我当然是从折腾开始新的一年了….</p><a id="more"></a><p>在经过了各位arch大佬和Gentoo大佬一年的洗礼…我终于决定从Manjaro切换到Arch Linux了（没十足的把握千万别学我，Manjaro其实是个非常好的发行版，其实我也没啥把握就是了….）。</p><p>准备迁移过程中考虑了两个问题：</p><ol><li>我那快1800个软件包要怎么办</li><li>最初选择manjaro，主要是看中了manjaro对于内核切换的便利，以及方便的附加驱动的安装</li></ol><p>有关第一个问题，可以通过备份一遍软件列表来解决，但是有关问题二，就要比较头痛了，习惯了方便的一键切换再反过来熟悉一下这种方式未免有点“仿古”的感觉…</p><p>那么正常来做迁移，首先需要备份一下软件列表，根据<a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks#Install_packages_from_a_list" target="_blank" rel="noopener">archwiki</a>，我们需要用pacman导出一份列表，这里注意一下arch和manjaro的关系：manjaro的源，可以理解为大于arch的，也就是说对于arch的仓库，manjaro的一众自己的工具等都是“多余的”，但是介于我从aur也安了一部分包来看，aur和自己打包安装的那部分也要考虑进去。</p><p>因此在原有系统中执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Qqen选项备份的是除了aur和自己打包安装的以外的包</span></span><br><span class="line">pacman -Qqen &gt; listQqen.txt </span><br><span class="line"><span class="comment">#Qqem选项备份的是aur中的和自己打包安装的包，可以理解为Qqen的补集</span></span><br><span class="line">pacman -Qqem &gt; listQqem.txt</span><br></pre></td></tr></table></figure><p>这两个列表保存在主目录就好，之后会用到。</p><p>然后还是基础系统的安装，直接base和base-devel两个包组外加iw、wpa_supplicant两个包解决，然后走一遍常规的过程。</p><p>这个时候我们再考虑一下，对于manjaro是在源里的软件，对于arch应该是如同aur里的，因为我也使用了相当多archcn的包，因此记得添加archcn源。</p><p>然后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取arch中的存在的包</span></span><br><span class="line">pacman -S --needed $(comm -12 &lt;(pacman -Slq | sort) &lt;(sort listQqen.txt))</span><br><span class="line"><span class="comment">#获取aur里的包</span></span><br><span class="line">yaourt  -S --needed $(comm -12 &lt;(pacman -Slq | sort) &lt;(sort Qqem.txt))</span><br></pre></td></tr></table></figure><p>这时候剩下的包就是manjaro专有的了，如果你愿意的话也可以和我一样直接clone <a href="https://gitlab.manjaro.org/explore/groups" target="_blank" rel="noopener">manjaro</a>的那些包的源代码然后自己编译安装，这之后记得把相关的服务启动了，然后就大功告成了。重启一下看看是不是熟悉的界面又回来了。</p><p>后记：</p><p>貌似很多用arch的用户还在有着对manjaro的鄙视链啊…..但是有一点不得不说，就是该承认的非常用户友好的特性还是承认吧，都是linux用户互怼没啥好处。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;新的一年，热爱折腾的我当然是从折腾开始新的一年了….&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="linux" scheme="https://blog.weearc.top/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>怀念，甚想念，无法想念其一</title>
    <link href="https://blog.weearc.top/posts/32312.html"/>
    <id>https://blog.weearc.top/posts/32312.html</id>
    <published>2019-02-04T15:41:25.000Z</published>
    <updated>2019-07-08T20:12:30.177Z</updated>
    
    <content type="html"><![CDATA[<p>春节第一篇2333，顺便还是要吐槽一下，rime真心难调教，实在是太难受了，换回搜狗了。</p><a id="more"></a><p>第一篇按照习惯我也不会谈技术反正就我那点知识也没有什么好拿出来讲的。因此今天还是打算随意写一写，毕竟写的开心就完事了。</p><p>然后呢…不知道大家有没有接到过类似的短信：</p><blockquote><p>温馨提示:为守护三亚的蓝天白云，三亚全市严禁露天焚烧秸杆垃圾，三亚主城区及学校、医院、住宅小区等重点区域严禁燃放烟花爆竹，主城区公共场所严禁露天烧烤和祭祀烧纸，寺庙道观严禁燃烧高香。违者将予以处罚。请自觉遵守，共建生态文明三亚。—三亚市人民政府</p></blockquote><p>嘛，倒是一下子透露了我过年的地点，不过呢，倒是也接到重庆市政府类似的短信。保护环境嘛，没办法的事。可是仔细想一想，好像没像小时候那样过年有些时日了。</p><p>回想小时候，每年必定是过年的前几天开始，采买、打扫、准备过年需要用到的一些小玩意儿这些一样没少过。也在过年前几天把家里的窗帘全部卸下然后清洗，再一个个装回去。也曾学着用五洁粉然后对着白色人造石的窗台一顿猛擦直到全部都变亮变白位置……虽然看着麻烦实际也确实麻烦，但是却是在多少年以后的今天令人感觉还能感受到年味的那些回忆。等到春节当天，中午出门去祖父母家，和兄长姐姐一起玩，去放点小鞭儿，冰天雪地的把自己裹成肉丸子到楼下的大平台上去“作妖儿”，往垃圾道里扔二踢脚什么的也是没少干。回来吃年夜饭，年年都是那几个菜色不变样却也是吃不腻，挺奇怪的。而后回家包饺子，看看电视。</p><p>那个时候赵本山老师还是春晚的红人，小品也不像现在这么尬，动不动就煽情动不动就歌颂。过去春晚创造了不少梗，歌手们也都是真实的实力派，每一样节目都让人觉得不会看腻，就连后半夜的节目都非常有意思。如果现在春晚都为了挽救收视率而接着一些东风并且请一些实力派的歌手也好演员也好回到那个舞台，就算看到那那些熟悉的面孔我也是觉得没有必要再看下去了，尬得要死的东西我为什么不做点自己觉得有意义的事情而非要和春晚死磕呢？</p><p>我确实是相当恋旧，也知道所有东西不可能一成不变，不过还是觉得以前那种有过年气氛的过年只能活在记忆中实在是太可惜了。家里人都分散开了，今年也没能回去看祖母，祖父已经不在人世，很多事情不停地在变。越是想抓住想将那个那些个美好的时光据为己有，越是在发现它在眼前不断地消散的同时感觉心如刀绞。过去已经回不去了，一般都会在这个时间说“应该勇敢的面对未来”吧？但是老实说越是长大就越觉得一些事情不可思议，越觉得害怕面对未来，越想仅仅活在回忆中哪怕知道那些已经是梦，已经不可能在实现了。那么就没有办法了，总不能停下，未规划好的将来也需要考虑——不过不是出于个人意愿，而是出于“对自己负责”的责任。背负了那么多期望以及责任，既然已经背负起来了就不可能轻易地在将那些卸下去。责任就是责任，烙印一般的东西。</p><p>新的一年，愿各位身体健康，家庭和睦，工作顺利，学习进步。如果看完了我这么多牢骚话还没厌烦的话可以期待一下下一篇，不是牢骚也不是随笔，既然是技术博客那么技术类的不能少。新的一年希望自己能把坑填完，开个新坑，把日语复习一下最重要的是挂科的那几科一定要考过，真的不想再重修遭受那个罪了orz。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;春节第一篇2333，顺便还是要吐槽一下，rime真心难调教，实在是太难受了，换回搜狗了。&lt;/p&gt;
    
    </summary>
    
      <category term="杂记" scheme="https://blog.weearc.top/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="随笔" scheme="https://blog.weearc.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>搭建私人图床并使用</title>
    <link href="https://blog.weearc.top/posts/61150.html"/>
    <id>https://blog.weearc.top/posts/61150.html</id>
    <published>2019-02-02T15:27:37.000Z</published>
    <updated>2019-07-08T20:12:30.177Z</updated>
    
    <content type="html"><![CDATA[<p>其实还是挺好用的？但是，由于图床挂掉，此文内容基本已废，将就看倒还可以。</p><a id="more"></a><p><img src="http://picb.weearc.top/images/2019/02/02/0bd162d9f2d3572c94bb080b8b13632763d0c388.jpg" alt="0bd162d9f2d3572c94bb080b8b13632763d0c388.jpg"></p><p>如图所见！锵锵锵，自建了一个新图床。至于为什么这么做，主要还是因为腾讯云更改了收费及免费的条款，并且已有的vps不好好利用的话实在是资源浪费，所以决定自己建立一个算了。</p><h2 id="VPS准备"><a href="#VPS准备" class="headerlink" title="VPS准备"></a>VPS准备</h2><p>因为是要用作图库的VPS所以建议还是选择一个靠谱一些的服务商比较好，国内阿里云以及腾讯云都可以（毕竟学生优惠www）。如果可以的话建议选择storge instance之类的类型，特点是价格便宜并且硬盘空间很大。构架建议选择KVM，极度不推荐openVZ的机器。系统选择任意linux发行版都可以，既然都有能力弄主机，就别说连基础linux的操作都不会。</p><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>由于我们要使用的图床程序是<a href="https://chevereto.com/" target="_blank" rel="noopener">chevereto</a> ,按照<a href="https://chevereto.com/docs/requirements" target="_blank" rel="noopener">官方文档</a>的说明，使用LNMP是比较合适的。<a href="http://picb.weearc.top/image/Wah" target="_blank" rel="noopener"><img src="http://picb.weearc.top/images/2019/02/03/261b794faf0d9cee7a8b90c41d544ab7.png" alt="261b794faf0d9cee7a8b90c41d544ab7.png"></a></p><p>这里选择<a href="https://lnmp.org/download.html" target="_blank" rel="noopener">LNMP一键包</a>（其实也是我懒了）。LNMP那么容易配置就不细讲述了。主要需要注意的是<a href="https://www.phpmyadmin.net/" target="_blank" rel="noopener">phpMyAdmin</a>的一些坑。</p><p><a href="http://picb.weearc.top/image/gdo" target="_blank" rel="noopener"><img src="http://picb.weearc.top/images/2019/02/03/e865198482f4b22ae431bdc369ab3e79.md.png" alt="e865198482f4b22ae431bdc369ab3e79.md.png"></a></p><p>这个地方如果未选择相匹配的MySQL版本会导致无法远程连接到phpMyAdmin。因此请在选择版本时多加注意。<strong><em>另外安装完成时记得把/home/wwwroot/default/下的几个文件备份并清除。</em></strong></p><h2 id="安装chevereto"><a href="#安装chevereto" class="headerlink" title="安装chevereto"></a>安装chevereto</h2><p>这里我使用的是脚本安装方式，仍然是将脚本放到网站根目录即可。</p><blockquote><p>注意：记得检查脚本的所有者以及权限</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -lash </span><br><span class="line">chmod a+x index.php</span><br></pre></td></tr></table></figure><blockquote><p>如果正常的话你会得到index.php的所有者和组为<strong>www</strong>，权限为775或者777。</p></blockquote><p>所有步骤跟着向导就好，没有需要特殊注意的地方。</p><p>但是有一个地方需要注意以下，在新建mysql账户时请选择本机域（大概是这个，是localhost）这个地方以前在部署owncloud时就踩过，到现在才弄得比较明白。至此站点部署完毕。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;其实还是挺好用的？但是，由于图床挂掉，此文内容基本已废，将就看倒还可以。&lt;/p&gt;
    
    </summary>
    
      <category term="博客配套" scheme="https://blog.weearc.top/categories/%E5%8D%9A%E5%AE%A2%E9%85%8D%E5%A5%97/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
  </entry>
  
  <entry>
    <title>编译安装gcc6.1</title>
    <link href="https://blog.weearc.top/posts/51180.html"/>
    <id>https://blog.weearc.top/posts/51180.html</id>
    <published>2019-01-23T10:12:53.000Z</published>
    <updated>2019-07-08T20:12:30.177Z</updated>
    
    <content type="html"><![CDATA[<p>俗话说得好，一回生二回熟，但是时间长了也怕忘。离开了Gentoo那么久也懒得手动编译，但是偶尔也要复习一下为好。</p><a id="more"></a><h2 id="源码获取"><a href="#源码获取" class="headerlink" title="源码获取"></a>源码获取</h2><p>这个应该是最简单的了，只要你能找到个镜像站，里面镜像列表都差不多有GNU，里面有诸多项目的源代码，gcc源码也不例外。怎么获取，请自己看着办。</p><h2 id="展开源码"><a href="#展开源码" class="headerlink" title="展开源码"></a>展开源码</h2><p>正常操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvf gcc6.1.tar.xz</span><br></pre></td></tr></table></figure><h2 id="定位到源码目录"><a href="#定位到源码目录" class="headerlink" title="定位到源码目录"></a>定位到源码目录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> gcc6.1/</span><br></pre></td></tr></table></figure><p>建立编译的工作目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">makedir build</span><br></pre></td></tr></table></figure><p>建立工作目录的好处是可以避免编译过程中的中间文件污染源码（大概）。</p><h2 id="查看编译选项"><a href="#查看编译选项" class="headerlink" title="查看编译选项"></a>查看编译选项</h2><p>先简单观察一下Archlinux的gcc编译选项</p><blockquote><p>gcc 8.2.1</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用内建 specs。</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-linux-gnu/8.2.1/lto-wrapper</span><br><span class="line">目标：x86_64-pc-linux-gnu</span><br><span class="line">配置为：/build/gcc/src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --<span class="built_in">enable</span>-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --<span class="built_in">enable</span>-shared --<span class="built_in">enable</span>-threads=posix --<span class="built_in">enable</span>-libmpx --with-system-zlib --with-isl --<span class="built_in">enable</span>-__cxa_atexit --<span class="built_in">disable</span>-libunwind-exceptions --<span class="built_in">enable</span>-clocale=gnu --<span class="built_in">disable</span>-libstdcxx-pch --<span class="built_in">disable</span>-libssp --<span class="built_in">enable</span>-gnu-unique-object --<span class="built_in">enable</span>-linker-build-id --<span class="built_in">enable</span>-lto --<span class="built_in">enable</span>-plugin --<span class="built_in">enable</span>-install-libiberty --with-linker-hash-style=gnu --<span class="built_in">enable</span>-gnu-indirect-function --<span class="built_in">enable</span>-multilib --<span class="built_in">disable</span>-werror --<span class="built_in">enable</span>-checking=release --<span class="built_in">enable</span>-default-pie --<span class="built_in">enable</span>-default-ssp --<span class="built_in">enable</span>-cet=auto</span><br><span class="line">线程模型：posix</span><br><span class="line">gcc 版本 8.2.1 20181127 (GCC)</span><br></pre></td></tr></table></figure><blockquote><p>gcc 7.4.1</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用内建 specs。</span><br><span class="line">COLLECT_GCC=gcc-7</span><br><span class="line">COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-linux-gnu/7.4.1/lto-wrapper</span><br><span class="line">目标：x86_64-pc-linux-gnu</span><br><span class="line">配置为：/build/gcc7/src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --<span class="built_in">enable</span>-languages=c,c++,lto --<span class="built_in">enable</span>-shared --<span class="built_in">enable</span>-threads=posix --<span class="built_in">enable</span>-libmpx --with-system-zlib --with-isl --<span class="built_in">enable</span>-__cxa_atexit --<span class="built_in">disable</span>-libunwind-exceptions --<span class="built_in">enable</span>-clocale=gnu --<span class="built_in">disable</span>-libstdcxx-pch --<span class="built_in">disable</span>-libssp --<span class="built_in">enable</span>-gnu-unique-object --<span class="built_in">enable</span>-linker-build-id --<span class="built_in">enable</span>-lto --<span class="built_in">enable</span>-plugin --<span class="built_in">enable</span>-install-libiberty --with-linker-hash-style=gnu --<span class="built_in">enable</span>-gnu-indirect-function --<span class="built_in">disable</span>-werror --<span class="built_in">enable</span>-checking=release --<span class="built_in">enable</span>-default-pie --<span class="built_in">enable</span>-default-ssp --program-suffix=-7 --<span class="built_in">enable</span>-version-specific-runtime-libs</span><br><span class="line">线程模型：posix</span><br><span class="line">gcc 版本 7.4.1 20181207 (GCC)</span><br></pre></td></tr></table></figure><p>前面部分是：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/</span><br></pre></td></tr></table></figure><p>比较有用的部分只有 –prefix 选项。大致都可以看懂：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--prefix=一级目录 --libdir=二级目录1 --libexecdir=二级目录2 --mandir=二级目录3 --infodir=二级目录4 --with-bugurl=URL</span><br></pre></td></tr></table></figure><p>对于已经有了内置GCC的发行版，如果照搬选项则不是明智之举，因此按照个人需求将此处选项改为只定义一级目录即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--prefix=<span class="variable">$HOME</span>/GCC-6.1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;俗话说得好，一回生二回熟，但是时间长了也怕忘。离开了Gentoo那么久也懒得手动编译，但是偶尔也要复习一下为好。&lt;/p&gt;
    
    </summary>
    
      <category term="archlinux" scheme="https://blog.weearc.top/categories/archlinux/"/>
    
    
      <category term="archlinux" scheme="https://blog.weearc.top/tags/archlinux/"/>
    
      <category term="linux" scheme="https://blog.weearc.top/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>生活好了，但是我想回到以前</title>
    <link href="https://blog.weearc.top/posts/21989.html"/>
    <id>https://blog.weearc.top/posts/21989.html</id>
    <published>2019-01-07T12:39:40.000Z</published>
    <updated>2019-07-08T20:12:30.177Z</updated>
    
    <content type="html"><![CDATA[<h4 id="睡前聊一聊"><a href="#睡前聊一聊" class="headerlink" title="睡前聊一聊"></a>睡前聊一聊</h4><p>上次像这样写文章大概是很久以前的事情了，那我为何突然想起来这些？用我自己的话来讲，现在我才一点点感觉到，越是接触新技术、新产品，愈是变得更孤独。当然了，学技术可以当做一个例外，但是，如果可以不与这些新玩意儿接触，从某种角度上讲确实不想接触。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;睡前聊一聊&quot;&gt;&lt;a href=&quot;#睡前聊一聊&quot; class=&quot;headerlink&quot; title=&quot;睡前聊一聊&quot;&gt;&lt;/a&gt;睡前聊一聊&lt;/h4&gt;&lt;p&gt;上次像这样写文章大概是很久以前的事情了，那我为何突然想起来这些？用我自己的话来讲，现在我才一点点感觉到，越是接触新技
      
    
    </summary>
    
      <category term="杂谈" scheme="https://blog.weearc.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="杂谈" scheme="https://blog.weearc.top/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>android课设-蓝牙助手</title>
    <link href="https://blog.weearc.top/posts/37370.html"/>
    <id>https://blog.weearc.top/posts/37370.html</id>
    <published>2018-12-13T12:41:19.000Z</published>
    <updated>2019-07-08T20:12:30.130Z</updated>
    
    <content type="html"><![CDATA[<p>课设制作思路非常简单，就是制作一个蓝牙助手<br><a id="more"></a></p><h1 id="Bluetooth-status-helper课程设计"><a href="#Bluetooth-status-helper课程设计" class="headerlink" title="Bluetooth status helper课程设计"></a>Bluetooth status helper课程设计</h1><h2 id="设计缘由"><a href="#设计缘由" class="headerlink" title="设计缘由"></a>设计缘由</h2><p>众所周知目前安卓机器都可以很简单的获取蓝牙状态。但是由于一些原因我所使用的HTC U Ultra在更新到了Android Oreo以后失去了查看蓝牙状态的功能。因此在本设计中打算借助外部方式实现这个功能</p><h2 id="初步分析"><a href="#初步分析" class="headerlink" title="初步分析"></a>初步分析</h2><p>由于在使用Shizuku Manager时以及使用Brevent时发现可以通过扩展开发的方式调用部分系统API，这些API在一定程度上根据厂商的设计方式不同会无法直接调用或是被屏蔽掉。但是HTC在安卓5.0时代已经在系统中大量（完全）保留了原生Android的API，因此只要需要寻找这些接口的调用方式即可使用“被屏蔽”的功能。<br>在手机实际使用过程中发现缺失的功能如下：</p><ul><li>更改蓝牙可被发现状态</li><li>更改蓝牙可被发现状态的时长</li><li>(可选)查看的蓝牙列表</li></ul><h2 id="编写过程"><a href="#编写过程" class="headerlink" title="编写过程"></a>编写过程</h2><h3 id="蓝牙权限的获取"><a href="#蓝牙权限的获取" class="headerlink" title="蓝牙权限的获取"></a>蓝牙权限的获取</h3><p>蓝牙权限的获取应该是整个项目最核心的部分。只有实现了能够检测蓝牙开启状态并请求蓝牙权限其余功能才能使用。<br>在阅读<a href="https://developer.android.com/guide/topics/connectivity/bluetooth" target="_blank" rel="noopener">官方文档</a>时发现，在Android Oreo中，想要获取蓝牙权限，应该由四个权限组成：<br>即两个位置权限，两个蓝牙权限。即：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--AndroidManifest.xml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加蓝牙权限-开始 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH_ADMIN"</span> /&gt;</span><span class="comment">&lt;!--蓝牙权限--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;</span><span class="comment">&lt;!--Android位置权限&gt;</span></span><br><span class="line"><span class="comment">&lt;!--蓝牙权限添加-结束--&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>由于安卓新的安全机制，获取硬件的控制权限一般是视为危险行为（获取的权限为关键权限），因此需要动态调用权限申请以及权限的注册。</p></blockquote><h3 id="初始化蓝牙权限"><a href="#初始化蓝牙权限" class="headerlink" title="初始化蓝牙权限"></a>初始化蓝牙权限</h3><p>这一段直接上代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">setTitle(<span class="string">"蓝牙助手"</span>);</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (savedInstanceState == <span class="keyword">null</span> )&#123;</span><br><span class="line">                bltAdapter = ((BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE)).getAdapter();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//查看设备是否支持蓝牙功能</span></span><br><span class="line">                <span class="keyword">if</span> (bltAdapter != <span class="keyword">null</span> )&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//查看蓝牙是否开启</span></span><br><span class="line">                    <span class="keyword">if</span> (bltAdapter.isEnabled())&#123;</span><br><span class="line">                        <span class="comment">//若已经开启蓝牙则弹出一个提示已经开启</span></span><br><span class="line">                        String notification = <span class="string">"蓝牙已经开启"</span>;</span><br><span class="line">                        additional_inform=<span class="string">"蓝牙开启"</span>;</span><br><span class="line">                        information=logcat(information,additional_inform);</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,notification,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;<span class="keyword">else</span>   &#123;</span><br><span class="line">                        <span class="comment">//若未开启则弹出一个窗口请求开启权限</span></span><br><span class="line">                        Intent enablebtIntent = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);</span><br><span class="line">                        startActivityForResult(enablebtIntent, Constants.REQUEST_ENABLE_BT);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//当设备不支持蓝牙功能的时候点击按钮退出程序</span></span><br><span class="line">                    AlertDialog.Builder builder = <span class="keyword">new</span> AlertDialog.Builder(MainActivity.<span class="keyword">this</span>);</span><br><span class="line">                    builder.setTitle(<span class="string">"注意"</span>);</span><br><span class="line">                    builder.setMessage(<span class="string">"您的设备很可能不支持蓝牙功能"</span>);</span><br><span class="line">                    builder.setPositiveButton(<span class="string">"确定"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">                            finish();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    builder.show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>关键点解释：</p><ol><li>传感器一般是通过相应的Adapter来获取使用权，因此先注册BluetoothAdapter，并且方式为getAdapter()，获取系统的BluetoothService；</li><li>判断是否开启了蓝牙，如果未开启立即申请权限；</li></ol><h3 id="重写OnActivityResult"><a href="#重写OnActivityResult" class="headerlink" title="重写OnActivityResult()"></a>重写OnActivityResult()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode,Intent data)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode,resultCode, data);</span><br><span class="line">        <span class="keyword">switch</span> (requestCode)&#123;</span><br><span class="line">            <span class="keyword">case</span> Constants.REQUEST_ENABLE_BT:</span><br><span class="line">                <span class="keyword">if</span> (resultCode == RESULT_OK)&#123;</span><br><span class="line">                    additional_inform=<span class="string">"蓝牙开启"</span>;</span><br><span class="line">                    information=logcat(information,additional_inform);</span><br><span class="line">                    AlertDialog.Builder builder_welcome = <span class="keyword">new</span> AlertDialog.Builder(MainActivity.<span class="keyword">this</span>);</span><br><span class="line">                    builder_welcome.setTitle(<span class="string">""</span>);</span><br><span class="line">                    builder_welcome.setMessage(<span class="string">"感谢使用蓝牙助手！\n 这款工具面向部分ROM没有提供查看蓝牙状态功能的机型\n 如：HTC，LG\n 如果您的手机ROM拥有类似功能，您仍可尝试使用。"</span>);</span><br><span class="line">                    builder_welcome.setPositiveButton(<span class="string">"我知道了"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;&#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    builder_welcome.show();</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"蓝牙已开启"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"蓝牙助手需要蓝牙权限才可以正常运行"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span>:<span class="keyword">super</span>.onActivityResult(requestCode,resultCode,data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>这么写或者说这么改写的主要原因是蓝牙部分相当于使用了一个新的activity进行控制。</p><h4 id="与之匹配的contants-java"><a href="#与之匹配的contants-java" class="headerlink" title="与之匹配的contants.java"></a>与之匹配的contants.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_ENABLE_BT = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这一段主要还是根据重写的onActivityResult()设定默认的request Code。</p><h3 id="部分功能模块编写"><a href="#部分功能模块编写" class="headerlink" title="部分功能模块编写"></a>部分功能模块编写</h3><h4 id="蓝牙开关"><a href="#蓝牙开关" class="headerlink" title="蓝牙开关"></a>蓝牙开关</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mswitch.setOnCheckedChangeListener(<span class="keyword">new</span> CompoundButton.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="keyword">boolean</span> isChecked)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (isChecked)&#123;</span><br><span class="line">                    Intent enablebtIntent = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);</span><br><span class="line">                    startActivityForResult(enablebtIntent, Constants.REQUEST_ENABLE_BT);</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"蓝牙开启"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    additional_inform=<span class="string">"蓝牙开启"</span>;</span><br><span class="line">                    information=logcat(information,additional_inform);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    bltAdapter.disable();</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"蓝牙关闭"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    additional_inform=<span class="string">"蓝牙关闭"</span>;</span><br><span class="line">                    information=logcat(information,additional_inform);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h4 id="日志查看"><a href="#日志查看" class="headerlink" title="日志查看"></a>日志查看</h4><h5 id="模块主代码"><a href="#模块主代码" class="headerlink" title="模块主代码"></a>模块主代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">goTO_log.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Intent log = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,log_watcher.class);</span><br><span class="line">                Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">                bundle.putString(<span class="string">"information"</span>,information);</span><br><span class="line">                bundle.putString(<span class="string">"time"</span>,time);</span><br><span class="line">                log.putExtra(<span class="string">"bundle"</span>,bundle);</span><br><span class="line">                startActivity(log);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h5 id="查看Activity部分代码"><a href="#查看Activity部分代码" class="headerlink" title="查看Activity部分代码"></a>查看Activity部分代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">log_watcher</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    TextView log;</span><br><span class="line">    TextView log_time;</span><br><span class="line">    Button btn;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_log_watcher);&#123;</span><br><span class="line">            setTitle(<span class="string">"LOG"</span>);</span><br><span class="line">            Bundle bundle = getIntent().getBundleExtra(<span class="string">"bundle"</span>);</span><br><span class="line">            <span class="keyword">final</span> String[] information = &#123;bundle.getString(<span class="string">"information"</span>)&#125;;</span><br><span class="line">            <span class="keyword">final</span> String[] time = &#123;bundle.getString(<span class="string">"time"</span>)&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            log = (TextView) <span class="keyword">this</span>.findViewById(R.id.logcat);</span><br><span class="line">            log_time = (TextView) <span class="keyword">this</span>.findViewById(R.id.logcat_time);</span><br><span class="line">            btn = (Button) <span class="keyword">this</span>.findViewById(R.id.log_clean);</span><br><span class="line"></span><br><span class="line">            btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                    time[<span class="number">0</span>]=<span class="string">"\0"</span>;</span><br><span class="line">                    information[<span class="number">0</span>] =<span class="string">"\0"</span>;</span><br><span class="line"></span><br><span class="line">                    log.setText(<span class="string">"\0"</span>);</span><br><span class="line">                    log_time.setText(<span class="string">"\0"</span>);</span><br><span class="line">                    Toast.makeText(log_watcher.<span class="keyword">this</span>,<span class="string">"日志已清除"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            log.setText(information[<span class="number">0</span>]);</span><br><span class="line">            log_time.setText(time[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="传递log"><a href="#传递log" class="headerlink" title="传递log"></a>传递log</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">logcat</span><span class="params">(String information, String additional_inform)</span></span>&#123;</span><br><span class="line">        information=information+additional_inform+<span class="string">'\n'</span>;</span><br><span class="line">        additional_inform=<span class="string">"\0"</span>;</span><br><span class="line">        <span class="comment">//log.setText(information);</span></span><br><span class="line">        get_log_time();</span><br><span class="line">        <span class="keyword">return</span> information;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">get_log_time</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SimpleDateFormat sdf=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"HH:mm:ss"</span>);</span><br><span class="line">        java.util.Date date=<span class="keyword">new</span> java.util.Date();</span><br><span class="line">        time=time+<span class="string">"\n"</span>+sdf.format(date);</span><br><span class="line">        <span class="comment">//log_time.setText(time+"\n");</span></span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="设定可被发现时间"><a href="#设定可被发现时间" class="headerlink" title="设定可被发现时间"></a>设定可被发现时间</h4><p>如果认真研究过蓝牙的文档的话，不难发现蓝牙默认最长可被发现时间为300秒，并且在高版本Android上不能使用旧方法进行时间的延展，另外输入值的“null”以及“0”最终获取值并不相同，因此具体代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">cs_btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                String _timeout = editText.getText().toString();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(TextUtils.isEmpty(editText.getText()) )&#123;<span class="comment">//判断输入是否为空</span></span><br><span class="line"></span><br><span class="line">                    Intent dis_intent = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);</span><br><span class="line">                    dis_intent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, <span class="number">300</span>);</span><br><span class="line">                    startActivity(dis_intent);</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"设备参照默认最大时间:300秒设置可被发现"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                    additional_inform=<span class="string">"设备可被发现，时间"</span>+timeout+<span class="string">"秒"</span>;</span><br><span class="line">                    information=logcat(information,additional_inform);</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    timeout =Integer.parseInt(_timeout);</span><br><span class="line">                    <span class="comment">//若输入值不为空，采用安卓本身方法进行广播</span></span><br><span class="line">                    <span class="keyword">if</span> (timeout &lt;= <span class="number">300</span> &amp;&amp; timeout != <span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">                        Intent dis_intent = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);</span><br><span class="line">                        dis_intent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, timeout);</span><br><span class="line">                        startActivity(dis_intent);</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"设备目前已经可被发现，时间为"</span>+timeout+<span class="string">"秒"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                        additional_inform=<span class="string">"设备可被发现，时间"</span>+timeout+<span class="string">"秒"</span>;</span><br><span class="line">                        information=logcat(information,additional_inform);</span><br><span class="line"></span><br><span class="line">                    &#125; <span class="keyword">if</span> (timeout &gt; <span class="number">300</span>)&#123;</span><br><span class="line">                        <span class="comment">//若时间长于300秒，采用反射方式调用系统蓝牙可被发现的开关以达到延时目的</span></span><br><span class="line">                        setDiscoverableTimeout(timeout);</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"设备目前已经可被发现，时间为"</span>+timeout+<span class="string">"秒"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                        additional_inform=<span class="string">"设备可被发现，时间"</span>+timeout+<span class="string">"秒"</span>;</span><br><span class="line">                        information=logcat(information,additional_inform);</span><br><span class="line"></span><br><span class="line">                    &#125; <span class="keyword">if</span> (timeout == <span class="number">0</span>)&#123;</span><br><span class="line">                        Intent dis_intent = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);</span><br><span class="line">                        dis_intent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, <span class="number">120</span>);</span><br><span class="line">                        startActivity(dis_intent);</span><br><span class="line">                        timeout=<span class="number">120</span>;</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"输入值为0。设备目前已经可被发现，默认时间为"</span>+timeout+<span class="string">"秒"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                        additional_inform=<span class="string">"设备可被发现，时间"</span>+timeout+<span class="string">"秒"</span>;</span><br><span class="line">                        information=logcat(information,additional_inform);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h5 id="时间高于300秒时方法重写"><a href="#时间高于300秒时方法重写" class="headerlink" title="时间高于300秒时方法重写"></a>时间高于300秒时方法重写</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDiscoverableTimeout</span><span class="params">(<span class="keyword">int</span> timeout)</span> </span>&#123;</span><br><span class="line">    BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Method setDiscoverableTimeout = BluetoothAdapter.class.getMethod(<span class="string">"setDiscoverableTimeout"</span>, <span class="keyword">int</span>.class);</span><br><span class="line">        setDiscoverableTimeout.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        Method setScanMode =BluetoothAdapter.class.getMethod(<span class="string">"setScanMode"</span>, <span class="keyword">int</span>.class,<span class="keyword">int</span>.class);</span><br><span class="line">        setScanMode.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        setDiscoverableTimeout.invoke(adapter, timeout);</span><br><span class="line">        setScanMode.invoke(adapter, BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE,timeout);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>另外一定要注意：一定要抛异常，否则编译时会报错</p></blockquote><h4 id="蓝牙扫描"><a href="#蓝牙扫描" class="headerlink" title="蓝牙扫描"></a>蓝牙扫描</h4><p>另外说起蓝牙，应该难点就是在广播及扫描部分，但是由于本人理解并不深刻因此可能会出现问题。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">scan_btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">if</span> (bltAdapter.isEnabled())&#123;</span><br><span class="line">                   bltAdapter.enable();</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (bltAdapter.isDiscovering()) &#123;</span><br><span class="line">                   bltAdapter.cancelDiscovery();</span><br><span class="line">                   <span class="keyword">try</span> &#123;</span><br><span class="line">                       Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                   &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;<span class="comment">//利用睡眠阻隔系统重启扫描服务，并处理异常</span></span><br><span class="line">                       e.printStackTrace();</span><br><span class="line">                   &#125;</span><br><span class="line">                   bltAdapter.startDiscovery();</span><br><span class="line">               &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   bltAdapter.startDiscovery();</span><br><span class="line">               &#125;</span><br><span class="line">               Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"正在进行扫描..."</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">               Intent intent = <span class="keyword">new</span> Intent(bltAdapter.ACTION_REQUEST_ENABLE);</span><br><span class="line">               startActivity(intent);</span><br><span class="line">               <span class="comment">//扫描到了任一蓝牙设备</span></span><br><span class="line">               <span class="keyword">if</span>(BluetoothDevice.ACTION_FOUND.equals(intent.getAction()))</span><br><span class="line">               &#123;</span><br><span class="line">                   Log.v(TAG, <span class="string">"### BT BluetoothDevice.ACTION_FOUND ##"</span>);</span><br><span class="line">                   BluetoothDevice btDevice = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);</span><br><span class="line">                   <span class="keyword">if</span>(btDevice != <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">                       Log.v(TAG , <span class="string">"Name : "</span> + btDevice.getName() + <span class="string">" Address: "</span> + btDevice.getAddress());</span><br><span class="line">                       Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"Name:"</span>+btDevice.getName()+<span class="string">"Address:"</span>+btDevice.getAddress(),Toast.LENGTH_LONG).show();</span><br><span class="line"></span><br><span class="line">                   &#125;</span><br><span class="line">                   <span class="keyword">else</span> <span class="keyword">if</span>(BluetoothDevice.ACTION_BOND_STATE_CHANGED.equals(intent.getAction()))</span><br><span class="line">                   &#123;</span><br><span class="line">                       Log.v(TAG, <span class="string">"### BT ACTION_BOND_STATE_CHANGED ##"</span>);</span><br><span class="line">                       <span class="keyword">int</span> cur_bond_state = intent.getIntExtra(BluetoothDevice.EXTRA_BOND_STATE, BluetoothDevice.BOND_NONE);</span><br><span class="line">                       <span class="keyword">int</span> previous_bond_state = intent.getIntExtra(BluetoothDevice.EXTRA_PREVIOUS_BOND_STATE, BluetoothDevice.BOND_NONE);</span><br><span class="line">                       Log.v(TAG, <span class="string">"### cur_bond_state ##"</span> + cur_bond_state + <span class="string">" ~~ previous_bond_state"</span> + previous_bond_state);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">               additional_inform=<span class="string">"设备进行扫描"</span>;</span><br><span class="line">               information=logcat(information,additional_inform);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure><h4 id="取消扫描"><a href="#取消扫描" class="headerlink" title="取消扫描"></a>取消扫描</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mCancel.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">if</span> (bltAdapter.isDiscovering()) &#123;</span><br><span class="line">                   bltAdapter.cancelDiscovery();</span><br><span class="line">                   <span class="keyword">try</span> &#123;</span><br><span class="line">                       Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                   &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;<span class="comment">//利用睡眠阻隔系统重启扫描服务，并处理异常</span></span><br><span class="line">                       e.printStackTrace();</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"已取消"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure><h4 id="双击返回键退出"><a href="#双击返回键退出" class="headerlink" title="双击返回键退出"></a>双击返回键退出</h4><p>这一段也是对返回键的执行进行重写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBackPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> secondTime = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">if</span> (secondTime - firstTime &gt; <span class="number">2000</span>) &#123;</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"再按一次退出程序"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            firstTime = secondTime;</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>至于其他部分比如关于，非常简单没必要来说。</p><h3 id="RES部分"><a href="#RES部分" class="headerlink" title="RES部分"></a>RES部分</h3><p>这部分最具有说服力应该只有这一段代码，方法是在res部分新建style.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    android:shape="rectangle"&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#3dafeb"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"150dp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"5dp"</span> <span class="attr">android:dashWidth</span>=<span class="string">"5dp"</span> <span class="attr">android:color</span>=<span class="string">"#77d5cf"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"10dp"</span> <span class="attr">android:color</span>=<span class="string">"#84ebe5"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="顺便附上主activity的layout"><a href="#顺便附上主activity的layout" class="headerlink" title="顺便附上主activity的layout"></a>顺便附上主activity的layout</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:accessibilityHeading</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:minHeight</span>=<span class="string">"142dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/changeStatus"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"138dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"51dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">"148dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/round_botton_2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"change status"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.484"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/_switch"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"309dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"38dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"44dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">"2dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checked</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:showText</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"蓝牙"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOff</span>=<span class="string">"蓝牙关闭"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOn</span>=<span class="string">"蓝牙开启"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:checked</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/_scan"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"?android:attr/buttonStyle"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"159dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"160dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"132dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/circled_button"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fontFamily</span>=<span class="string">"sans-serif"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:lineSpacingExtra</span>=<span class="string">"10sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"SCAN"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:typeface</span>=<span class="string">"monospace"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/goTO_log"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"78dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"34dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"72dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"log"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"10sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/round_botton_2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.498"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/changeStatus"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/editText"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"128dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"54dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">"208dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ems</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:inputType</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAlignment</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.498"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mhelp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"42dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"39dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">"216dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/question_button"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"\?"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">"@+id/editText"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mCancel"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"28dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"28dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">"160dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/round_botton_2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"×"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"10sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.033"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">"@+id/changeStatus"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;课设制作思路非常简单，就是制作一个蓝牙助手&lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://blog.weearc.top/categories/Android/"/>
    
    
      <category term="Android" scheme="https://blog.weearc.top/tags/Android/"/>
    
  </entry>
  
</feed>
