<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>hexo 主题模板改造记录 2 | weearc 的个人博客</title>
<meta name="keywords" content="hexo, 模版, 响应式">
<meta name="description" content="本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。">
<meta name="author" content="weearc">
<link rel="canonical" href="https://blog.weearc.top/posts/2021-02-19-hexo-%E4%B8%BB%E9%A2%98%E6%A8%A1%E6%9D%BF%E6%94%B9%E9%80%A0%E8%AE%B0%E5%BD%95-2/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.da6b016a47bc2e02ef9b9e17d711ae4d8613e6be0c7d7674384a553be2b8ab9e.css" integrity="sha256-2msBake8LgLvm54X1xGuTYYT5r4MfXZ0OEpVO&#43;K4q54=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.weearc.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.weearc.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.weearc.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.weearc.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.weearc.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">

<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
<script type="text/javascript" src="/js/fireworks.js"></script>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="hexo 主题模板改造记录 2" />
<meta property="og:description" content="本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.weearc.top/posts/2021-02-19-hexo-%E4%B8%BB%E9%A2%98%E6%A8%A1%E6%9D%BF%E6%94%B9%E9%80%A0%E8%AE%B0%E5%BD%95-2/" /><meta property="og:image" content="https://blog.weearc.top/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-19T17:17:28+00:00" />
<meta property="article:modified_time" content="2021-02-19T17:17:28+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.weearc.top/papermod-cover.png"/>

<meta name="twitter:title" content="hexo 主题模板改造记录 2"/>
<meta name="twitter:description" content="本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://blog.weearc.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "hexo 主题模板改造记录 2",
      "item": "https://blog.weearc.top/posts/2021-02-19-hexo-%E4%B8%BB%E9%A2%98%E6%A8%A1%E6%9D%BF%E6%94%B9%E9%80%A0%E8%AE%B0%E5%BD%95-2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "hexo 主题模板改造记录 2",
  "name": "hexo 主题模板改造记录 2",
  "description": "本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。",
  "keywords": [
    "hexo", "模版", "响应式"
  ],
  "articleBody": "第一篇： hexo主题迁移and折腾记\n第二篇：hexo主题模版改造记录\n本来在第二篇的时间就打算把剪贴板这件事搞定的，但是一拖拖了好久。\n起因 要知道很多 Hexo 模版都提供剪贴板功能，以及备案号展示功能，但是我这模版太早期了，要是用最新版本的那么自己的代码部分又要全部重新弄，我是非常不愿意这么做。那就不如自己来实现了。然后搜了很久以后我看到这么一篇文章：在 Hexo 主題內新增程式碼片段複製功能 这就很好啊，很符合我的要求。于是动工。\n思路 如果直接修改模版的话似乎也不是不行，但是那样的话可能会极大降低灵活度，另外我在翻看页面文件的时候也并未发现指定代码框的部分，因此还是直接用 JS 操作 DOM Tree 吧。\n如图我们基本可以看到实际上应该一个 highlight 下面俩子节点一个 code 一个 gutter ，这样的话其实如果按照上面链接内文章操作的话是在这段的顶部套一个 DIV 然后插入按钮什么的进去，但是这样似乎对我的这个模板来说不是很友好，所以最后我会选择插入这么个玩意儿：\n1 2 3 4 5 6 7 \u003cdiv id=\"codeblock-titlebar\"\u003e \u003cspan id=\"lang-title\" style=\"font-size: 5px\"\u003e\u003c/span\u003e \u003cbutton class=\"codecopy-btn tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard\"\u003e \u003cspan class=\"fa fa-copy\" aria-hidden=\"true\"\u003e\u003c/span\u003e click to copy \u003c/button\u003e \u003c/div\u003e 这样就好多了，也不需要担心顶层按钮后面放不了东西背景空一块出来。\n操作 但是其实只要观察过就会知道，整个代码框的部分全部是动态的，也就是说我们无法根据元素进行定位，只能使用 hexo 给定的父级对象操作，然后针对每个对象都如此操作才能在每个代码框中都插入按钮。因此代码如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 var snippets = document.querySelectorAll('figure.highlight'); var htmlCopyButton = ` click to copy `; snippets.forEach(snippet =\u003e { var parent = snippet.parentNode; var wrapper = document.createElement('div'); parent.replaceChild(wrapper, snippet); wrapper.appendChild(snippet); wrapper.classList.add('code-highlight'); wrapper.firstChild.insertAdjacentHTML('beforebegin', htmlCopyButton); var lang = (snippet.classList[1] || 'code').toUpperCase(); wrapper.setAttribute('data-lang', lang); }); 虽然我们无法直接操作，但是把我们需要的部分包裹起来就好办很多。\n复制按钮定位 根据 clipboard.js 的文档，直接调用后复制的内容是所调用的标签下的内容，但是我们的按钮的话直接调用会不起任何作用的，还是得找个合适的节点，我们可以在查看一下 td标签的那一行：\n我们需要的部分是：\n1 \u003ctd class\"code\"\u003e...\u003c/td\u003e 上面一堆操作以后目前的结构是:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u003cdiv class=\"code-highlight\"\u003e \u003cdiv id=\"codeblock-titlebar\"\u003e \u003cspan\u003e...\u003c/span\u003e \u003cbutton\u003e...\u003c/button\u003e \u003c/div\u003e \u003cfigure class=\"highlight lang\"\u003e \u003ctable\u003e \u003ctbody\u003e \u003ctr\u003e \u003ctd class=\"gutter\"\u003e...\u003c/td\u003e \u003ctd class=\"code\"\u003e...\u003c/td\u003e \u003c/tr\u003e \u003c/tbody\u003e \u003c/table\u003e \u003c/figure\u003e \u003c/div\u003e 这就其实比较尴尬，大概顺序是我们的按钮的父级的下一个节点的子节点的子节点的子节点的第二个节点才是我们需要的内容（看着就绕），但是实际上确实没有好的处理办法（处理的越简洁速度越慢，详情请见廖雪峰的博客）。所以我们还是老老实实的写吧：\n1 2 3 4 5 6 7 var clipboard = new ClipboardJS('.codecopy-btn', { target: function(trigger) { var copytext = trigger.nextSibling.parentElement.nextElementSibling.querySelector('.code'); return copytext; // console.log(copytext); } }); 最后倒是投机取巧的直接找 .code 解决掉，不过速度也不差，就那样吧。关于 CSS 的部分倒是没有什么好说的，直接上代码：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 //@import \"fontawsome-all.min.css\"; // ref: https://github.com/primer/primer/blob/master/modules/primer-tooltips/lib/tooltips.scss .tooltipped { position: relative; } // This is the tooltip bubble .tooltipped::after { position: absolute; z-index: 1000000; display: none; padding: 0.5em 0.75em; -webkit-font-smoothing: subpixel-antialiased; color: #fff; text-align: center; text-decoration: none; text-shadow: none; text-transform: none; letter-spacing: normal; word-wrap: break-word; white-space: pre; pointer-events: none; content: attr(aria-label); background: #616161; border-radius: 3px; opacity: 0; } // This is the tooltip arrow .tooltipped::before { position: absolute; z-index: 1000001; display: none; width: 0; height: 0; color: #616161; pointer-events: none; content: ''; border: 6px solid transparent; opacity: 0; } // delay animation for tooltip @keyframes tooltip-appear { from { opacity: 0; } to { opacity: 1; } } // This will indicate when we'll activate the tooltip .tooltipped:hover, .tooltipped:active, .tooltipped:focus { \u0026::before, \u0026::after { display: inline-block; text-decoration: none; animation-name: tooltip-appear; animation-duration: 0.1s; animation-fill-mode: forwards; animation-timing-function: ease-in; } } // Tooltipped south .tooltipped-s, .tooltipped-sw { \u0026::after { top: 100%; right: 50%; margin-top: 6px; } \u0026::before { top: auto; right: 50%; bottom: -7px; margin-right: -6px; border-bottom-color: #616161; } } .tooltipped-sw::after { margin-right: -16px; } // Move the tooltip body to the center of the object. .tooltipped-s::after { transform: translateX(50%); } .codecopy-btn { border: none; display: inline-block; margin: 0 0; z-index: 999; float: right; background-color: #efefef; box-shadow: none; outline: none; height: 100%; } .codecopy-btn:hover{ background-color: #b6b6b6; text-decoration-color: #1b1f23; } @media print, screen and (max-width: 900px) { .codecopy-btn { font-size: 2vh; } } @media print, screen and (max-width: 850px) { .codecopy-btn { font-size: 1vh; } } .code-hightlight{ position: absolute; box-sizing: border-box; z-index: -5; } #codeblock-titlebar { margin: 0 0; padding: 0 0; width: 100%; height: 4vh; background-color: #efefef; position: relative; z-index: 9999; display: block; float: bottom; } 因为上面 titlebar 的作用是填补空白部分因此也就不怎么讲究了直接拉满即可。\n（未完）\n",
  "wordCount" : "638",
  "inLanguage": "zh",
  "datePublished": "2021-02-19T17:17:28Z",
  "dateModified": "2021-02-19T17:17:28Z",
  "author":{
    "@type": "Person",
    "name": "weearc"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.weearc.top/posts/2021-02-19-hexo-%E4%B8%BB%E9%A2%98%E6%A8%A1%E6%9D%BF%E6%94%B9%E9%80%A0%E8%AE%B0%E5%BD%95-2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "weearc 的个人博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.weearc.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.weearc.top" accesskey="h" title="weearc 的个人博客 (Alt + H)">weearc 的个人博客</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.weearc.top/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://blog.weearc.top/archives" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://blog.weearc.top/search/" title="检索">
                    <span>检索</span>
                </a>
            </li>
            <li>
                <a href="https://blog.weearc.top/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://blog.weearc.top/about/" title="关于我">
                    <span>关于我</span>
                </a>
            </li>
            <li>
                <a href="https://blog.weearc.top/frlink/" title="友链">
                    <span>友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main beforeScrollMaster" id="list-layout">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.weearc.top">主页</a>&nbsp;»&nbsp;<a href="https://blog.weearc.top/posts/">Posts</a></div>
    <h1 class="post-title">
      hexo 主题模板改造记录 2
    </h1>
    <div class="post-description">
      本来应该早几天写出来发出来的，但是那几天撸了个脚本，结果要写的也增加了啊...早知道能成为第一个工具轮子这么久就早点把博客完善了。
    </div>
    <div class="post-meta"><span title='2021-02-19 17:17:28 +0000 UTC'>二月 19, 2021</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;weearc

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e8%b5%b7%e5%9b%a0" aria-label="起因">起因</a></li>
                <li>
                    <a href="#%e6%80%9d%e8%b7%af" aria-label="思路">思路</a></li>
                <li>
                    <a href="#%e6%93%8d%e4%bd%9c" aria-label="操作">操作</a><ul>
                        
                <li>
                    <a href="#%e5%a4%8d%e5%88%b6%e6%8c%89%e9%92%ae%e5%ae%9a%e4%bd%8d" aria-label="复制按钮定位">复制按钮定位</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>第一篇： <a href="https://blog.weearc.top/posts/6009.html">hexo主题迁移and折腾记</a></p>
<p>第二篇：<a href="https://blog.weearc.top/posts/31380.html">hexo主题模版改造记录</a></p>
<p>本来在第二篇的时间就打算把剪贴板这件事搞定的，但是一拖拖了好久。</p>
<h1 id="起因">起因<a hidden class="anchor" aria-hidden="true" href="#起因">#</a></h1>
<p>要知道很多 Hexo 模版都提供剪贴板功能，以及备案号展示功能，但是我这模版太早期了，要是用最新版本的那么自己的代码部分又要全部重新弄，我是非常不愿意这么做。那就不如自己来实现了。然后搜了很久以后我看到这么一篇文章：<a href="https://titangene.github.io/article/hexo-copy-code-snippet-to-clipboard.html">在 Hexo 主題內新增程式碼片段複製功能</a> 这就很好啊，很符合我的要求。于是动工。</p>
<h1 id="思路">思路<a hidden class="anchor" aria-hidden="true" href="#思路">#</a></h1>
<p>如果直接修改模版的话似乎也不是不行，但是那样的话可能会极大降低灵活度，另外我在翻看页面文件的时候也并未发现指定代码框的部分，因此还是直接用 JS 操作 DOM Tree 吧。</p>
<p><img loading="lazy" src="https://blog-1256749229.cos.eu-frankfurt.myqcloud.com/2021.02.20/2021-02-19_20-30.png" alt="代码框部分"  />
</p>
<p>如图我们基本可以看到实际上应该一个 highlight 下面俩子节点一个 <code>code</code> 一个 <code>gutter</code> ，这样的话其实如果按照上面链接内文章操作的话是在这段的顶部套一个 DIV 然后插入按钮什么的进去，但是这样似乎对我的这个模板来说不是很友好，所以最后我会选择插入这么个玩意儿：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;codeblock-titlebar&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;lang-title&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;font-size: 5px&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;codecopy-btn tooltipped tooltipped-sw&#34;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&#34;Copy to clipboard&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;fa fa-copy&#34;</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">&#34;true&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            click to copy
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样就好多了，也不需要担心顶层按钮后面放不了东西背景空一块出来。</p>
<h1 id="操作">操作<a hidden class="anchor" aria-hidden="true" href="#操作">#</a></h1>
<p>但是其实只要观察过就会知道，整个代码框的部分全部是动态的，也就是说我们无法根据元素进行定位，只能使用 hexo 给定的父级对象操作，然后针对每个对象都如此操作才能在每个代码框中都插入按钮。因此代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">snippets</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;figure.highlight&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">htmlCopyButton</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;div id=&#34;codeblock-titlebar&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">        &lt;span id=&#34;lang-title&#34; style=&#34;font-size: 5px&#34;&gt;&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">        &lt;button class=&#34;codecopy-btn tooltipped tooltipped-sw&#34; aria-label=&#34;Copy to clipboard&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">            &lt;span class=&#34;fa fa-copy&#34; aria-hidden=&#34;true&#34;&gt;&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">            click to copy
</span></span></span><span class="line"><span class="cl"><span class="sb">        &lt;/button&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    `</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">snippets</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">snippet</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">snippet</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">parent</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">,</span> <span class="nx">snippet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wrapper</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">snippet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wrapper</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;code-highlight&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wrapper</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;beforebegin&#39;</span><span class="p">,</span> <span class="nx">htmlCopyButton</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">lang</span> <span class="o">=</span> <span class="p">(</span><span class="nx">snippet</span><span class="p">.</span><span class="nx">classList</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;code&#39;</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wrapper</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;data-lang&#39;</span><span class="p">,</span> <span class="nx">lang</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>虽然我们无法直接操作，但是把我们需要的部分包裹起来就好办很多。</p>
<h2 id="复制按钮定位">复制按钮定位<a hidden class="anchor" aria-hidden="true" href="#复制按钮定位">#</a></h2>
<p>根据 clipboard.js 的文档，直接调用后复制的内容是所调用的标签下的内容，但是我们的按钮的话直接调用会不起任何作用的，还是得找个合适的节点，我们可以在查看一下 <code>td</code>标签的那一行：</p>
<p>我们需要的部分是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="err">&#34;</span><span class="na">code</span><span class="err">&#34;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面一堆操作以后目前的结构是:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;code-highlight&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;codeblock-titlebar&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">figure</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;highlight lang&#34;</span><span class="p">&gt;</span><span class="c">&lt;!--实际lang会被替换为编程语言的名称--&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                	<span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;gutter&#34;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;code&#34;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这就其实比较尴尬，大概顺序是我们的按钮的父级的下一个节点的子节点的子节点的子节点的第二个节点才是我们需要的内容（看着就绕），但是实际上确实没有好的处理办法（处理的越简洁速度越慢，详情请见廖雪峰的博客）。所以我们还是老老实实的写吧：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">clipboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClipboardJS</span><span class="p">(</span><span class="s1">&#39;.codecopy-btn&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">target</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">trigger</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">var</span> <span class="nx">copytext</span> <span class="o">=</span> <span class="nx">trigger</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">nextElementSibling</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.code&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nx">copytext</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// console.log(copytext);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后倒是投机取巧的直接找 <code>.code</code> 解决掉，不过速度也不差，就那样吧。关于 <code>CSS</code> 的部分倒是没有什么好说的，直接上代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="c1">//@import &#34;fontawsome-all.min.css&#34;;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ref: https://github.com/primer/primer/blob/master/modules/primer-tooltips/lib/tooltips.scss
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// This is the tooltip bubble
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped</span><span class="nd">::after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">1000000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="kt">em</span> <span class="mi">0</span><span class="mf">.75</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">-webkit-font-smoothing</span><span class="o">:</span> <span class="n">subpixel-antialiased</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-shadow</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">letter-spacing</span><span class="o">:</span> <span class="ni">normal</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">word-wrap</span><span class="o">:</span> <span class="ni">break-word</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">white-space</span><span class="o">:</span> <span class="ni">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">pointer-events</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">content</span><span class="o">:</span> <span class="nf">attr</span><span class="p">(</span><span class="n">aria-label</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">background</span><span class="o">:</span> <span class="mh">#616161</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border-radius</span><span class="o">:</span> <span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// This is the tooltip arrow
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped</span><span class="nd">::before</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">1000001</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="mh">#616161</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">pointer-events</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border</span><span class="o">:</span> <span class="mi">6</span><span class="kt">px</span> <span class="ni">solid</span> <span class="ni">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// delay animation for tooltip
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">@keyframes</span> <span class="nt">tooltip-appear</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">from</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">to</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// This will indicate when we&#39;ll activate the tooltip
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped</span><span class="nd">:hover</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.tooltipped</span><span class="nd">:active</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.tooltipped</span><span class="nd">:focus</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">&amp;</span><span class="o">::</span><span class="n">before</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">  <span class="o">&amp;::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">inline-block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation-name</span><span class="o">:</span> <span class="n">tooltip-appear</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation-duration</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation-fill-mode</span><span class="o">:</span> <span class="ni">forwards</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation-timing-function</span><span class="o">:</span> <span class="ni">ease-in</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Tooltipped south
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped-s</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.tooltipped-sw</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">&amp;</span><span class="nd">::after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">top</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">right</span><span class="o">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">margin-top</span><span class="o">:</span> <span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">&amp;</span><span class="nd">::before</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">top</span><span class="o">:</span> <span class="ni">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">right</span><span class="o">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">bottom</span><span class="o">:</span> <span class="o">-</span><span class="mi">7</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">margin-right</span><span class="o">:</span> <span class="o">-</span><span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">border-bottom-color</span><span class="o">:</span> <span class="mh">#616161</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.tooltipped-sw</span><span class="nd">::after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin-right</span><span class="o">:</span> <span class="o">-</span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Move the tooltip body to the center of the object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.tooltipped-s</span><span class="nd">::after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">transform</span><span class="o">:</span> <span class="nf">translateX</span><span class="p">(</span><span class="mi">50</span><span class="kt">%</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.codecopy-btn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">border</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">inline-block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">999</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">float</span><span class="o">:</span> <span class="ni">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#efefef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">box-shadow</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">outline</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nc">.codecopy-btn</span><span class="nd">:hover</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#b6b6b6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-decoration-color</span><span class="o">:</span> <span class="mh">#1b1f23</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@media</span> <span class="n">print</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">900</span><span class="kt">px</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.codecopy-btn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">font-size</span><span class="o">:</span> <span class="mi">2</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@media</span> <span class="n">print</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">850</span><span class="kt">px</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.codecopy-btn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.code-hightlight</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">box-sizing</span><span class="o">:</span> <span class="ni">border-box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="o">-</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nn">#codeblock-titlebar</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">4</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#efefef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">9999</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">float</span><span class="o">:</span> <span class="ni">bottom</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为上面 <code>titlebar</code> 的作用是填补空白部分因此也就不怎么讲究了直接拉满即可。</p>
<p>（未完）</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blog.weearc.top/tags/hexo/">hexo</a></li>
      <li><a href="https://blog.weearc.top/tags/%E6%A8%A1%E7%89%88/">模版</a></li>
      <li><a href="https://blog.weearc.top/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/">响应式</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://blog.weearc.top/posts/2021-03-24-redmi-k30-pro-%E5%AE%8C%E6%95%B4%E4%BD%93%E9%AA%8C-%E5%90%8E%E7%AF%87/">
    <span class="title">« 上一页</span>
    <br>
    <span>Redmi K30 pro 完整体验(后篇)</span>
  </a>
  <a class="next" href="https://blog.weearc.top/posts/2020-08-21-%E4%BD%BF%E7%94%A8-github-actions-%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/">
    <span class="title">下一页 »</span>
    <br>
    <span>使用 github actions 部署博客到腾讯云</span>
  </a>
</nav>

  </footer><script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<div id="vcomments"></div>
<script>
    function loadComments() {
        
        new Valine({
            el: '#vcomments',
            appId: 'bhQyg8BFhAianSbFIDztqY5F-gzGzoHsz',
            appKey: 'hyBnHdPlTNOtclNbq8oB5bwg',
            placeholder: 'Just so so',
            notify: 'true',
            verify: 'true',
            path: 'window.location.pathname',
            avatar: '',
            meta: '',
            pageSize: '',
            lang: '',
            visitor: '',
            highlight: '',
            avatarForce: '',
            recordIP: ''
        });
    }
    if (window.location.pathname !== '/about/') {
        loadComments()
    }
</script>
</article>
    </main>
    
<footer class="footer">
    <span>Copyright &copy; 2023 | <a href="https://blog.weearc.top">weearc 的个人博客</a></span></br>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> & theme based on
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span></br>
    <span>
        <a href="http://beian.miit.gov.cn/" rel="noopener" target="_blank" style="border:none;">
            辽ICP备2020011073号
        </a>
    </span>
    </br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span>
    <span id="busuanzi_container_site_uv"> 本站访客数 <span id="busuanzi_value_site_uv"></span> 人次 </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>
<script type="text/javascript" src="/js/custom.js"></script>
</html>
